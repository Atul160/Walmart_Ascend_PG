"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},windowIsDefined="object"===(typeof window>"u"?"undefined":_typeof(window));!function(e){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"===(typeof module>"u"?"undefined":_typeof(module))&&module.exports){var t;try{t=require("jquery")}catch{t=null}module.exports=e(t)}else window&&(window.Slider=e(window.jQuery))}(function(e){var r,t="slider",i="bootstrapSlider";return windowIsDefined&&!window.console&&(window.console={}),windowIsDefined&&!window.console.log&&(window.console.log=function(){}),windowIsDefined&&!window.console.warn&&(window.console.warn=function(){}),function(n){function l(){}var d=Array.prototype.slice;!function s(c){if(c){var u=typeof console>"u"?l:function(g){console.error(g)};c.bridget=function(g,_){(function o(g){g.prototype.option||(g.prototype.option=function(_){c.isPlainObject(_)&&(this.options=c.extend(!0,this.options,_))})})(_),function h(g,_){c.fn[g]=function(m){if("string"==typeof m){for(var w=d.call(arguments,1),A=0,j=this.length;j>A;A++){var z=c.data(this[A],g);if(z)if(c.isFunction(z[m])&&"_"!==m.charAt(0)){var O=z[m].apply(z,w);if(void 0!==O&&O!==z)return O}else u("no such method '"+m+"' for "+g+" instance");else u("cannot call methods on "+g+" prior to initialization; attempted to call '"+m+"'")}return this}var D=this.map(function(){var M=c.data(this,g);return M?(M.option(m),M._init()):(M=new _(this,m),c.data(this,g,M)),c(this)});return 1===D.length?D[0]:D}}(g,_)}}}(n)}(e),function(n){function l(o,h){function u(_e,Ee){var It="data-slider-"+Ee.replace(/_/g,"-"),mt=_e.getAttribute(It);try{return JSON.parse(mt)}catch{return mt}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1,tickIndex:null},this.ticksCallbackMap={},this.handleCallbackMap={},"string"==typeof o?this.element=document.querySelector(o):o instanceof HTMLElement&&(this.element=o),h=h||{};for(var g=Object.keys(this.defaultOptions),_=h.hasOwnProperty("min"),m=h.hasOwnProperty("max"),w=0;w<g.length;w++){var A=g[w],j=h[A];j=null!==(j=typeof j<"u"?j:u(this.element,A))?j:this.defaultOptions[A],this.options||(this.options={}),this.options[A]=j}if(this.ticksAreValid=Array.isArray(this.options.ticks)&&this.options.ticks.length>0,this.ticksAreValid||(this.options.lock_to_ticks=!1),"auto"===this.options.rtl){var X=window.getComputedStyle(this.element);this.options.rtl=null!=X?"rtl"===X.direction:"rtl"===this.element.style.direction}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position=this.options.rtl?"left":"right";var z,O,D,M,B,W=this.element.style.width,Se=!1,Ue=this.element.parentNode;if(this.sliderElem)Se=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var ge=document.createElement("div");ge.className="slider-track",(O=document.createElement("div")).className="slider-track-low",(z=document.createElement("div")).className="slider-selection",(D=document.createElement("div")).className="slider-track-high",(M=document.createElement("div")).className="slider-handle min-slider-handle",M.setAttribute("role","slider"),M.setAttribute("aria-valuemin",this.options.min),M.setAttribute("aria-valuemax",this.options.max),(B=document.createElement("div")).className="slider-handle max-slider-handle",B.setAttribute("role","slider"),B.setAttribute("aria-valuemin",this.options.min),B.setAttribute("aria-valuemax",this.options.max),ge.appendChild(O),ge.appendChild(z),ge.appendChild(D),this.rangeHighlightElements=[];var Ie=this.options.rangeHighlights;if(Array.isArray(Ie)&&Ie.length>0)for(var Ae=0;Ae<Ie.length;Ae++){var q=document.createElement("div");q.className="slider-rangeHighlight slider-selection "+(Ie[Ae].class||""),this.rangeHighlightElements.push(q),ge.appendChild(q)}var ae=Array.isArray(this.options.labelledby);if(ae&&this.options.labelledby[0]&&M.setAttribute("aria-labelledby",this.options.labelledby[0]),ae&&this.options.labelledby[1]&&B.setAttribute("aria-labelledby",this.options.labelledby[1]),!ae&&this.options.labelledby&&(M.setAttribute("aria-labelledby",this.options.labelledby),B.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",w=0;w<this.options.ticks.length;w++){var me=document.createElement("div");if(me.className="slider-tick",this.options.ticks_tooltip){var G=this._addTickListener(),Be=G.addMouseEnter(this,me,w),We=G.addMouseLeave(this,me);this.ticksCallbackMap[w]={mouseEnter:Be,mouseLeave:We}}this.ticks.push(me),this.ticksContainer.appendChild(me)}z.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",w=0;w<this.options.ticks_labels.length;w++){var Xe=document.createElement("div"),Ze=this.options.reversed&&0===this.options.ticks_positions.length?this.options.ticks_labels.length-(w+1):w;Xe.className="slider-tick-label",Xe.innerHTML=this.options.ticks_labels[Ze],this.tickLabels.push(Xe),this.tickLabelContainer.appendChild(Xe)}var Ne=function(_e){var Ee=document.createElement("div");Ee.className="arrow";var It=document.createElement("div");It.className="tooltip-inner",_e.appendChild(Ee),_e.appendChild(It)},be=document.createElement("div");be.className="tooltip tooltip-main",be.setAttribute("role","presentation"),Ne(be);var Z=document.createElement("div");Z.className="tooltip tooltip-min",Z.setAttribute("role","presentation"),Ne(Z);var he=document.createElement("div");he.className="tooltip tooltip-max",he.setAttribute("role","presentation"),Ne(he),this.sliderElem.appendChild(ge),this.sliderElem.appendChild(be),this.sliderElem.appendChild(Z),this.sliderElem.appendChild(he),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(M),this.sliderElem.appendChild(B),Ue.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(n&&(this.$element=n(this.element),this.$sliderElem=n(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),c[this.options.scale]&&(this.options.scale=c[this.options.scale]),!0===Se&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.sliderElem,"slider-rtl"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","right","top","width","height"].forEach(function(_e){this._removeProperty(this.trackLow,_e),this._removeProperty(this.trackSelection,_e),this._removeProperty(this.trackHigh,_e)},this),[this.handle1,this.handle2].forEach(function(_e){this._removeProperty(_e,"left"),this._removeProperty(_e,"right"),this._removeProperty(_e,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(_e){this._removeProperty(_e,"bs-tooltip-left"),this._removeProperty(_e,"bs-tooltip-right"),this._removeProperty(_e,"bs-tooltip-top"),this._removeClass(_e,"bs-tooltip-right"),this._removeClass(_e,"bs-tooltip-left"),this._removeClass(_e,"bs-tooltip-top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=W,this.options.orientation="horizontal",this.stylePos=this.options.rtl?"right":"left",this.mousePos="clientX",this.sizePos="offsetWidth"),this.options.rtl&&this._addClass(this.sliderElem,"slider-rtl"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(m||(this.options.max=Math.max.apply(Math,this.options.ticks)),_||(this.options.min=Math.min.apply(Math,this.options.ticks))),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value,this.trackLow=O||this.trackLow,this.trackSelection=z||this.trackSelection,this.trackHigh=D||this.trackHigh,"none"===this.options.selection?(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")):("after"===this.options.selection||"before"===this.options.selection)&&(this._removeClass(this.trackLow,"hide"),this._removeClass(this.trackSelection,"hide"),this._removeClass(this.trackHigh,"hide")),this.handle1=M||this.handle1,this.handle2=B||this.handle2,!0===Se)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),w=0;w<this.ticks.length;w++)this._removeClass(this.ticks[w],"round triangle hide");if(-1!==["round","triangle","custom"].indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),w=0;w<this.ticks.length;w++)this._addClass(this.ticks[w],this.options.handle);if(this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip)this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide");else if("always"===this.options.tooltip)this._showTooltip(),this._alwaysShowTooltip=!0;else{if(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.options.ticks_tooltip){var Te=this._addTickListener(),ke=Te.addMouseEnter(this,this.handle1),Qe=Te.addMouseLeave(this,this.handle1);this.handleCallbackMap.handle1={mouseEnter:ke,mouseLeave:Qe},ke=Te.addMouseEnter(this,this.handle2),Qe=Te.addMouseLeave(this,this.handle2),this.handleCallbackMap.handle2={mouseEnter:ke,mouseLeave:Qe}}else this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.showTooltip,!1),this.sliderElem.addEventListener("touchmove",this.showTooltip,!1),this.sliderElem.addEventListener("touchend",this.hideTooltip,!1));this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1),this.touchCapable&&(this.handle1.addEventListener("touchstart",this.showTooltip,!1),this.handle1.addEventListener("touchmove",this.showTooltip,!1),this.handle1.addEventListener("touchend",this.hideTooltip,!1),this.handle2.addEventListener("touchstart",this.showTooltip,!1),this.handle2.addEventListener("touchmove",this.showTooltip,!1),this.handle2.addEventListener("touchend",this.hideTooltip,!1))}this.options.enabled?this.enable():this.disable()}var s=void 0,d_formatInvalidInputErrorMsg=function(o){return"Invalid input value '"+o+"' passed in"},c={linear:{getValue:function(o,h){return o<h.min?h.min:o>h.max?h.max:o},toValue:function(o){var h=o/100*(this.options.max-this.options.min),u=!0;if(this.options.ticks_positions.length>0){for(var g,_,m,w=0,A=1;A<this.options.ticks_positions.length;A++)if(o<=this.options.ticks_positions[A]){g=this.options.ticks[A-1],m=this.options.ticks_positions[A-1],_=this.options.ticks[A],w=this.options.ticks_positions[A];break}h=g+(o-m)/(w-m)*(_-g),u=!1}var z=(u?this.options.min:0)+Math.round(h/this.options.step)*this.options.step;return c.linear.getValue(z,this.options)},toPercentage:function(o){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var h,u,g,_=0,m=0;m<this.options.ticks.length;m++)if(o<=this.options.ticks[m]){h=m>0?this.options.ticks[m-1]:0,g=m>0?this.options.ticks_positions[m-1]:0,u=this.options.ticks[m],_=this.options.ticks_positions[m];break}if(m>0)return g+(o-h)/(u-h)*(_-g)}return 100*(o-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(o){var h=1-this.options.min,u=Math.log(this.options.min+h),g=Math.log(this.options.max+h),_=Math.exp(u+(g-u)*o/100)-h;return Math.round(_)===g?g:(_=this.options.min+Math.round((_-this.options.min)/this.options.step)*this.options.step,c.linear.getValue(_,this.options))},toPercentage:function(o){if(this.options.max===this.options.min)return 0;var h=1-this.options.min,u=Math.log(this.options.max+h),g=Math.log(this.options.min+h);return 100*(Math.log(o+h)-g)/(u-g)}}};(r=function(o,h){return l.call(this,o,h),this}).prototype={_init:function(){},constructor:r,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,lock_to_ticks:!1,handle:"round",reversed:!1,rtl:"auto",enabled:!0,formatter:function(o){return Array.isArray(o)?o[0]+" : "+o[1]:o},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,ticks_tooltip:!1,scale:"linear",focus:!1,tooltip_position:null,labelledby:null,rangeHighlights:[]},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(o,h,u){o||(o=0);var g=this.getValue();this._state.value=this._validateInputValue(o);var _=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=_(this._state.value[0]),this._state.value[1]=_(this._state.value[1]),this.ticksAreValid&&this.options.lock_to_ticks&&(this._state.value[0]=this.options.ticks[this._getClosestTickIndex(this._state.value[0])],this._state.value[1]=this.options.ticks[this._getClosestTickIndex(this._state.value[1])]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=_(this._state.value),this.ticksAreValid&&this.options.lock_to_ticks&&(this._state.value=this.options.ticks[this._getClosestTickIndex(this._state.value)]),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min),this._setTickIndex(),this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:[0,0,100],this._layout();var m=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(m),!0===h&&this._trigger("slide",m),(Array.isArray(m)?g[0]!==m[0]||g[1]!==m[1]:g!==m)&&!0===u&&this._trigger("change",{oldValue:g,newValue:m}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),n&&(this._unbindJQueryEventHandlers(),s===t&&this.$element.removeData(s),this.$element.removeData(i))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(o,h){return this._bindNonQueryEventHandler(o,h),this},off:function(o,h){n?(this.$element.off(o,h),this.$sliderElem.off(o,h)):this._unbindNonQueryEventHandler(o,h)},getAttribute:function(o){return o?this.options[o]:this.options},setAttribute:function(o,h){return this.options[o]=h,this},refresh:function(o){var h=this.getValue();return this._removeSliderEventHandlers(),l.call(this,this.element,this.options),o&&!0===o.useCurrentValue&&this.setValue(h),n&&(s===t?(n.data(this.element,t,this),n.data(this.element,i,this)):n.data(this.element,i,this)),this},relayout:function(){return this._resize(),this},_removeTooltipListener:function(o,h){this.handle1.removeEventListener(o,h,!1),this.handle2.removeEventListener(o,h,!1)},_removeSliderEventHandlers:function(){if(this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.options.ticks_tooltip){for(var o=this.ticksContainer.getElementsByClassName("slider-tick"),h=0;h<o.length;h++)o[h].removeEventListener("mouseenter",this.ticksCallbackMap[h].mouseEnter,!1),o[h].removeEventListener("mouseleave",this.ticksCallbackMap[h].mouseLeave,!1);this.handleCallbackMap.handle1&&this.handleCallbackMap.handle2&&(this.handle1.removeEventListener("mouseenter",this.handleCallbackMap.handle1.mouseEnter,!1),this.handle2.removeEventListener("mouseenter",this.handleCallbackMap.handle2.mouseEnter,!1),this.handle1.removeEventListener("mouseleave",this.handleCallbackMap.handle1.mouseLeave,!1),this.handle2.removeEventListener("mouseleave",this.handleCallbackMap.handle2.mouseLeave,!1))}this.handleCallbackMap=null,this.ticksCallbackMap=null,this.showTooltip&&this._removeTooltipListener("focus",this.showTooltip),this.hideTooltip&&this._removeTooltipListener("blur",this.hideTooltip),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),this.touchCapable&&(this.showTooltip&&(this.handle1.removeEventListener("touchstart",this.showTooltip,!1),this.handle1.removeEventListener("touchmove",this.showTooltip,!1),this.handle2.removeEventListener("touchstart",this.showTooltip,!1),this.handle2.removeEventListener("touchmove",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("touchend",this.hideTooltip,!1),this.handle2.removeEventListener("touchend",this.hideTooltip,!1)),this.showTooltip&&(this.sliderElem.removeEventListener("touchstart",this.showTooltip,!1),this.sliderElem.removeEventListener("touchmove",this.showTooltip,!1)),this.hideTooltip&&this.sliderElem.removeEventListener("touchend",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1)),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(o,h){void 0===this.eventToCallbackMap[o]&&(this.eventToCallbackMap[o]=[]),this.eventToCallbackMap[o].push(h)},_unbindNonQueryEventHandler:function(o,h){var u=this.eventToCallbackMap[o];if(void 0!==u)for(var g=0;g<u.length;g++)if(u[g]===h){u.splice(g,1);break}},_cleanUpEventCallbacksMap:function(){for(var o=Object.keys(this.eventToCallbackMap),h=0;h<o.length;h++)delete this.eventToCallbackMap[o[h]]},_showTooltip:function(){!1===this.options.tooltip_split?(this._addClass(this.tooltip,"show"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"show"),this._addClass(this.tooltip_max,"show"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){!1===this._state.inDrag&&!0!==this._alwaysShowTooltip&&(this._removeClass(this.tooltip,"show"),this._removeClass(this.tooltip_min,"show"),this._removeClass(this.tooltip_max,"show")),this._state.over=!1},_setToolTipOnMouseOver:function(o){var u=this,g=this.options.formatter(o?o.value[0]:this._state.value[0]),_=function h(m,w){return w?[100-m.percentage[0],u.options.range?100-m.percentage[1]:m.percentage[1]]:[m.percentage[0],m.percentage[1]]}(o||this._state,this.options.reversed);this._setText(this.tooltipInner,g),this.tooltip.style[this.stylePos]=_[0]+"%"},_copyState:function(){return{value:[this._state.value[0],this._state.value[1]],enabled:this._state.enabled,offset:this._state.offset,size:this._state.size,percentage:[this._state.percentage[0],this._state.percentage[1],this._state.percentage[2]],inDrag:this._state.inDrag,over:this._state.over,dragged:this._state.dragged,keyCtrl:this._state.keyCtrl}},_addTickListener:function(){return{addMouseEnter:function(o,h,u){var g=function(){var _=o._copyState(),m=h===o.handle1?_.value[0]:_.value[1],w=void 0;void 0!==u?(m=o.options.ticks[u],w=o.options.ticks_positions.length>0&&o.options.ticks_positions[u]||o._toPercentage(o.options.ticks[u])):w=o._toPercentage(m),_.value[0]=m,_.percentage[0]=w,o._setToolTipOnMouseOver(_),o._showTooltip()};return h.addEventListener("mouseenter",g,!1),g},addMouseLeave:function(o,h){var u=function(){o._hideTooltip()};return h.addEventListener("mouseleave",u,!1),u}}},_layout:function(){var o,h,M;if(this.handle1.style[this.stylePos]=(o=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]])[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),h=this.options.formatter(this._state.value[0]),isNaN(h)?this.handle1.setAttribute("aria-valuetext",h):this.handle1.removeAttribute("aria-valuetext"),this.handle2.style[this.stylePos]=o[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),h=this.options.formatter(this._state.value[1]),isNaN(h)?this.handle2.setAttribute("aria-valuetext",h):this.handle2.removeAttribute("aria-valuetext"),this.rangeHighlightElements.length>0&&Array.isArray(this.options.rangeHighlights)&&this.options.rangeHighlights.length>0)for(var u=0;u<this.options.rangeHighlights.length;u++){var g=this._toPercentage(this.options.rangeHighlights[u].start),_=this._toPercentage(this.options.rangeHighlights[u].end);if(this.options.reversed){var m=100-_;_=100-g,g=m}var w=this._createHighlightRange(g,_);w?"vertical"===this.options.orientation?(this.rangeHighlightElements[u].style.top=w.start+"%",this.rangeHighlightElements[u].style.height=w.size+"%"):(this.options.rtl?this.rangeHighlightElements[u].style.right=w.start+"%":this.rangeHighlightElements[u].style.left=w.start+"%",this.rangeHighlightElements[u].style.width=w.size+"%"):this.rangeHighlightElements[u].style.display="none"}if(Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var A,j="vertical"===this.options.orientation?"height":"width";A="vertical"===this.options.orientation?"marginTop":this.options.rtl?"marginRight":"marginLeft";var X=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var z=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[A]=-X/2+"px"),z=this.tickLabelContainer.offsetHeight;else for(O=0;O<this.tickLabelContainer.childNodes.length;O++)this.tickLabelContainer.childNodes[O].offsetHeight>z&&(z=this.tickLabelContainer.childNodes[O].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=z+"px")}for(var O=0;O<this.options.ticks.length;O++){var D=this.options.ticks_positions[O]||this._toPercentage(this.options.ticks[O]);this.options.reversed&&(D=100-D),this.ticks[O].style[this.stylePos]=D+"%",this._removeClass(this.ticks[O],"in-selection"),this.options.range?D>=o[0]&&D<=o[1]&&this._addClass(this.ticks[O],"in-selection"):("after"===this.options.selection&&D>=o[0]||"before"===this.options.selection&&D<=o[0])&&this._addClass(this.ticks[O],"in-selection"),this.tickLabels[O]&&(this.tickLabels[O].style[j]=X+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[O]?(this.tickLabels[O].style.position="absolute",this.tickLabels[O].style[this.stylePos]=D+"%",this.tickLabels[O].style[A]=-X/2+"px"):"vertical"===this.options.orientation&&(this.options.rtl?this.tickLabels[O].style.marginRight=this.sliderElem.offsetWidth+"px":this.tickLabels[O].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style[A]=this.sliderElem.offsetWidth/2*-1+"px"),this._removeClass(this.tickLabels[O],"label-in-selection label-is-selection"),this.options.range?D>=o[0]&&D<=o[1]&&(this._addClass(this.tickLabels[O],"label-in-selection"),(D===o[0]||o[1])&&this._addClass(this.tickLabels[O],"label-is-selection")):(("after"===this.options.selection&&D>=o[0]||"before"===this.options.selection&&D<=o[0])&&this._addClass(this.tickLabels[O],"label-in-selection"),D===o[0]&&this._addClass(this.tickLabels[O],"label-is-selection")))}}if(this.options.range){M=this.options.formatter(this._state.value),this._setText(this.tooltipInner,M),this.tooltip.style[this.stylePos]=(o[1]+o[0])/2+"%";var B=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,B);var W=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,W),this.tooltip_min.style[this.stylePos]=o[0]+"%",this.tooltip_max.style[this.stylePos]=o[1]+"%"}else M=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,M),this.tooltip.style[this.stylePos]=o[0]+"%";if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(o[0],o[1])+"%",this.trackSelection.style.top=Math.min(o[0],o[1])+"%",this.trackSelection.style.height=Math.abs(o[0]-o[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(o[0],o[1])-Math.abs(o[0]-o[1])+"%";else{"right"===this.stylePos?this.trackLow.style.right="0":this.trackLow.style.left="0",this.trackLow.style.width=Math.min(o[0],o[1])+"%","right"===this.stylePos?this.trackSelection.style.right=Math.min(o[0],o[1])+"%":this.trackSelection.style.left=Math.min(o[0],o[1])+"%",this.trackSelection.style.width=Math.abs(o[0]-o[1])+"%","right"===this.stylePos?this.trackHigh.style.left="0":this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(o[0],o[1])-Math.abs(o[0]-o[1])+"%";var Se=this.tooltip_min.getBoundingClientRect(),Ue=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?Se.right>Ue.left?(this._removeClass(this.tooltip_max,"bs-tooltip-bottom"),this._addClass(this.tooltip_max,"bs-tooltip-top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"bs-tooltip-top"),this._addClass(this.tooltip_max,"bs-tooltip-bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):Se.right>Ue.left?(this._removeClass(this.tooltip_max,"bs-tooltip-top"),this._addClass(this.tooltip_max,"bs-tooltip-bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bs-tooltip-bottom"),this._addClass(this.tooltip_max,"bs-tooltip-top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_createHighlightRange:function(o,h){return this._isHighlightRange(o,h)?o>h?{start:h,size:o-h}:{start:o,size:h-o}:null},_isHighlightRange:function(o,h){return o>=0&&100>=o&&h>=0&&100>=h},_resize:function(o){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(o,h){o.style.removeProperty?o.style.removeProperty(h):o.style.removeAttribute(h)},_mousedown:function(o){if(!this._state.enabled)return!1;o.preventDefault&&o.preventDefault(),this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var h=this._getPercentage(o);if(this.options.range){var u=Math.abs(this._state.percentage[0]-h),g=Math.abs(this._state.percentage[1]-h);this._state.dragged=g>u?0:1,this._adjustPercentageForRangeSliders(h)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=h,this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var _=this._calculateValue();return this._trigger("slideStart",_),this.setValue(_,!1,!0),o.returnValue=!1,this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(o){this._mousedown(o)},_triggerFocusOnHandle:function(o){0===o&&this.handle1.focus(),1===o&&this.handle2.focus()},_keydown:function(o,h){if(!this._state.enabled)return!1;var u;switch(h.keyCode){case 37:case 40:u=-1;break;case 39:case 38:u=1}if(u){if(this.options.natural_arrow_keys){var w=this.options.reversed;"horizontal"===this.options.orientation?this.options.rtl?w||(u=-u):w&&(u=-u):"vertical"===this.options.orientation&&(w||(u=-u))}var A;if(this.ticksAreValid&&this.options.lock_to_ticks){var j=void 0;-1===(j=this.options.ticks.indexOf(this._state.value[o]))&&(j=0,window.console.warn("(lock_to_ticks) _keydown: index should not be -1")),j+=u,j=Math.max(0,Math.min(this.options.ticks.length-1,j)),A=this.options.ticks[j]}else A=this._state.value[o]+u*this.options.step;var X=this._toPercentage(A);if(this._state.keyCtrl=o,this.options.range){this._adjustPercentageForRangeSliders(X);var O=this._state.keyCtrl?A:this._state.value[1];A=[Math.max(this.options.min,Math.min(this.options.max,this._state.keyCtrl?this._state.value[0]:A)),Math.max(this.options.min,Math.min(this.options.max,O))]}else A=Math.max(this.options.min,Math.min(this.options.max,A));return this._trigger("slideStart",A),this.setValue(A,!0,!0),this._trigger("slideStop",A),this._pauseEvent(h),delete this._state.keyCtrl,!1}},_pauseEvent:function(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault(),o.cancelBubble=!0,o.returnValue=!1},_mousemove:function(o){if(!this._state.enabled)return!1;var h=this._getPercentage(o);this._adjustPercentageForRangeSliders(h),this._state.percentage[this._state.dragged]=h;var u=this._calculateValue(!0);return this.setValue(u,!0,!0),!1},_touchmove:function(o){void 0!==o.changedTouches&&o.preventDefault&&o.preventDefault()},_adjustPercentageForRangeSliders:function(o){if(this.options.range){var h=this._getNumDigitsAfterDecimalPlace(o),u=this._applyToFixedAndParseFloat(o,h=h?h-1:0);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],h)<u?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],h)>u?(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0):0===this._state.keyCtrl&&this._toPercentage(this._state.value[1])<o?(this._state.percentage[0]=this._state.percentage[1],this._state.keyCtrl=1,this.handle2.focus()):1===this._state.keyCtrl&&this._toPercentage(this._state.value[0])>o&&(this._state.percentage[1]=this._state.percentage[0],this._state.keyCtrl=0,this.handle1.focus())}},_mouseup:function(o){if(!this._state.enabled)return!1;var h=this._getPercentage(o);this._adjustPercentageForRangeSliders(h),this._state.percentage[this._state.dragged]=h,this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,!1===this._state.over&&this._hideTooltip();var u=this._calculateValue(!0);return this.setValue(u,!1,!0),this._trigger("slideStop",u),this._state.dragged=null,!1},_setValues:function(o,h){this._state.percentage[o]!==(0===o?0:100)&&(h.data[o]=this._toValue(this._state.percentage[o]),h.data[o]=this._applyPrecision(h.data[o]))},_calculateValue:function(o){var h={};return this.options.range?(h.data=[this.options.min,this.options.max],this._setValues(0,h),this._setValues(1,h),o&&(h.data[0]=this._snapToClosestTick(h.data[0]),h.data[1]=this._snapToClosestTick(h.data[1]))):(h.data=this._toValue(this._state.percentage[0]),h.data=parseFloat(h.data),h.data=this._applyPrecision(h.data),o&&(h.data=this._snapToClosestTick(h.data))),h.data},_snapToClosestTick:function(o){for(var h=[o,1/0],u=0;u<this.options.ticks.length;u++){var g=Math.abs(this.options.ticks[u]-o);g<=h[1]&&(h=[this.options.ticks[u],g])}return h[1]<=this.options.ticks_snap_bounds?h[0]:o},_applyPrecision:function(o){var h=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(o,h)},_getNumDigitsAfterDecimalPlace:function(o){var h=(""+o).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return h?Math.max(0,(h[1]?h[1].length:0)-(h[2]?+h[2]:0)):0},_applyToFixedAndParseFloat:function(o,h){var u=o.toFixed(h);return parseFloat(u)},_getPercentage:function(o){!this.touchCapable||"touchstart"!==o.type&&"touchmove"!==o.type&&"touchend"!==o.type||(o=o.changedTouches[0]);var g=o[this.mousePos]-this._state.offset[this.stylePos];"right"===this.stylePos&&(g=-g);var _=g/this._state.size*100;return _=Math.round(_/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(_=100-_),Math.max(0,Math.min(100,_))},_validateInputValue:function(o){if(isNaN(+o)){if(Array.isArray(o))return this._validateArray(o),o;throw new Error(d_formatInvalidInputErrorMsg(o))}return+o},_validateArray:function(o){for(var h=0;h<o.length;h++){var u=o[h];if("number"!=typeof u)throw new Error(d_formatInvalidInputErrorMsg(u))}},_setDataVal:function(o){this.element.setAttribute("data-value",o),this.element.setAttribute("value",o),this.element.value=o},_trigger:function(o,h){h=h||0===h?h:void 0;var u=this.eventToCallbackMap[o];if(u&&u.length)for(var g=0;g<u.length;g++)(0,u[g])(h);n&&this._triggerJQueryEvent(o,h)},_triggerJQueryEvent:function(o,h){var u={type:o,value:h};this.$element.trigger(u),this.$sliderElem.trigger(u)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(o,h){typeof o.textContent<"u"?o.textContent=h:typeof o.innerText<"u"&&(o.innerText=h)},_removeClass:function(o,h){for(var u=h.split(" "),g=o.className,_=0;_<u.length;_++){var w=new RegExp("(?:\\s|^)"+u[_]+"(?:\\s|$)");g=g.replace(w," ")}o.className=g.trim()},_addClass:function(o,h){for(var u=h.split(" "),g=o.className,_=0;_<u.length;_++){var m=u[_];new RegExp("(?:\\s|^)"+m+"(?:\\s|$)").test(g)||(g+=" "+m)}o.className=g.trim()},_offsetLeft:function(o){return o.getBoundingClientRect().left},_offsetRight:function(o){return o.getBoundingClientRect().right},_offsetTop:function(o){for(var h=o.offsetTop;(o=o.offsetParent)&&!isNaN(o.offsetTop);)h+=o.offsetTop,"BODY"!==o.tagName&&(h-=o.scrollTop);return h},_offset:function(o){return{left:this._offsetLeft(o),right:this._offsetRight(o),top:this._offsetTop(o)}},_css:function(o,h,u){if(n)n.style(o,h,u);else{var g=h.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(_,m){return m.toUpperCase()});o.style[g]=u}},_toValue:function(o){return this.options.scale.toValue.apply(this,[o])},_toPercentage:function(o){return this.options.scale.toPercentage.apply(this,[o])},_setTooltipPosition:function(){var o=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var h,u="left"===(h=this.options.tooltip_position?this.options.tooltip_position:this.options.rtl?"left":"right")?"right":"left";o.forEach(function(g){this._addClass(g,"bs-tooltip-"+h),g.style[u]="100%"}.bind(this))}else o.forEach("bottom"===this.options.tooltip_position?function(g){this._addClass(g,"bs-tooltip-bottom"),g.style.top="22px"}.bind(this):function(g){this._addClass(g,"bs-tooltip-top"),g.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))},_getClosestTickIndex:function(o){for(var h=Math.abs(o-this.options.ticks[0]),u=0,g=0;g<this.options.ticks.length;++g){var _=Math.abs(o-this.options.ticks[g]);h>_&&(h=_,u=g)}return u},_setTickIndex:function(){this.ticksAreValid&&(this._state.tickIndex=[this.options.ticks.indexOf(this._state.value[0]),this.options.ticks.indexOf(this._state.value[1])])}},n&&n.fn&&(n.fn.slider?(windowIsDefined&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),s=i):(n.bridget(t,r),s=t),n.bridget(i,r),n(function(){n("input[data-provide=slider]")[s]()}))}(e),r}),function(e,t){"object"==typeof exports&&typeof module<"u"?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).Cropper=t()}(this,function(){function e(f,v){var y,x=Object.keys(f);return Object.getOwnPropertySymbols&&(y=Object.getOwnPropertySymbols(f),v&&(y=y.filter(function(S){return Object.getOwnPropertyDescriptor(f,S).enumerable})),x.push.apply(x,y)),x}function t(f){for(var v=1;v<arguments.length;v++){var y=null!=arguments[v]?arguments[v]:{};v%2?e(Object(y),!0).forEach(function(x){var S,P;S=f,P=y[x],(x=s(x))in S?Object.defineProperty(S,x,{value:P,enumerable:!0,configurable:!0,writable:!0}):S[x]=P}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(y)):e(Object(y)).forEach(function(x){Object.defineProperty(f,x,Object.getOwnPropertyDescriptor(y,x))})}return f}function i(f){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(f)}function r(f,v){for(var y=0;y<v.length;y++){var x=v[y];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(f,s(x.key),x)}}function n(f){return function(v){if(Array.isArray(v))return l(v)}(f)||function(v){if(typeof Symbol<"u"&&null!=v[Symbol.iterator]||null!=v["@@iterator"])return Array.from(v)}(f)||function(v,y){var x;if(v)return"string"==typeof v?l(v,y):"Map"===(x="Object"===(x=Object.prototype.toString.call(v).slice(8,-1))&&v.constructor?v.constructor.name:x)||"Set"===x?Array.from(v):"Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?l(v,y):void 0}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(f,v){(null==v||v>f.length)&&(v=f.length);for(var y=0,x=new Array(v);y<v;y++)x[y]=f[y];return x}function s(f){return"symbol"==typeof(f=function(v,y){if("object"!=typeof v||null===v)return v;var x=v[Symbol.toPrimitive];if(void 0===x)return String(v);if("object"!=typeof(x=x.call(v,"string")))return x;throw new TypeError("@@toPrimitive must return a primitive value.")}(f))?f:String(f)}var d=(He=typeof window<"u"&&void 0!==window.document)?window:{},ct=!(!He||!d.document.documentElement)&&"ontouchstart"in d.document.documentElement,at=He&&"PointerEvent"in d,c="cropper",o="all",h="crop",u="move",g="zoom",_="e",m="w",w="s",A="n",j="ne",X="nw",z="se",O="sw",D="".concat(c,"-crop"),M="".concat(c,"-disabled"),B="".concat(c,"-hidden"),W="".concat(c,"-hide"),Se="".concat(c,"-invisible"),Ue="".concat(c,"-modal"),ge="".concat(c,"-move"),Ie="".concat(c,"Action"),Ae="".concat(c,"Preview"),q="crop",J="move",me="crop",G="cropend",Be="cropmove",We="cropstart",Xe="dblclick",Fe=at?"pointerdown":ct?"touchstart":"mousedown",Ze=at?"pointermove":ct?"touchmove":"mousemove",Ne=at?"pointerup pointercancel":ct?"touchend touchcancel":"mouseup",be="zoom",Z="image/jpeg",he=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ve=/^data:/,we=/^data:image\/jpeg;base64,/,Te=/^img|canvas$/i,ke={viewMode:0,dragMode:q,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Qe=Number.isNaN||d.isNaN;function _e(f){return"number"==typeof f&&!Qe(f)}function Ee(f){return 0<f&&f<1/0}function It(f){return void 0===f}function mt(f){return"object"===i(f)&&null!==f}var Ht=Object.prototype.hasOwnProperty;function Bt(f){if(!mt(f))return!1;try{var v=f.constructor,y=v.prototype;return v&&y&&Ht.call(y,"isPrototypeOf")}catch{return!1}}function yt(f){return"function"==typeof f}var jt=Array.prototype.slice;function Vt(f){return Array.from?Array.from(f):jt.call(f)}function $e(f,v){return f&&yt(v)&&(Array.isArray(f)||_e(f.length)?Vt(f).forEach(function(y,x){v.call(f,y,x,f)}):mt(f)&&Object.keys(f).forEach(function(y){v.call(f,f[y],y,f)})),f}var Ye=Object.assign||function(f){for(var v=arguments.length,y=new Array(1<v?v-1:0),x=1;x<v;x++)y[x-1]=arguments[x];return mt(f)&&0<y.length&&y.forEach(function(S){mt(S)&&Object.keys(S).forEach(function(P){f[P]=S[P]})}),f},Nt=/\.\d*(?:0|9){12}\d*$/;function qe(f,v){return v=1<arguments.length&&void 0!==v?v:1e11,Nt.test(f)?Math.round(f*v)/v:f}var dt=/^width|height|left|top|marginLeft|marginTop$/;function Pe(f,v){var y=f.style;$e(v,function(x,S){dt.test(S)&&_e(x)&&(x="".concat(x,"px")),y[S]=x})}function rt(f,v){var y;v&&(_e(f.length)?$e(f,function(x){rt(x,v)}):f.classList?f.classList.add(v):(y=f.className.trim())?y.indexOf(v)<0&&(f.className="".concat(y," ").concat(v)):f.className=v)}function Ke(f,v){v&&(_e(f.length)?$e(f,function(y){Ke(y,v)}):f.classList?f.classList.remove(v):0<=f.className.indexOf(v)&&(f.className=f.className.replace(v,"")))}function Pt(f,v,y){v&&(_e(f.length)?$e(f,function(x){Pt(x,v,y)}):(y?rt:Ke)(f,v))}var pt=/([a-z\d])([A-Z])/g;function Mt(f){return f.replace(pt,"$1-$2").toLowerCase()}function Dt(f,v){return mt(f[v])?f[v]:f.dataset?f.dataset[v]:f.getAttribute("data-".concat(Mt(v)))}function R(f,v,y){mt(y)?f[v]=y:f.dataset?f.dataset[v]=y:f.setAttribute("data-".concat(Mt(v)),y)}var ue,de,H=/\s\s*/,ie=(de=!1,He&&(ue=!1,at=function(){},ct=Object.defineProperty({},"once",{get:function(){return de=!0,ue},set:function(f){ue=f}}),d.addEventListener("test",at,ct),d.removeEventListener("test",at,ct)),de);function C(f,v,y,x){var S=3<arguments.length&&void 0!==x?x:{},P=y;v.trim().split(H).forEach(function(L){var U;ie||(U=f.listeners)&&U[L]&&U[L][y]&&(P=U[L][y],delete U[L][y],0===Object.keys(U[L]).length&&delete U[L],0===Object.keys(U).length)&&delete f.listeners,f.removeEventListener(L,P,S)})}function fe(f,v,y,x){var S=3<arguments.length&&void 0!==x?x:{},P=y;v.trim().split(H).forEach(function(L){var U,Y;S.once&&!ie&&(P=function(){delete Y[L][y],f.removeEventListener(L,P,S);for(var E=arguments.length,T=new Array(E),N=0;N<E;N++)T[N]=arguments[N];y.apply(f,T)},(Y=void 0===(U=f.listeners)?{}:U)[L]||(Y[L]={}),Y[L][y]&&f.removeEventListener(L,Y[L][y],S),Y[L][y]=P,f.listeners=Y),f.addEventListener(L,P,S)})}function Re(f,v,y){var x;return yt(Event)&&yt(CustomEvent)?x=new CustomEvent(v,{detail:y,bubbles:!0,cancelable:!0}):(x=document.createEvent("CustomEvent")).initCustomEvent(v,!0,!0,y),f.dispatchEvent(x)}function p(f){return{left:(f=f.getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:f.top+(window.pageYOffset-document.documentElement.clientTop)}}var ne=d.location,oe=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function F(f){return null!==(f=f.match(oe))&&(f[1]!==ne.protocol||f[2]!==ne.hostname||f[3]!==ne.port)}function V(f){var v="timestamp=".concat((new Date).getTime());return f+(-1===f.indexOf("?")?"?":"&")+v}function te(S){var v=S.rotate,y=S.scaleX,x=S.scaleY,L=S.translateX,P=(S=S.translateY,[]);return{WebkitTransform:(_e(L)&&0!==L&&P.push("translateX(".concat(L,"px)")),_e(S)&&0!==S&&P.push("translateY(".concat(S,"px)")),_e(v)&&0!==v&&P.push("rotate(".concat(v,"deg)")),_e(y)&&1!==y&&P.push("scaleX(".concat(y,")")),_e(x)&&1!==x&&P.push("scaleY(".concat(x,")")),L=P.length?P.join(" "):"none"),msTransform:L,transform:L}}function Oe(x,v){var y=x.pageX,S={endX:y,endY:x=x.pageY};return v?S:t({startX:y,startY:x},S)}function ye(P,L){var y,x=P.aspectRatio,S=P.height,U=(L=1<arguments.length&&void 0!==L?L:"contain",Ee(P=P.width)),Y=Ee(S);return U&&Y?(y=S*x,"contain"===L&&P<y||"cover"===L&&y<P?S=P/x:P=S*x):U?S=P/x:Y&&(P=S*x),{width:P,height:S}}var De=String.fromCharCode,ot=/^data:.*,/,He={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var f=this.element,x=this.options,v=this.container,y=this.cropper,S=Number(x.minContainerWidth);x=Number(x.minContainerHeight),rt(y,B),Ke(f,B),S={width:Math.max(v.offsetWidth,0<=S?S:200),height:Math.max(v.offsetHeight,0<=x?x:100)},Pe(y,{width:(this.containerData=S).width,height:S.height}),rt(f,B),Ke(y,B)},initCanvas:function(){var x,f=this.containerData,L=this.imageData,v=this.options.viewMode,y=(x=Math.abs(L.rotate)%180==90)?L.naturalHeight:L.naturalWidth,S=f.width,P=f.height;f.height*(L=y/(x=x?L.naturalWidth:L.naturalHeight))>f.width?3===v?S=f.height*L:P=f.width/L:3===v?P=f.width/L:S=f.height*L,this.canvasData=L={aspectRatio:L,naturalWidth:y,naturalHeight:x,width:S,height:P},this.limited=1===v||2===v,this.limitCanvas(!0,!0),L.width=Math.min(Math.max(L.width,L.minWidth),L.maxWidth),L.height=Math.min(Math.max(L.height,L.minHeight),L.maxHeight),L.left=(f.width-L.width)/2,L.top=(f.height-L.height)/2,L.oldLeft=L.left,L.oldTop=L.top,this.initialCanvasData=Ye({},L)},limitCanvas:function(f,v){var y=this.options,x=this.containerData,S=this.canvasData,P=this.cropBoxData,L=y.viewMode,U=S.aspectRatio,Y=this.cropped&&P;f&&(f=Number(y.minCanvasWidth)||0,y=Number(y.minCanvasHeight)||0,1<L?(f=Math.max(f,x.width),y=Math.max(y,x.height),3===L&&(f<y*U?f=y*U:y=f/U)):0<L&&(f?f=Math.max(f,Y?P.width:0):y?y=Math.max(y,Y?P.height:0):Y&&((f=P.width)<(y=P.height)*U?f=y*U:y=f/U)),f=(U=ye({aspectRatio:U,width:f,height:y})).width,y=U.height,S.minWidth=f,S.minHeight=y,S.maxWidth=1/0,S.maxHeight=1/0),v&&((Y?0:1)<L?(U=x.width-S.width,f=x.height-S.height,S.minLeft=Math.min(0,U),S.minTop=Math.min(0,f),S.maxLeft=Math.max(0,U),S.maxTop=Math.max(0,f),Y&&this.limited&&(S.minLeft=Math.min(P.left,P.left+(P.width-S.width)),S.minTop=Math.min(P.top,P.top+(P.height-S.height)),S.maxLeft=P.left,S.maxTop=P.top,2===L)&&(S.width>=x.width&&(S.minLeft=Math.min(0,U),S.maxLeft=Math.max(0,U)),S.height>=x.height)&&(S.minTop=Math.min(0,f),S.maxTop=Math.max(0,f))):(S.minLeft=-S.width,S.minTop=-S.height,S.maxLeft=x.width,S.maxTop=x.height))},renderCanvas:function(f,v){var y,x,S,P,L=this.canvasData,U=this.imageData;v&&(U=(v={width:U.naturalWidth*Math.abs(U.scaleX||1),height:U.naturalHeight*Math.abs(U.scaleY||1),degree:U.rotate||0}).width,P=v.height,v=v.degree,y=90==(v=Math.abs(v)%180)?{width:P,height:U}:(x=v%90*Math.PI/180,y=Math.sin(x),S=U*(x=Math.cos(x))+P*y,U=U*y+P*x,90<v?{width:U,height:S}:{width:S,height:U}),x=L.width*((P=y.width)/L.naturalWidth),S=L.height*((v=y.height)/L.naturalHeight),L.left-=(x-L.width)/2,L.top-=(S-L.height)/2,L.width=x,L.height=S,L.aspectRatio=P/v,L.naturalWidth=P,L.naturalHeight=v,this.limitCanvas(!0,!1)),(L.width>L.maxWidth||L.width<L.minWidth)&&(L.left=L.oldLeft),(L.height>L.maxHeight||L.height<L.minHeight)&&(L.top=L.oldTop),L.width=Math.min(Math.max(L.width,L.minWidth),L.maxWidth),L.height=Math.min(Math.max(L.height,L.minHeight),L.maxHeight),this.limitCanvas(!1,!0),L.left=Math.min(Math.max(L.left,L.minLeft),L.maxLeft),L.top=Math.min(Math.max(L.top,L.minTop),L.maxTop),L.oldLeft=L.left,L.oldTop=L.top,Pe(this.canvas,Ye({width:L.width,height:L.height},te({translateX:L.left,translateY:L.top}))),this.renderImage(f),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(f){var v=this.canvasData,y=this.imageData,x=y.naturalWidth*(v.width/v.naturalWidth),S=y.naturalHeight*(v.height/v.naturalHeight);Ye(y,{width:x,height:S,left:(v.width-x)/2,top:(v.height-S)/2}),Pe(this.image,Ye({width:y.width,height:y.height},te(Ye({translateX:y.left,translateY:y.top},y)))),f&&this.output()},initCropBox:function(){var f=this.canvasData,v=(y=this.options).aspectRatio||y.initialAspectRatio,y=Number(y.autoCropArea)||.8,x={width:f.width,height:f.height};v&&(f.height*v>f.width?x.height=x.width/v:x.width=x.height*v),this.cropBoxData=x,this.limitCropBox(!0,!0),x.width=Math.min(Math.max(x.width,x.minWidth),x.maxWidth),x.height=Math.min(Math.max(x.height,x.minHeight),x.maxHeight),x.width=Math.max(x.minWidth,x.width*y),x.height=Math.max(x.minHeight,x.height*y),x.left=f.left+(f.width-x.width)/2,x.top=f.top+(f.height-x.height)/2,x.oldLeft=x.left,x.oldTop=x.top,this.initialCropBoxData=Ye({},x)},limitCropBox:function(f,v){var y,x,S=this.options,P=this.containerData,L=this.canvasData,U=this.cropBoxData,Y=this.limited,E=S.aspectRatio;f&&(f=Number(S.minCropBoxWidth)||0,S=Number(S.minCropBoxHeight)||0,y=Y?Math.min(P.width,L.width,L.width+L.left,P.width-L.left):P.width,x=Y?Math.min(P.height,L.height,L.height+L.top,P.height-L.top):P.height,f=Math.min(f,P.width),S=Math.min(S,P.height),E&&(f&&S?f<S*E?S=f/E:f=S*E:f?S=f/E:S&&(f=S*E),y<x*E?x=y/E:y=x*E),U.minWidth=Math.min(f,y),U.minHeight=Math.min(S,x),U.maxWidth=y,U.maxHeight=x),v&&(Y?(U.minLeft=Math.max(0,L.left),U.minTop=Math.max(0,L.top),U.maxLeft=Math.min(P.width,L.left+L.width)-U.width,U.maxTop=Math.min(P.height,L.top+L.height)-U.height):(U.minLeft=0,U.minTop=0,U.maxLeft=P.width-U.width,U.maxTop=P.height-U.height))},renderCropBox:function(){var f=this.options,v=this.containerData,y=this.cropBoxData;(y.width>y.maxWidth||y.width<y.minWidth)&&(y.left=y.oldLeft),(y.height>y.maxHeight||y.height<y.minHeight)&&(y.top=y.oldTop),y.width=Math.min(Math.max(y.width,y.minWidth),y.maxWidth),y.height=Math.min(Math.max(y.height,y.minHeight),y.maxHeight),this.limitCropBox(!1,!0),y.left=Math.min(Math.max(y.left,y.minLeft),y.maxLeft),y.top=Math.min(Math.max(y.top,y.minTop),y.maxTop),y.oldLeft=y.left,y.oldTop=y.top,f.movable&&f.cropBoxMovable&&R(this.face,Ie,y.width>=v.width&&y.height>=v.height?u:o),Pe(this.cropBox,Ye({width:y.width,height:y.height},te({translateX:y.left,translateY:y.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Re(this.element,me,this.getData())}},gt=(at={initPreview:function(){var f=this.element,v=this.crossOrigin,y=this.options.preview,x=v?this.crossOriginUrl:this.url,S=f.alt||"The image to preview",P=document.createElement("img");v&&(P.crossOrigin=v),P.src=x,P.alt=S,this.viewBox.appendChild(P),this.viewBoxImage=P,y&&("string"==typeof(P=y)?P=f.ownerDocument.querySelectorAll(y):y.querySelector&&(P=[y]),$e(this.previews=P,function(L){var U=document.createElement("img");R(L,Ae,{width:L.offsetWidth,height:L.offsetHeight,html:L.innerHTML}),v&&(U.crossOrigin=v),U.src=x,U.alt=S,U.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',L.innerHTML="",L.appendChild(U)}))},resetPreview:function(){$e(this.previews,function(y){var v;if(mt((Pe(y,{width:(v=Dt(y,Ae)).width,height:v.height}),y.innerHTML=v.html,v=y)[y=Ae]))try{delete v[y]}catch{v[y]=void 0}else if(v.dataset)try{delete v.dataset[y]}catch{v.dataset[y]=void 0}else v.removeAttribute("data-".concat(Mt(y)))})},preview:function(){var f=this.imageData,v=this.canvasData,y=this.cropBoxData,x=y.width,S=y.height,P=f.width,L=f.height,U=y.left-v.left-f.left,Y=y.top-v.top-f.top;this.cropped&&!this.disabled&&(Pe(this.viewBoxImage,Ye({width:P,height:L},te(Ye({translateX:-U,translateY:-Y},f)))),$e(this.previews,function(E){var N,T=(N=Dt(E,Ae)).width,Q=T,se=N=N.height,re=1;x&&(se=S*(re=T/x)),S&&N<se&&(Q=x*(re=N/S),se=N),Pe(E,{width:Q,height:se}),Pe(E.getElementsByTagName("img")[0],Ye({width:P*re,height:L*re},te(Ye({translateX:-U*re,translateY:-Y*re},f))))}))}},ct={bind:function(){var f=this.element,v=this.options,y=this.cropper;yt(v.cropstart)&&fe(f,We,v.cropstart),yt(v.cropmove)&&fe(f,Be,v.cropmove),yt(v.cropend)&&fe(f,G,v.cropend),yt(v.crop)&&fe(f,me,v.crop),yt(v.zoom)&&fe(f,be,v.zoom),fe(y,Fe,this.onCropStart=this.cropStart.bind(this)),v.zoomable&&v.zoomOnWheel&&fe(y,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),v.toggleDragModeOnDblclick&&fe(y,Xe,this.onDblclick=this.dblclick.bind(this)),fe(f.ownerDocument,Ze,this.onCropMove=this.cropMove.bind(this)),fe(f.ownerDocument,Ne,this.onCropEnd=this.cropEnd.bind(this)),v.responsive&&fe(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var f=this.element,v=this.options,y=this.cropper;yt(v.cropstart)&&C(f,We,v.cropstart),yt(v.cropmove)&&C(f,Be,v.cropmove),yt(v.cropend)&&C(f,G,v.cropend),yt(v.crop)&&C(f,me,v.crop),yt(v.zoom)&&C(f,be,v.zoom),C(y,Fe,this.onCropStart),v.zoomable&&v.zoomOnWheel&&C(y,"wheel",this.onWheel,{passive:!1,capture:!0}),v.toggleDragModeOnDblclick&&C(y,Xe,this.onDblclick),C(f.ownerDocument,Ze,this.onCropMove),C(f.ownerDocument,Ne,this.onCropEnd),v.responsive&&C(window,"resize",this.onResize)}},{resize:function(){var f,v,y,x,S,P,L;this.disabled||(f=this.options,y=(x=this.container).offsetWidth/(v=this.containerData).width,x=x.offsetHeight/v.height,1!=(S=Math.abs(y-1)>Math.abs(x-1)?y:x)&&(f.restore&&(P=this.getCanvasData(),L=this.getCropBoxData()),this.render(),f.restore)&&(this.setCanvasData($e(P,function(U,Y){P[Y]=U*S})),this.setCropBoxData($e(L,function(U,Y){L[Y]=U*S}))))},dblclick:function(){var f,v;this.disabled||"none"===this.options.dragMode||this.setDragMode((v=D,((f=this.dragBox).classList?f.classList.contains(v):-1<f.className.indexOf(v))?J:q))},wheel:function(f){var v=this,y=Number(this.options.wheelZoomRatio)||.1,x=1;this.disabled||(f.preventDefault(),this.wheeling)||(this.wheeling=!0,setTimeout(function(){v.wheeling=!1},50),f.deltaY?x=0<f.deltaY?1:-1:f.wheelDelta?x=-f.wheelDelta/120:f.detail&&(x=0<f.detail?1:-1),this.zoom(-x*y,f))},cropStart:function(f){var v,y=f.buttons,x=f.button;this.disabled||("mousedown"===f.type||"pointerdown"===f.type&&"mouse"===f.pointerType)&&(_e(y)&&1!==y||_e(x)&&0!==x||f.ctrlKey)||(y=this.options,v=this.pointers,f.changedTouches?$e(f.changedTouches,function(S){v[S.identifier]=Oe(S)}):v[f.pointerId||0]=Oe(f),x=1<Object.keys(v).length&&y.zoomable&&y.zoomOnTouch?g:Dt(f.target,Ie),he.test(x)&&!1!==Re(this.element,We,{originalEvent:f,action:x})&&(f.preventDefault(),this.action=x,this.cropping=!1,x===h)&&(this.cropping=!0,rt(this.dragBox,Ue)))},cropMove:function(f){var v,y=this.action;!this.disabled&&y&&(v=this.pointers,f.preventDefault(),!1!==Re(this.element,Be,{originalEvent:f,action:y}))&&(f.changedTouches?$e(f.changedTouches,function(x){Ye(v[x.identifier]||{},Oe(x,!0))}):Ye(v[f.pointerId||0]||{},Oe(f,!0)),this.change(f))},cropEnd:function(f){var v,y;this.disabled||(v=this.action,y=this.pointers,f.changedTouches?$e(f.changedTouches,function(x){delete y[x.identifier]}):delete y[f.pointerId||0],v&&(f.preventDefault(),Object.keys(y).length||(this.action=""),this.cropping&&(this.cropping=!1,Pt(this.dragBox,Ue,this.cropped&&this.options.modal)),Re(this.element,G,{originalEvent:f,action:v})))}}),Ut={change:function(f){function v(At){switch(At){case _:je+xe.x>vt&&(xe.x=vt-je);break;case m:Q+xe.x<et&&(xe.x=et-Q);break;case A:se+xe.y<wt&&(xe.y=wt-se);break;case w:Ve+xe.y>Lt&&(xe.y=Lt-Ve)}}var y,x,S,L=this.canvasData,U=this.containerData,Y=this.cropBoxData,E=this.pointers,T=this.action,N=this.options.aspectRatio,Q=Y.left,se=Y.top,re=Y.width,ce=Y.height,je=Q+re,Ve=se+ce,et=0,wt=0,vt=U.width,Lt=U.height,St=!0,Ot=(!N&&f.shiftKey&&(N=re&&ce?re/ce:1),this.limited&&(wt=Y.minTop,vt=(et=Y.minLeft)+Math.min(U.width,L.width,L.left+L.width),Lt=wt+Math.min(U.height,L.height,L.top+L.height)),E[Object.keys(E)[0]]),xe={x:Ot.endX-Ot.startX,y:Ot.endY-Ot.startY};switch(T){case o:Q+=xe.x,se+=xe.y;break;case _:0<=xe.x&&(vt<=je||N&&(se<=wt||Lt<=Ve))?St=!1:(v(_),(re+=xe.x)<0&&(T=m,Q-=re=-re),N&&(se+=(Y.height-(ce=re/N))/2));break;case A:xe.y<=0&&(se<=wt||N&&(Q<=et||vt<=je))?St=!1:(v(A),se+=xe.y,(ce-=xe.y)<0&&(T=w,se-=ce=-ce),N&&(Q+=(Y.width-(re=ce*N))/2));break;case m:xe.x<=0&&(Q<=et||N&&(se<=wt||Lt<=Ve))?St=!1:(v(m),Q+=xe.x,(re-=xe.x)<0&&(T=_,Q-=re=-re),N&&(se+=(Y.height-(ce=re/N))/2));break;case w:0<=xe.y&&(Lt<=Ve||N&&(Q<=et||vt<=je))?St=!1:(v(w),(ce+=xe.y)<0&&(T=A,se-=ce=-ce),N&&(Q+=(Y.width-(re=ce*N))/2));break;case j:if(N){if(xe.y<=0&&(se<=wt||vt<=je)){St=!1;break}v(A),se+=xe.y,re=(ce-=xe.y)*N}else v(A),v(_),!(0<=xe.x)||je<vt?re+=xe.x:xe.y<=0&&se<=wt&&(St=!1),(!(xe.y<=0)||wt<se)&&(ce-=xe.y,se+=xe.y);re<0&&ce<0?(T=O,se-=ce=-ce,Q-=re=-re):re<0?(T=X,Q-=re=-re):ce<0&&(T=z,se-=ce=-ce);break;case X:if(N){if(xe.y<=0&&(se<=wt||Q<=et)){St=!1;break}v(A),se+=xe.y,Q+=Y.width-(re=(ce-=xe.y)*N)}else v(A),v(m),!(xe.x<=0)||et<Q?(re-=xe.x,Q+=xe.x):xe.y<=0&&se<=wt&&(St=!1),(!(xe.y<=0)||wt<se)&&(ce-=xe.y,se+=xe.y);re<0&&ce<0?(T=z,se-=ce=-ce,Q-=re=-re):re<0?(T=j,Q-=re=-re):ce<0&&(T=O,se-=ce=-ce);break;case O:if(N){if(xe.x<=0&&(Q<=et||Lt<=Ve)){St=!1;break}v(m),Q+=xe.x,ce=(re-=xe.x)/N}else v(w),v(m),!(xe.x<=0)||et<Q?(re-=xe.x,Q+=xe.x):0<=xe.y&&Lt<=Ve&&(St=!1),(!(0<=xe.y)||Ve<Lt)&&(ce+=xe.y);re<0&&ce<0?(T=j,se-=ce=-ce,Q-=re=-re):re<0?(T=z,Q-=re=-re):ce<0&&(T=X,se-=ce=-ce);break;case z:if(N){if(0<=xe.x&&(vt<=je||Lt<=Ve)){St=!1;break}v(_),ce=(re+=xe.x)/N}else v(w),v(_),!(0<=xe.x)||je<vt?re+=xe.x:0<=xe.y&&Lt<=Ve&&(St=!1),(!(0<=xe.y)||Ve<Lt)&&(ce+=xe.y);re<0&&ce<0?(T=X,se-=ce=-ce,Q-=re=-re):re<0?(T=O,Q-=re=-re):ce<0&&(T=j,se-=ce=-ce);break;case u:this.move(xe.x,xe.y),St=!1;break;case g:this.zoom((x=t({},y=E),S=0,$e(y,function(At,bt){delete x[bt],$e(x,function(Wt){var Gt=Math.abs(At.startX-Wt.startX),oi=Math.abs(At.startY-Wt.startY),si=Math.abs(At.endX-Wt.endX);Wt=Math.abs(At.endY-Wt.endY),Gt=Math.sqrt(Gt*Gt+oi*oi),oi=(Math.sqrt(si*si+Wt*Wt)-Gt)/Gt,Math.abs(oi)>Math.abs(S)&&(S=oi)})}),S),f),St=!1;break;case h:xe.x&&xe.y?(y=p(this.cropper),Q=Ot.startX-y.left,se=Ot.startY-y.top,re=Y.minWidth,ce=Y.minHeight,0<xe.x?T=0<xe.y?z:j:xe.x<0&&(Q-=re,T=0<xe.y?O:X),xe.y<0&&(se-=ce),this.cropped||(Ke(this.cropBox,B),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))):St=!1}St&&(Y.width=re,Y.height=ce,Y.left=Q,Y.top=se,this.action=T,this.renderCropBox()),$e(E,function(At){At.startX=At.endX,At.startY=At.endY})}},Kt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&rt(this.dragBox,Ue),Ke(this.cropBox,B),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Ye({},this.initialImageData),this.canvasData=Ye({},this.initialCanvasData),this.cropBoxData=Ye({},this.initialCropBoxData),this.renderCanvas(),this.cropped)&&this.renderCropBox(),this},clear:function(){return this.cropped&&!this.disabled&&(Ye(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ke(this.dragBox,Ue),rt(this.cropBox,B)),this},replace:function(f){var v=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&f&&(this.isImg&&(this.element.src=f),v?(this.url=f,this.image.src=f,this.ready&&(this.viewBoxImage.src=f,$e(this.previews,function(y){y.getElementsByTagName("img")[0].src=f}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(f))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ke(this.cropper,M)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,rt(this.cropper,M)),this},destroy:function(){var f=this.element;return f[c]&&(f[c]=void 0,this.isImg&&this.replaced&&(f.src=this.originalUrl),this.uncreate()),this},move:function(f){var v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,y=(x=this.canvasData).left,x=x.top;return this.moveTo(It(f)?f:y+Number(f),It(v)?v:x+Number(v))},moveTo:function(f){var v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,y=this.canvasData,x=!1;return f=Number(f),v=Number(v),this.ready&&!this.disabled&&this.options.movable&&(_e(f)&&(y.left=f,x=!0),_e(v)&&(y.top=v,x=!0),x)&&this.renderCanvas(!0),this},zoom:function(f,v){var y=this.canvasData;return f=Number(f),this.zoomTo(y.width*(f=f<0?1/(1-f):1+f)/y.naturalWidth,null,v)},zoomTo:function(f,v,y){var x,S,P,L=this.options,U=this.canvasData,Y=U.width,E=U.height,T=U.naturalWidth,N=U.naturalHeight;if(0<=(f=Number(f))&&this.ready&&!this.disabled&&L.zoomable){if(L=T*f,N*=f,!1===Re(this.element,be,{ratio:f,oldRatio:Y/T,originalEvent:y}))return this;y?(f=this.pointers,T=p(this.cropper),f=f&&Object.keys(f).length?(P=S=x=0,$e(f,function(re){x+=re.startX,S+=re=re.startY,P+=1}),{pageX:x/=P,pageY:S/=P}):{pageX:y.pageX,pageY:y.pageY},U.left-=(f.pageX-T.left-U.left)/Y*(L-Y),U.top-=(f.pageY-T.top-U.top)/E*(N-E)):Bt(v)&&_e(v.x)&&_e(v.y)?(U.left-=(v.x-U.left)/Y*(L-Y),U.top-=(v.y-U.top)/E*(N-E)):(U.left-=(L-Y)/2,U.top-=(N-E)/2),U.width=L,U.height=N,this.renderCanvas(!0)}return this},rotate:function(f){return this.rotateTo((this.imageData.rotate||0)+Number(f))},rotateTo:function(f){return _e(f=Number(f))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=f%360,this.renderCanvas(!0,!0)),this},scaleX:function(f){var v=this.imageData.scaleY;return this.scale(f,_e(v)?v:1)},scaleY:function(f){var v=this.imageData.scaleX;return this.scale(_e(v)?v:1,f)},scale:function(f){var v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,y=this.imageData,x=!1;return f=Number(f),v=Number(v),this.ready&&!this.disabled&&this.options.scalable&&(_e(f)&&(y.scaleX=f,x=!0),_e(v)&&(y.scaleY=v,x=!0),x)&&this.renderCanvas(!0,!0),this},getData:function(){var f,v,y=0<arguments.length&&void 0!==arguments[0]&&arguments[0],x=this.options,S=this.imageData,P=this.canvasData,L=this.cropBoxData;return this.ready&&this.cropped?(v=S.width/S.naturalWidth,$e(f={x:L.left-P.left,y:L.top-P.top,width:L.width,height:L.height},function(U,Y){f[Y]=U/v}),y&&(P=Math.round(f.y+f.height),L=Math.round(f.x+f.width),f.x=Math.round(f.x),f.y=Math.round(f.y),f.width=L-f.x,f.height=P-f.y)):f={x:0,y:0,width:0,height:0},x.rotatable&&(f.rotate=S.rotate||0),x.scalable&&(f.scaleX=S.scaleX||1,f.scaleY=S.scaleY||1),f},setData:function(f){var v,y=this.options,x=this.imageData,S=this.canvasData,P={};return this.ready&&!this.disabled&&Bt(f)&&(v=!1,y.rotatable&&_e(f.rotate)&&f.rotate!==x.rotate&&(x.rotate=f.rotate,v=!0),y.scalable&&(_e(f.scaleX)&&f.scaleX!==x.scaleX&&(x.scaleX=f.scaleX,v=!0),_e(f.scaleY))&&f.scaleY!==x.scaleY&&(x.scaleY=f.scaleY,v=!0),v&&this.renderCanvas(!0,!0),y=x.width/x.naturalWidth,_e(f.x)&&(P.left=f.x*y+S.left),_e(f.y)&&(P.top=f.y*y+S.top),_e(f.width)&&(P.width=f.width*y),_e(f.height)&&(P.height=f.height*y),this.setCropBoxData(P)),this},getContainerData:function(){return this.ready?Ye({},this.containerData):{}},getImageData:function(){return this.sized?Ye({},this.imageData):{}},getCanvasData:function(){var f=this.canvasData,v={};return this.ready&&$e(["left","top","width","height","naturalWidth","naturalHeight"],function(y){v[y]=f[y]}),v},setCanvasData:function(f){var v=this.canvasData,y=v.aspectRatio;return this.ready&&!this.disabled&&Bt(f)&&(_e(f.left)&&(v.left=f.left),_e(f.top)&&(v.top=f.top),_e(f.width)?(v.width=f.width,v.height=f.width/y):_e(f.height)&&(v.height=f.height,v.width=f.height*y),this.renderCanvas(!0)),this},getCropBoxData:function(){var f,v=this.cropBoxData;return(f=this.ready&&this.cropped?{left:v.left,top:v.top,width:v.width,height:v.height}:f)||{}},setCropBoxData:function(f){var v,y,x=this.cropBoxData,S=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&Bt(f)&&(_e(f.left)&&(x.left=f.left),_e(f.top)&&(x.top=f.top),_e(f.width)&&f.width!==x.width&&(v=!0,x.width=f.width),_e(f.height)&&f.height!==x.height&&(y=!0,x.height=f.height),S&&(v?x.height=x.width/S:y&&(x.width=x.height*S)),this.renderCropBox()),this},getCroppedCanvas:function(){var f,v,y,x,S,P,L,U,Y,E,T,N,Q,se,re,ce,je,Ve,et,wt,vt,Lt,St,Ot,xe,At,bt,Qt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.ready&&window.HTMLCanvasElement?(re=this.image,ce=(N=this.imageData).aspectRatio,v=N.naturalWidth,S=N.naturalHeight,E=void 0===(E=N.rotate)?0:E,T=void 0===(T=N.scaleX)?1:T,N=void 0===(N=N.scaleY)?1:N,y=(x=At=this.canvasData).aspectRatio,U=x.naturalWidth,x=x.naturalHeight,L=void 0===(L=(Ve=Qt).fillColor)?"transparent":L,Q=void 0===(Q=Ve.imageSmoothingEnabled)||Q,se=void 0===(se=Ve.imageSmoothingQuality)?"low":se,P=void 0===(P=Ve.maxWidth)?1/0:P,bt=void 0===(bt=Ve.maxHeight)?1/0:bt,f=void 0===(f=Ve.minWidth)?0:f,Ve=void 0===(Ve=Ve.minHeight)?0:Ve,je=(et=document.createElement("canvas")).getContext("2d"),Y=ye({aspectRatio:y,width:P,height:bt}),y=ye({aspectRatio:y,width:f,height:Ve},"cover"),U=Math.min(Y.width,Math.max(y.width,U)),Y=Math.min(Y.height,Math.max(y.height,x)),y=ye({aspectRatio:ce,width:P,height:bt}),x=ye({aspectRatio:ce,width:f,height:Ve},"cover"),ce=[-(P=Math.min(y.width,Math.max(x.width,v)))/2,-(bt=Math.min(y.height,Math.max(x.height,S)))/2,P,bt],et.width=qe(U),et.height=qe(Y),je.fillStyle=L,je.fillRect(0,0,U,Y),je.save(),je.translate(U/2,Y/2),je.rotate(E*Math.PI/180),je.scale(T,N),je.imageSmoothingEnabled=Q,je.imageSmoothingQuality=se,je.drawImage.apply(je,[re].concat(n(ce.map(function(si){return Math.floor(qe(si))})))),je.restore(),f=et,this.cropped?(v=(Ve=this.getData(Qt.rounded)).x,y=Ve.y,x=Ve.width,S=Ve.height,1!=(P=f.width/Math.floor(At.naturalWidth))&&(v*=P,y*=P,x*=P,S*=P),L=ye({aspectRatio:bt=x/S,width:Qt.maxWidth||1/0,height:Qt.maxHeight||1/0}),U=ye({aspectRatio:bt,width:Qt.minWidth||0,height:Qt.minHeight||0},"cover"),E=(Y=ye({aspectRatio:bt,width:Qt.width||(1!=P?f.width:x),height:Qt.height||(1!=P?f.height:S)})).width,T=Y.height,E=Math.min(L.width,Math.max(U.width,E)),T=Math.min(L.height,Math.max(U.height,T)),Q=(N=document.createElement("canvas")).getContext("2d"),N.width=qe(E),N.height=qe(T),Q.fillStyle=Qt.fillColor||"transparent",Q.fillRect(0,0,E,T),re=Qt.imageSmoothingQuality,Q.imageSmoothingEnabled=void 0===(se=Qt.imageSmoothingEnabled)||se,re&&(Q.imageSmoothingQuality=re),ce=f.width,je=f.height,et=y,(Ve=v)<=-x||ce<Ve?Ot=Lt=wt=Ve=0:Ve<=0?(Lt=-Ve,Ve=0,Ot=wt=Math.min(ce,x+Ve)):Ve<=ce&&(Lt=0,Ot=wt=Math.min(x,ce-Ve)),wt<=0||et<=-S||je<et?xe=St=vt=et=0:et<=0?(St=-et,et=0,xe=vt=Math.min(je,S+et)):et<=je&&(St=0,xe=vt=Math.min(S,je-et)),At=[Ve,et,wt,vt],0<Ot&&0<xe&&At.push(Lt*(bt=E/x),St*bt,Ot*bt,xe*bt),Q.drawImage.apply(Q,[f].concat(n(At.map(function(si){return Math.floor(qe(si))})))),N):f):null},setAspectRatio:function(f){var v=this.options;return this.disabled||It(f)||(v.aspectRatio=Math.max(0,f)||NaN,this.ready&&(this.initCropBox(),this.cropped)&&this.renderCropBox()),this},setDragMode:function(f){var v,y,x=this.options,S=this.dragBox,P=this.face;return this.ready&&!this.disabled&&(y=x.movable&&f===J,x.dragMode=f=(v=f===q)||y?f:"none",R(S,Ie,f),Pt(S,D,v),Pt(S,ge,y),x.cropBoxMovable||(R(P,Ie,f),Pt(P,D,v),Pt(P,ge,y))),this}},lt=d.Cropper,ut=function(){function f(S){var P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");if(!S||!Te.test(S.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=S,this.options=Ye({},ke,Bt(P)&&P),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var v,y,x;return v=f,x=[{key:"noConflict",value:function(){return window.Cropper=lt,f}},{key:"setDefaults",value:function(S){Ye(ke,Bt(S)&&S)}}],(y=[{key:"init",value:function(){var S,P=this.element,L=P.tagName.toLowerCase();if(!P[c]){if(P[c]=this,"img"===L){if(this.isImg=!0,S=P.getAttribute("src")||"",!(this.originalUrl=S))return;S=P.src}else"canvas"===L&&window.HTMLCanvasElement&&(S=P.toDataURL());this.load(S)}}},{key:"load",value:function(S){var P,L,U,Y,E,T,N=this;S&&(this.url=S,this.imageData={},P=this.element,(L=this.options).rotatable||L.scalable||(L.checkOrientation=!1),L.checkOrientation&&window.ArrayBuffer?ve.test(S)?we.test(S)?this.read((T=(T=S).replace(ot,""),U=atob(T),T=new ArrayBuffer(U.length),$e(Y=new Uint8Array(T),function(Q,se){Y[se]=U.charCodeAt(se)}),T)):this.clone():(E=new XMLHttpRequest,T=this.clone.bind(this),this.reloading=!0,(this.xhr=E).onabort=T,E.onerror=T,E.ontimeout=T,E.onprogress=function(){E.getResponseHeader("content-type")!==Z&&E.abort()},E.onload=function(){N.read(E.response)},E.onloadend=function(){N.reloading=!1,N.xhr=null},L.checkCrossOrigin&&F(S)&&P.crossOrigin&&(S=V(S)),E.open("GET",S,!0),E.responseType="arraybuffer",E.withCredentials="use-credentials"===P.crossOrigin,E.send()):this.clone())}},{key:"read",value:function(S){var P=this.options,L=this.imageData,U=function Xt(f){var v,y,x,S,P,L,U,Y=new DataView(f);try{if(255===Y.getUint8(0)&&216===Y.getUint8(1))for(var E=Y.byteLength,T=2;T+1<E;){if(255===Y.getUint8(T)&&225===Y.getUint8(T+1)){y=T;break}T+=1}if(x=y&&(S=y+10,"Exif"===function(re,ce,je){var Ve="";je+=ce;for(var et=ce;et<je;et+=1)Ve+=De(re.getUint8(et));return Ve}(Y,y+4,4))&&((U=18761===(P=Y.getUint16(S)))||19789===P)&&42===Y.getUint16(S+2,U)&&8<=(L=Y.getUint32(S+4,U))?S+L:x)for(var N,Q=Y.getUint16(x,U),se=0;se<Q;se+=1)if(274===Y.getUint16(N=x+12*se+2,U)){v=Y.getUint16(N+=8,U),Y.setUint16(N,1,U);break}}catch{v=1}return v}(S),Y=0,E=1,T=1;1<U&&(this.url=function(N,Q){for(var se=[],re=new Uint8Array(N);0<re.length;)se.push(De.apply(null,Vt(re.subarray(0,8192)))),re=re.subarray(8192);return"data:".concat(Q,";base64,").concat(btoa(se.join("")))}(S,Z),Y=(S=function(N){var Q=0,se=1,re=1;switch(N){case 2:se=-1;break;case 3:Q=-180;break;case 4:re=-1;break;case 5:Q=90,re=-1;break;case 6:Q=90;break;case 7:Q=90,se=-1;break;case 8:Q=-90}return{rotate:Q,scaleX:se,scaleY:re}}(U)).rotate,E=S.scaleX,T=S.scaleY),P.rotatable&&(L.rotate=Y),P.scalable&&(L.scaleX=E,L.scaleY=T),this.clone()}},{key:"clone",value:function(){var S=this.element,P=this.url,L=S.crossOrigin,U=P,Y=(this.options.checkCrossOrigin&&F(P)&&(L=L||"anonymous",U=V(P)),this.crossOrigin=L,this.crossOriginUrl=U,document.createElement("img"));L&&(Y.crossOrigin=L),Y.src=U||P,Y.alt=S.alt||"The image to crop",(this.image=Y).onload=this.start.bind(this),Y.onerror=this.stop.bind(this),rt(Y,W),S.parentNode.insertBefore(Y,S.nextSibling)}},{key:"start",value:function(){function S(T,N){Ye(U.imageData,{naturalWidth:T,naturalHeight:N,aspectRatio:T/N}),U.initialImageData=Ye({},U.imageData),U.sizing=!1,U.sized=!0,U.build()}var P,L,U=this,Y=this.image,E=(Y.onload=null,Y.onerror=null,this.sizing=!0,d.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(d.navigator.userAgent));Y.naturalWidth&&!E?S(Y.naturalWidth,Y.naturalHeight):(P=document.createElement("img"),L=document.body||document.documentElement,(this.sizingImage=P).onload=function(){S(P.width,P.height),E||L.removeChild(P)},P.src=Y.src,E||(P.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",L.appendChild(P)))}},{key:"stop",value:function(){var S=this.image;S.onload=null,S.onerror=null,S.parentNode.removeChild(S),this.image=null}},{key:"build",value:function(){var S,P,L,U,Y,E,T,N,Q;this.sized&&!this.ready&&(P=this.options,L=this.image,U=(S=this.element).parentNode,(Y=document.createElement("div")).innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',E=(Y=Y.querySelector(".".concat(c,"-container"))).querySelector(".".concat(c,"-canvas")),T=Y.querySelector(".".concat(c,"-drag-box")),Q=(N=Y.querySelector(".".concat(c,"-crop-box"))).querySelector(".".concat(c,"-face")),this.container=U,this.cropper=Y,this.canvas=E,this.dragBox=T,this.cropBox=N,this.viewBox=Y.querySelector(".".concat(c,"-view-box")),this.face=Q,E.appendChild(L),rt(S,B),U.insertBefore(Y,S.nextSibling),Ke(L,W),this.initPreview(),this.bind(),P.initialAspectRatio=Math.max(0,P.initialAspectRatio)||NaN,P.aspectRatio=Math.max(0,P.aspectRatio)||NaN,P.viewMode=Math.max(0,Math.min(3,Math.round(P.viewMode)))||0,rt(N,B),P.guides||rt(N.getElementsByClassName("".concat(c,"-dashed")),B),P.center||rt(N.getElementsByClassName("".concat(c,"-center")),B),P.background&&rt(Y,"".concat(c,"-bg")),P.highlight||rt(Q,Se),P.cropBoxMovable&&(rt(Q,ge),R(Q,Ie,o)),P.cropBoxResizable||(rt(N.getElementsByClassName("".concat(c,"-line")),B),rt(N.getElementsByClassName("".concat(c,"-point")),B)),this.render(),this.ready=!0,this.setDragMode(P.dragMode),P.autoCrop&&this.crop(),this.setData(P.data),yt(P.ready)&&fe(S,"ready",P.ready,{once:!0}),Re(S,"ready"))}},{key:"unbuild",value:function(){var S;this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),(S=this.cropper.parentNode)&&S.removeChild(this.cropper),Ke(this.element,B))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&r(v.prototype,y),x&&r(v,x),Object.defineProperty(v,"prototype",{writable:!1}),f}();return Ye(ut.prototype,He,at,ct,gt,Ut,Kt),ut}),function(e,t){"object"==typeof exports&&typeof module<"u"?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).bootstrap=t()}(this,function(){const e=new Map,t={set(k,a,b){e.has(k)||e.set(k,new Map);const I=e.get(k);I.has(a)||0===I.size?I.set(a,b):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(I.keys())[0]}.`)},get:(k,a)=>e.has(k)&&e.get(k).get(a)||null,remove(k,a){if(!e.has(k))return;const b=e.get(k);b.delete(a),0===b.size&&e.delete(k)}},i="transitionend",r=k=>(k&&window.CSS&&window.CSS.escape&&(k=k.replace(/#([^\s"#']+)/g,(a,b)=>`#${CSS.escape(b)}`)),k),n=k=>{k.dispatchEvent(new Event(i))},l=k=>!(!k||"object"!=typeof k)&&(void 0!==k.jquery&&(k=k[0]),void 0!==k.nodeType),s=k=>l(k)?k.jquery?k[0]:k:"string"==typeof k&&k.length>0?document.querySelector(r(k)):null,d=k=>{if(!l(k)||0===k.getClientRects().length)return!1;const a="visible"===getComputedStyle(k).getPropertyValue("visibility"),b=k.closest("details:not([open])");if(!b)return a;if(b!==k){const I=k.closest("summary");if(I&&I.parentNode!==b||null===I)return!1}return a},c=k=>!k||k.nodeType!==Node.ELEMENT_NODE||!!k.classList.contains("disabled")||(void 0!==k.disabled?k.disabled:k.hasAttribute("disabled")&&"false"!==k.getAttribute("disabled")),o=k=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof k.getRootNode){const a=k.getRootNode();return a instanceof ShadowRoot?a:null}return k instanceof ShadowRoot?k:k.parentNode?o(k.parentNode):null},h=()=>{},g=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_=[],m=()=>"rtl"===document.documentElement.dir,w=k=>{var a;a=()=>{const b=g();if(b){const I=k.NAME,K=b.fn[I];b.fn[I]=k.jQueryInterface,b.fn[I].Constructor=k,b.fn[I].noConflict=()=>(b.fn[I]=K,k.jQueryInterface)}},"loading"===document.readyState?(_.length||document.addEventListener("DOMContentLoaded",()=>{for(const b of _)b()}),_.push(a)):a()},A=(k,a=[],b=k)=>"function"==typeof k?k(...a):b,j=(k,a,b=!0)=>{if(!b)return void A(k);const I=(le=>{if(!le)return 0;let{transitionDuration:pe,transitionDelay:Ce}=window.getComputedStyle(le);const Me=Number.parseFloat(pe),ze=Number.parseFloat(Ce);return Me||ze?(pe=pe.split(",")[0],Ce=Ce.split(",")[0],1e3*(Number.parseFloat(pe)+Number.parseFloat(Ce))):0})(a)+5;let K=!1;const ee=({target:le})=>{le===a&&(K=!0,a.removeEventListener(i,ee),A(k))};a.addEventListener(i,ee),setTimeout(()=>{K||n(a)},I)},X=(k,a,b,I)=>{const K=k.length;let ee=k.indexOf(a);return-1===ee?!b&&I?k[K-1]:k[0]:(ee+=b?1:-1,I&&(ee=(ee+K)%K),k[Math.max(0,Math.min(ee,K-1))])},z=/[^.]*(?=\..*)\.|.*/,O=/\..*/,D=/::\d+$/,M={};let B=1;const W={mouseenter:"mouseover",mouseleave:"mouseout"},Se=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ue(k,a){return a&&`${a}::${B++}`||k.uidEvent||B++}function ge(k){const a=Ue(k);return k.uidEvent=a,M[a]=M[a]||{},M[a]}function Ie(k,a,b=null){return Object.values(k).find(I=>I.callable===a&&I.delegationSelector===b)}function Ae(k,a,b){const I="string"==typeof a,K=I?b:a||b;let ee=me(k);return Se.has(ee)||(ee=k),[I,K,ee]}function q(k,a,b,I,K){if("string"!=typeof a||!k)return;let[ee,le,pe]=Ae(a,b,I);var tt;a in W&&(tt=le,le=function(Je){if(!Je.relatedTarget||Je.relatedTarget!==Je.delegateTarget&&!Je.delegateTarget.contains(Je.relatedTarget))return tt.call(this,Je)});const Ce=ge(k),Me=Ce[pe]||(Ce[pe]={}),ze=Ie(Me,le,ee?b:null);if(ze)return void(ze.oneOff=ze.oneOff&&K);const Le=Ue(le,a.replace(z,"")),nt=ee?function(Ge,tt,Je){return function it(kt){const Rt=Ge.querySelectorAll(tt);for(let{target:ht}=kt;ht&&ht!==this;ht=ht.parentNode)for(const _t of Rt)if(_t===ht)return Be(kt,{delegateTarget:ht}),it.oneOff&&G.off(Ge,kt.type,tt,Je),Je.apply(ht,[kt])}}(k,b,le):function(Ge,tt){return function Je(it){return Be(it,{delegateTarget:Ge}),Je.oneOff&&G.off(Ge,it.type,tt),tt.apply(Ge,[it])}}(k,le);nt.delegationSelector=ee?b:null,nt.callable=le,nt.oneOff=K,nt.uidEvent=Le,Me[Le]=nt,k.addEventListener(pe,nt,ee)}function J(k,a,b,I,K){const ee=Ie(a[b],I,K);ee&&(k.removeEventListener(b,ee,!!K),delete a[b][ee.uidEvent])}function ae(k,a,b,I){const K=a[b]||{};for(const[ee,le]of Object.entries(K))ee.includes(I)&&J(k,a,b,le.callable,le.delegationSelector)}function me(k){return k=k.replace(O,""),W[k]||k}const G={on(k,a,b,I){q(k,a,b,I,!1)},one(k,a,b,I){q(k,a,b,I,!0)},off(k,a,b,I){if("string"!=typeof a||!k)return;const[K,ee,le]=Ae(a,b,I),pe=le!==a,Ce=ge(k),Me=Ce[le]||{},ze=a.startsWith(".");if(void 0===ee){if(ze)for(const Le of Object.keys(Ce))ae(k,Ce,Le,a.slice(1));for(const[Le,nt]of Object.entries(Me)){const Ge=Le.replace(D,"");pe&&!a.includes(Ge)||J(k,Ce,le,nt.callable,nt.delegationSelector)}}else{if(!Object.keys(Me).length)return;J(k,Ce,le,ee,K?b:null)}},trigger(k,a,b){if("string"!=typeof a||!k)return null;const I=g();let K=null,ee=!0,le=!0,pe=!1;a!==me(a)&&I&&(K=I.Event(a,b),I(k).trigger(K),ee=!K.isPropagationStopped(),le=!K.isImmediatePropagationStopped(),pe=K.isDefaultPrevented());const Ce=Be(new Event(a,{bubbles:ee,cancelable:!0}),b);return pe&&Ce.preventDefault(),le&&k.dispatchEvent(Ce),Ce.defaultPrevented&&K&&K.preventDefault(),Ce}};function Be(k,a={}){for(const[b,I]of Object.entries(a))try{k[b]=I}catch{Object.defineProperty(k,b,{configurable:!0,get:()=>I})}return k}function We(k){if("true"===k)return!0;if("false"===k)return!1;if(k===Number(k).toString())return Number(k);if(""===k||"null"===k)return null;if("string"!=typeof k)return k;try{return JSON.parse(decodeURIComponent(k))}catch{return k}}function Xe(k){return k.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)}const Fe={setDataAttribute(k,a,b){k.setAttribute(`data-bs-${Xe(a)}`,b)},removeDataAttribute(k,a){k.removeAttribute(`data-bs-${Xe(a)}`)},getDataAttributes(k){if(!k)return{};const a={},b=Object.keys(k.dataset).filter(I=>I.startsWith("bs")&&!I.startsWith("bsConfig"));for(const I of b){let K=I.replace(/^bs/,"");K=K.charAt(0).toLowerCase()+K.slice(1,K.length),a[K]=We(k.dataset[I])}return a},getDataAttribute:(k,a)=>We(k.getAttribute(`data-bs-${Xe(a)}`))};class Ze{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(a){return a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a}_mergeConfigObj(a,b){const I=l(b)?Fe.getDataAttribute(b,"config"):{};return{...this.constructor.Default,..."object"==typeof I?I:{},...l(b)?Fe.getDataAttributes(b):{},..."object"==typeof a?a:{}}}_typeCheckConfig(a,b=this.constructor.DefaultType){for(const[K,ee]of Object.entries(b)){const le=a[K],pe=l(le)?"element":null==(I=le)?`${I}`:Object.prototype.toString.call(I).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(pe))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${K}" provided type "${pe}" but expected type "${ee}".`)}var I}}class Ne extends Ze{constructor(a,b){super(),(a=s(a))&&(this._element=a,this._config=this._getConfig(b),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),G.off(this._element,this.constructor.EVENT_KEY);for(const a of Object.getOwnPropertyNames(this))this[a]=null}_queueCallback(a,b,I=!0){j(a,b,I)}_getConfig(a){return a=this._mergeConfigObj(a,this._element),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}static getInstance(a){return t.get(s(a),this.DATA_KEY)}static getOrCreateInstance(a,b={}){return this.getInstance(a)||new this(a,"object"==typeof b?b:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(a){return`${a}${this.EVENT_KEY}`}}const be=k=>{let a=k.getAttribute("data-bs-target");if(!a||"#"===a){let b=k.getAttribute("href");if(!b||!b.includes("#")&&!b.startsWith("."))return null;b.includes("#")&&!b.startsWith("#")&&(b=`#${b.split("#")[1]}`),a=b&&"#"!==b?b.trim():null}return a?a.split(",").map(b=>r(b)).join(","):null},Z={find:(k,a=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(a,k)),findOne:(k,a=document.documentElement)=>Element.prototype.querySelector.call(a,k),children:(k,a)=>[].concat(...k.children).filter(b=>b.matches(a)),parents(k,a){const b=[];let I=k.parentNode.closest(a);for(;I;)b.push(I),I=I.parentNode.closest(a);return b},prev(k,a){let b=k.previousElementSibling;for(;b;){if(b.matches(a))return[b];b=b.previousElementSibling}return[]},next(k,a){let b=k.nextElementSibling;for(;b;){if(b.matches(a))return[b];b=b.nextElementSibling}return[]},focusableChildren(k){const a=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(b=>`${b}:not([tabindex^="-"])`).join(",");return this.find(a,k).filter(b=>!c(b)&&d(b))},getSelectorFromElement(k){const a=be(k);return a&&Z.findOne(a)?a:null},getElementFromSelector(k){const a=be(k);return a?Z.findOne(a):null},getMultipleElementsFromSelector(k){const a=be(k);return a?Z.find(a):[]}},he=(k,a="hide")=>{const I=k.NAME;G.on(document,`click.dismiss${k.EVENT_KEY}`,`[data-bs-dismiss="${I}"]`,function(K){if(["A","AREA"].includes(this.tagName)&&K.preventDefault(),c(this))return;const ee=Z.getElementFromSelector(this)||this.closest(`.${I}`);k.getOrCreateInstance(ee)[a]()})},ve=".bs.alert",we=`close${ve}`,Te=`closed${ve}`;class ke extends Ne{static get NAME(){return"alert"}close(){if(G.trigger(this._element,we).defaultPrevented)return;this._element.classList.remove("show");const a=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,a)}_destroyElement(){this._element.remove(),G.trigger(this._element,Te),this.dispose()}static jQueryInterface(a){return this.each(function(){const b=ke.getOrCreateInstance(this);if("string"==typeof a){if(void 0===b[a]||a.startsWith("_")||"constructor"===a)throw new TypeError(`No method named "${a}"`);b[a](this)}})}}he(ke,"close"),w(ke);const Qe='[data-bs-toggle="button"]';class _e extends Ne{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(a){return this.each(function(){const b=_e.getOrCreateInstance(this);"toggle"===a&&b[a]()})}}G.on(document,"click.bs.button.data-api",Qe,k=>{k.preventDefault();const a=k.target.closest(Qe);_e.getOrCreateInstance(a).toggle()}),w(_e);const Ee=".bs.swipe",It=`touchstart${Ee}`,mt=`touchmove${Ee}`,Ht=`touchend${Ee}`,Bt=`pointerdown${Ee}`,yt=`pointerup${Ee}`,jt={endCallback:null,leftCallback:null,rightCallback:null},Vt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class $e extends Ze{constructor(a,b){super(),this._element=a,a&&$e.isSupported()&&(this._config=this._getConfig(b),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return jt}static get DefaultType(){return Vt}static get NAME(){return"swipe"}dispose(){G.off(this._element,Ee)}_start(a){this._supportPointerEvents?this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX):this._deltaX=a.touches[0].clientX}_end(a){this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX-this._deltaX),this._handleSwipe(),A(this._config.endCallback)}_move(a){this._deltaX=a.touches&&a.touches.length>1?0:a.touches[0].clientX-this._deltaX}_handleSwipe(){const a=Math.abs(this._deltaX);if(a<=40)return;const b=a/this._deltaX;this._deltaX=0,b&&A(b>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(G.on(this._element,Bt,a=>this._start(a)),G.on(this._element,yt,a=>this._end(a)),this._element.classList.add("pointer-event")):(G.on(this._element,It,a=>this._start(a)),G.on(this._element,mt,a=>this._move(a)),G.on(this._element,Ht,a=>this._end(a)))}_eventIsPointerPenTouch(a){return this._supportPointerEvents&&("pen"===a.pointerType||"touch"===a.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ye=".bs.carousel",Nt=".data-api",qe="next",dt="prev",Pe="left",rt="right",Ke=`slide${Ye}`,Pt=`slid${Ye}`,pt=`keydown${Ye}`,Mt=`mouseenter${Ye}`,Dt=`mouseleave${Ye}`,R=`dragstart${Ye}`,ue=`load${Ye}${Nt}`,de=`click${Ye}${Nt}`,H="carousel",ie="active",C=".active",fe=".carousel-item",Re=C+fe,p={ArrowLeft:rt,ArrowRight:Pe},ne={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},oe={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class F extends Ne{constructor(a,b){super(a,b),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Z.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===H&&this.cycle()}static get Default(){return ne}static get DefaultType(){return oe}static get NAME(){return"carousel"}next(){this._slide(qe)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(dt)}pause(){this._isSliding&&n(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?G.one(this._element,Pt,()=>this.cycle()):this.cycle())}to(a){const b=this._getItems();if(a>b.length-1||a<0)return;if(this._isSliding)return void G.one(this._element,Pt,()=>this.to(a));const I=this._getItemIndex(this._getActive());I!==a&&this._slide(a>I?qe:dt,b[a])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(a){return a.defaultInterval=a.interval,a}_addEventListeners(){this._config.keyboard&&G.on(this._element,pt,a=>this._keydown(a)),"hover"===this._config.pause&&(G.on(this._element,Mt,()=>this.pause()),G.on(this._element,Dt,()=>this._maybeEnableCycle())),this._config.touch&&$e.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const b of Z.find(".carousel-item img",this._element))G.on(b,R,I=>I.preventDefault());this._swipeHelper=new $e(this._element,{leftCallback:()=>this._slide(this._directionToOrder(Pe)),rightCallback:()=>this._slide(this._directionToOrder(rt)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(a){if(/input|textarea/i.test(a.target.tagName))return;const b=p[a.key];b&&(a.preventDefault(),this._slide(this._directionToOrder(b)))}_getItemIndex(a){return this._getItems().indexOf(a)}_setActiveIndicatorElement(a){if(!this._indicatorsElement)return;const b=Z.findOne(C,this._indicatorsElement);b.classList.remove(ie),b.removeAttribute("aria-current");const I=Z.findOne(`[data-bs-slide-to="${a}"]`,this._indicatorsElement);I&&(I.classList.add(ie),I.setAttribute("aria-current","true"))}_updateInterval(){const a=this._activeElement||this._getActive();if(!a)return;const b=Number.parseInt(a.getAttribute("data-bs-interval"),10);this._config.interval=b||this._config.defaultInterval}_slide(a,b=null){if(this._isSliding)return;const I=this._getActive(),K=a===qe,ee=b||X(this._getItems(),I,K,this._config.wrap);if(ee===I)return;const le=this._getItemIndex(ee),pe=Le=>G.trigger(this._element,Le,{relatedTarget:ee,direction:this._orderToDirection(a),from:this._getItemIndex(I),to:le});if(pe(Ke).defaultPrevented||!I||!ee)return;const Ce=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(le),this._activeElement=ee;const Me=K?"carousel-item-start":"carousel-item-end",ze=K?"carousel-item-next":"carousel-item-prev";ee.classList.add(ze),I.classList.add(Me),ee.classList.add(Me),this._queueCallback(()=>{ee.classList.remove(Me,ze),ee.classList.add(ie),I.classList.remove(ie,ze,Me),this._isSliding=!1,pe(Pt)},I,this._isAnimated()),Ce&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Z.findOne(Re,this._element)}_getItems(){return Z.find(fe,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(a){return m()?a===Pe?dt:qe:a===Pe?qe:dt}_orderToDirection(a){return m()?a===dt?Pe:rt:a===dt?rt:Pe}static jQueryInterface(a){return this.each(function(){const b=F.getOrCreateInstance(this,a);if("number"!=typeof a){if("string"==typeof a){if(void 0===b[a]||a.startsWith("_")||"constructor"===a)throw new TypeError(`No method named "${a}"`);b[a]()}}else b.to(a)})}}G.on(document,de,"[data-bs-slide], [data-bs-slide-to]",function(k){const a=Z.getElementFromSelector(this);if(!a||!a.classList.contains(H))return;k.preventDefault();const b=F.getOrCreateInstance(a),I=this.getAttribute("data-bs-slide-to");return I?(b.to(I),void b._maybeEnableCycle()):"next"===Fe.getDataAttribute(this,"slide")?(b.next(),void b._maybeEnableCycle()):(b.prev(),void b._maybeEnableCycle())}),G.on(window,ue,()=>{const k=Z.find('[data-bs-ride="carousel"]');for(const a of k)F.getOrCreateInstance(a)}),w(F);const V=".bs.collapse",te=`show${V}`,Oe=`shown${V}`,ye=`hide${V}`,De=`hidden${V}`,ot=`click${V}.data-api`,Xt="show",He="collapse",at="collapsing",ct=`:scope .${He} .${He}`,gt='[data-bs-toggle="collapse"]',Ut={parent:null,toggle:!0},Kt={parent:"(null|element)",toggle:"boolean"};class lt extends Ne{constructor(a,b){super(a,b),this._isTransitioning=!1,this._triggerArray=[];const I=Z.find(gt);for(const K of I){const ee=Z.getSelectorFromElement(K),le=Z.find(ee).filter(pe=>pe===this._element);null!==ee&&le.length&&this._triggerArray.push(K)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ut}static get DefaultType(){return Kt}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let a=[];if(this._config.parent&&(a=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(K=>K!==this._element).map(K=>lt.getOrCreateInstance(K,{toggle:!1}))),a.length&&a[0]._isTransitioning||G.trigger(this._element,te).defaultPrevented)return;for(const K of a)K.hide();const b=this._getDimension();this._element.classList.remove(He),this._element.classList.add(at),this._element.style[b]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const I=`scroll${b[0].toUpperCase()+b.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(at),this._element.classList.add(He,Xt),this._element.style[b]="",G.trigger(this._element,Oe)},this._element,!0),this._element.style[b]=`${this._element[I]}px`}hide(){if(this._isTransitioning||!this._isShown()||G.trigger(this._element,ye).defaultPrevented)return;const a=this._getDimension();this._element.style[a]=`${this._element.getBoundingClientRect()[a]}px`,this._element.classList.add(at),this._element.classList.remove(He,Xt);for(const b of this._triggerArray){const I=Z.getElementFromSelector(b);I&&!this._isShown(I)&&this._addAriaAndCollapsedClass([b],!1)}this._isTransitioning=!0,this._element.style[a]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(at),this._element.classList.add(He),G.trigger(this._element,De)},this._element,!0)}_isShown(a=this._element){return a.classList.contains(Xt)}_configAfterMerge(a){return a.toggle=!!a.toggle,a.parent=s(a.parent),a}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const a=this._getFirstLevelChildren(gt);for(const b of a){const I=Z.getElementFromSelector(b);I&&this._addAriaAndCollapsedClass([b],this._isShown(I))}}_getFirstLevelChildren(a){const b=Z.find(ct,this._config.parent);return Z.find(a,this._config.parent).filter(I=>!b.includes(I))}_addAriaAndCollapsedClass(a,b){if(a.length)for(const I of a)I.classList.toggle("collapsed",!b),I.setAttribute("aria-expanded",b)}static jQueryInterface(a){const b={};return"string"==typeof a&&/show|hide/.test(a)&&(b.toggle=!1),this.each(function(){const I=lt.getOrCreateInstance(this,b);if("string"==typeof a){if(void 0===I[a])throw new TypeError(`No method named "${a}"`);I[a]()}})}}G.on(document,ot,gt,function(k){("A"===k.target.tagName||k.delegateTarget&&"A"===k.delegateTarget.tagName)&&k.preventDefault();for(const a of Z.getMultipleElementsFromSelector(this))lt.getOrCreateInstance(a,{toggle:!1}).toggle()}),w(lt);var ut="top",f="bottom",v="right",y="left",x="auto",S=[ut,f,v,y],P="start",L="end",U="clippingParents",Y="viewport",E="popper",T="reference",N=S.reduce(function(k,a){return k.concat([a+"-"+P,a+"-"+L])},[]),Q=[].concat(S,[x]).reduce(function(k,a){return k.concat([a,a+"-"+P,a+"-"+L])},[]),se="beforeRead",ce="afterRead",je="beforeMain",et="afterMain",wt="beforeWrite",Lt="afterWrite",St=[se,"read",ce,je,"main",et,wt,"write",Lt];function Ot(k){return k?(k.nodeName||"").toLowerCase():null}function xe(k){if(null==k)return window;if("[object Window]"!==k.toString()){var a=k.ownerDocument;return a&&a.defaultView||window}return k}function At(k){return k instanceof xe(k).Element||k instanceof Element}function bt(k){return k instanceof xe(k).HTMLElement||k instanceof HTMLElement}function Qt(k){return typeof ShadowRoot<"u"&&(k instanceof xe(k).ShadowRoot||k instanceof ShadowRoot)}const si={name:"applyStyles",enabled:!0,phase:"write",fn:function(k){var a=k.state;Object.keys(a.elements).forEach(function(b){var I=a.styles[b]||{},K=a.attributes[b]||{},ee=a.elements[b];bt(ee)&&Ot(ee)&&(Object.assign(ee.style,I),Object.keys(K).forEach(function(le){var pe=K[le];!1===pe?ee.removeAttribute(le):ee.setAttribute(le,!0===pe?"":pe)}))})},effect:function(k){var a=k.state,b={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,b.popper),a.styles=b,a.elements.arrow&&Object.assign(a.elements.arrow.style,b.arrow),function(){Object.keys(a.elements).forEach(function(I){var K=a.elements[I],ee=a.attributes[I]||{},le=Object.keys(a.styles.hasOwnProperty(I)?a.styles[I]:b[I]).reduce(function(pe,Ce){return pe[Ce]="",pe},{});bt(K)&&Ot(K)&&(Object.assign(K.style,le),Object.keys(ee).forEach(function(pe){K.removeAttribute(pe)}))})}},requires:["computeStyles"]};function Wt(k){return k.split("-")[0]}var Gt=Math.max,oi=Math.min,Ci=Math.round;function Ki(){var k=navigator.userAgentData;return null!=k&&k.brands&&Array.isArray(k.brands)?k.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function wr(){return!/^((?!chrome|android).)*safari/i.test(Ki())}function ki(k,a,b){void 0===a&&(a=!1),void 0===b&&(b=!1);var I=k.getBoundingClientRect(),K=1,ee=1;a&&bt(k)&&(K=k.offsetWidth>0&&Ci(I.width)/k.offsetWidth||1,ee=k.offsetHeight>0&&Ci(I.height)/k.offsetHeight||1);var le=(At(k)?xe(k):window).visualViewport,pe=!wr()&&b,Ce=(I.left+(pe&&le?le.offsetLeft:0))/K,Me=(I.top+(pe&&le?le.offsetTop:0))/ee,ze=I.width/K,Le=I.height/ee;return{width:ze,height:Le,top:Me,right:Ce+ze,bottom:Me+Le,left:Ce,x:Ce,y:Me}}function Gi(k){var a=ki(k),b=k.offsetWidth,I=k.offsetHeight;return Math.abs(a.width-b)<=1&&(b=a.width),Math.abs(a.height-I)<=1&&(I=a.height),{x:k.offsetLeft,y:k.offsetTop,width:b,height:I}}function xr(k,a){var b=a.getRootNode&&a.getRootNode();if(k.contains(a))return!0;if(b&&Qt(b)){var I=a;do{if(I&&k.isSameNode(I))return!0;I=I.parentNode||I.host}while(I)}return!1}function hi(k){return xe(k).getComputedStyle(k)}function Fn(k){return["table","td","th"].indexOf(Ot(k))>=0}function ci(k){return((At(k)?k.ownerDocument:k.document)||window.document).documentElement}function Fi(k){return"html"===Ot(k)?k:k.assignedSlot||k.parentNode||(Qt(k)?k.host:null)||ci(k)}function Cr(k){return bt(k)&&"fixed"!==hi(k).position?k.offsetParent:null}function Ii(k){for(var a=xe(k),b=Cr(k);b&&Fn(b)&&"static"===hi(b).position;)b=Cr(b);return b&&("html"===Ot(b)||"body"===Ot(b)&&"static"===hi(b).position)?a:b||function(I){var K=/firefox/i.test(Ki());if(/Trident/i.test(Ki())&&bt(I)&&"fixed"===hi(I).position)return null;var ee=Fi(I);for(Qt(ee)&&(ee=ee.host);bt(ee)&&["html","body"].indexOf(Ot(ee))<0;){var le=hi(ee);if("none"!==le.transform||"none"!==le.perspective||"paint"===le.contain||-1!==["transform","perspective"].indexOf(le.willChange)||K&&"filter"===le.willChange||K&&le.filter&&"none"!==le.filter)return ee;ee=ee.parentNode}return null}(k)||a}function Ji(k){return["top","bottom"].indexOf(k)>=0?"x":"y"}function Pi(k,a,b){return Gt(k,oi(a,b))}function kr(k){return Object.assign({},{top:0,right:0,bottom:0,left:0},k)}function Er(k,a){return a.reduce(function(b,I){return b[I]=k,b},{})}const Sr={name:"arrow",enabled:!0,phase:"main",fn:function(k){var a,Et,Ct,b=k.state,I=k.name,K=k.options,ee=b.elements.arrow,le=b.modifiersData.popperOffsets,pe=Wt(b.placement),Ce=Ji(pe),Me=[y,v].indexOf(pe)>=0?"height":"width";if(ee&&le){var ze=(Ct=b,kr("number"!=typeof(Et="function"==typeof(Et=K.padding)?Et(Object.assign({},Ct.rects,{placement:Ct.placement})):Et)?Et:Er(Et,S))),Le=Gi(ee),nt="y"===Ce?ut:y,Ge="y"===Ce?f:v,tt=b.rects.reference[Me]+b.rects.reference[Ce]-le[Ce]-b.rects.popper[Me],Je=le[Ce]-b.rects.reference[Ce],it=Ii(ee),kt=it?"y"===Ce?it.clientHeight||0:it.clientWidth||0:0,st=kt/2-Le[Me]/2+(tt/2-Je/2),ft=Pi(ze[nt],st,kt-Le[Me]-ze[Ge]);b.modifiersData[I]=((a={})[Ce]=ft,a.centerOffset=ft-st,a)}},effect:function(k){var a=k.state,b=k.options.element,I=void 0===b?"[data-popper-arrow]":b;null!=I&&("string"!=typeof I||(I=a.elements.popper.querySelector(I)))&&xr(a.elements.popper,I)&&(a.elements.arrow=I)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ei(k){return k.split("-")[1]}var Nn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Tr(k){var a,b=k.popper,I=k.popperRect,K=k.placement,ee=k.variation,le=k.offsets,pe=k.position,Ce=k.gpuAcceleration,Me=k.adaptive,ze=k.roundOffsets,Le=k.isFixed,nt=le.x,Ge=void 0===nt?0:nt,tt=le.y,Je=void 0===tt?0:tt,it="function"==typeof ze?ze({x:Ge,y:Je}):{x:Ge,y:Je};Ge=it.x,Je=it.y;var kt=le.hasOwnProperty("x"),Rt=le.hasOwnProperty("y"),ht=y,_t=ut,st=window;if(Me){var ft=Ii(b),xt="clientHeight",Et="clientWidth";ft===xe(b)&&"static"!==hi(ft=ci(b)).position&&"absolute"===pe&&(xt="scrollHeight",Et="scrollWidth"),(K===ut||(K===y||K===v)&&ee===L)&&(_t=f,Je-=(Le&&ft===st&&st.visualViewport?st.visualViewport.height:ft[xt])-I.height,Je*=Ce?1:-1),K!==y&&(K!==ut&&K!==f||ee!==L)||(ht=v,Ge-=(Le&&ft===st&&st.visualViewport?st.visualViewport.width:ft[Et])-I.width,Ge*=Ce?1:-1)}var Ct,ni,Zt,ti,Ft,zt=Object.assign({position:pe},Me&&Nn),Jt=!0===ze?(ni={x:Ge,y:Je},Zt=xe(b),ti=ni.y,{x:Ci(ni.x*(Ft=Zt.devicePixelRatio||1))/Ft||0,y:Ci(ti*Ft)/Ft||0}):{x:Ge,y:Je};return Ge=Jt.x,Je=Jt.y,Object.assign({},zt,Ce?((Ct={})[_t]=Rt?"0":"",Ct[ht]=kt?"0":"",Ct.transform=(st.devicePixelRatio||1)<=1?"translate("+Ge+"px, "+Je+"px)":"translate3d("+Ge+"px, "+Je+"px, 0)",Ct):((a={})[_t]=Rt?Je+"px":"",a[ht]=kt?Ge+"px":"",a.transform="",a))}const $i={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(k){var a=k.state,b=k.options,I=b.gpuAcceleration,K=void 0===I||I,ee=b.adaptive,le=void 0===ee||ee,pe=b.roundOffsets,Ce=void 0===pe||pe,Me={placement:Wt(a.placement),variation:Ei(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:K,isFixed:"fixed"===a.options.strategy};null!=a.modifiersData.popperOffsets&&(a.styles.popper=Object.assign({},a.styles.popper,Tr(Object.assign({},Me,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:le,roundOffsets:Ce})))),null!=a.modifiersData.arrow&&(a.styles.arrow=Object.assign({},a.styles.arrow,Tr(Object.assign({},Me,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ce})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})},data:{}};var Ni={passive:!0};const er={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(k){var a=k.state,b=k.instance,I=k.options,K=I.scroll,ee=void 0===K||K,le=I.resize,pe=void 0===le||le,Ce=xe(a.elements.popper),Me=[].concat(a.scrollParents.reference,a.scrollParents.popper);return ee&&Me.forEach(function(ze){ze.addEventListener("scroll",b.update,Ni)}),pe&&Ce.addEventListener("resize",b.update,Ni),function(){ee&&Me.forEach(function(ze){ze.removeEventListener("scroll",b.update,Ni)}),pe&&Ce.removeEventListener("resize",b.update,Ni)}},data:{}};var Mn={left:"right",right:"left",bottom:"top",top:"bottom"};function Mi(k){return k.replace(/left|right|bottom|top/g,function(a){return Mn[a]})}var zn={start:"end",end:"start"};function Ar(k){return k.replace(/start|end/g,function(a){return zn[a]})}function tr(k){var a=xe(k);return{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function ir(k){return ki(ci(k)).left+tr(k).scrollLeft}function rr(k){var a=hi(k);return/auto|scroll|overlay|hidden/.test(a.overflow+a.overflowY+a.overflowX)}function Rr(k){return["html","body","#document"].indexOf(Ot(k))>=0?k.ownerDocument.body:bt(k)&&rr(k)?k:Rr(Fi(k))}function Di(k,a){var b;void 0===a&&(a=[]);var I=Rr(k),K=I===(null==(b=k.ownerDocument)?void 0:b.body),ee=xe(I),le=K?[ee].concat(ee.visualViewport||[],rr(I)?I:[]):I,pe=a.concat(le);return K?pe:pe.concat(Di(Fi(le)))}function nr(k){return Object.assign({},k,{left:k.x,top:k.y,right:k.x+k.width,bottom:k.y+k.height})}function Ir(k,a,b){return a===Y?nr(function(I,K){var ee=xe(I),le=ci(I),pe=ee.visualViewport,Ce=le.clientWidth,Me=le.clientHeight,ze=0,Le=0;if(pe){Ce=pe.width,Me=pe.height;var nt=wr();(nt||!nt&&"fixed"===K)&&(ze=pe.offsetLeft,Le=pe.offsetTop)}return{width:Ce,height:Me,x:ze+ir(I),y:Le}}(k,b)):At(a)?((ee=ki(I=a,!1,"fixed"===b)).top=ee.top+I.clientTop,ee.left=ee.left+I.clientLeft,ee.bottom=ee.top+I.clientHeight,ee.right=ee.left+I.clientWidth,ee.width=I.clientWidth,ee.height=I.clientHeight,ee.x=ee.left,ee.y=ee.top,ee):nr(function(I){var K,ee=ci(I),le=tr(I),pe=null==(K=I.ownerDocument)?void 0:K.body,Ce=Gt(ee.scrollWidth,ee.clientWidth,pe?pe.scrollWidth:0,pe?pe.clientWidth:0),Me=Gt(ee.scrollHeight,ee.clientHeight,pe?pe.scrollHeight:0,pe?pe.clientHeight:0),ze=-le.scrollLeft+ir(I),Le=-le.scrollTop;return"rtl"===hi(pe||ee).direction&&(ze+=Gt(ee.clientWidth,pe?pe.clientWidth:0)-Ce),{width:Ce,height:Me,x:ze,y:Le}}(ci(k)));var I,ee}function Pr(k){var a,b=k.reference,I=k.element,K=k.placement,ee=K?Wt(K):null,le=K?Ei(K):null,pe=b.x+b.width/2-I.width/2,Ce=b.y+b.height/2-I.height/2;switch(ee){case ut:a={x:pe,y:b.y-I.height};break;case f:a={x:pe,y:b.y+b.height};break;case v:a={x:b.x+b.width,y:Ce};break;case y:a={x:b.x-I.width,y:Ce};break;default:a={x:b.x,y:b.y}}var Me=ee?Ji(ee):null;if(null!=Me){var ze="y"===Me?"height":"width";switch(le){case P:a[Me]=a[Me]-(b[ze]/2-I[ze]/2);break;case L:a[Me]=a[Me]+(b[ze]/2-I[ze]/2)}}return a}function Si(k,a){void 0===a&&(a={});var Zt,ei,ti,Ft,Tt,Yt,ii,ai,li,qt,I=a.placement,K=void 0===I?k.placement:I,ee=a.strategy,le=void 0===ee?k.strategy:ee,pe=a.boundary,Ce=void 0===pe?U:pe,Me=a.rootBoundary,ze=void 0===Me?Y:Me,Le=a.elementContext,nt=void 0===Le?E:Le,Ge=a.altBoundary,tt=void 0!==Ge&&Ge,Je=a.padding,it=void 0===Je?0:Je,kt=kr("number"!=typeof it?it:Er(it,S)),ht=k.rects.popper,_t=k.elements[tt?nt===E?T:E:nt],st=(Zt=At(_t)?_t:_t.contextElement||ci(k.elements.popper),ti=ze,Ft=le,ai="clippingParents"===(ei=Ce)?(Yt=Di(Fi(Tt=Zt)),At(ii=["absolute","fixed"].indexOf(hi(Tt).position)>=0&&bt(Tt)?Ii(Tt):Tt)?Yt.filter(function(pi){return At(pi)&&xr(pi,ii)&&"body"!==Ot(pi)}):[]):[].concat(ei),qt=(li=[].concat(ai,[ti])).reduce(function(Tt,Yt){var ii=Ir(Zt,Yt,Ft);return Tt.top=Gt(ii.top,Tt.top),Tt.right=oi(ii.right,Tt.right),Tt.bottom=oi(ii.bottom,Tt.bottom),Tt.left=Gt(ii.left,Tt.left),Tt},Ir(Zt,li[0],Ft)),qt.width=qt.right-qt.left,qt.height=qt.bottom-qt.top,qt.x=qt.left,qt.y=qt.top,qt),ft=ki(k.elements.reference),xt=Pr({reference:ft,element:ht,strategy:"absolute",placement:K}),Et=nr(Object.assign({},ht,xt)),Ct=nt===E?Et:ft,zt={top:st.top-Ct.top+kt.top,bottom:Ct.bottom-st.bottom+kt.bottom,left:st.left-Ct.left+kt.left,right:Ct.right-st.right+kt.right},Jt=k.modifiersData.offset;if(nt===E&&Jt){var ni=Jt[K];Object.keys(zt).forEach(function(Zt){var ei=[v,f].indexOf(Zt)>=0?1:-1,ti=[ut,f].indexOf(Zt)>=0?"y":"x";zt[Zt]+=ni[ti]*ei})}return zt}const Dr={name:"flip",enabled:!0,phase:"main",fn:function(k){var a=k.state,b=k.options,I=k.name;if(!a.modifiersData[I]._skip){for(var K=b.mainAxis,ee=void 0===K||K,le=b.altAxis,pe=void 0===le||le,Ce=b.fallbackPlacements,Me=b.padding,ze=b.boundary,Le=b.rootBoundary,nt=b.altBoundary,Ge=b.flipVariations,tt=void 0===Ge||Ge,Je=b.allowedAutoPlacements,it=a.options.placement,kt=Wt(it),Rt=Ce||(kt!==it&&tt?function(Tt){if(Wt(Tt)===x)return[];var Yt=Mi(Tt);return[Ar(Tt),Yt,Ar(Yt)]}(it):[Mi(it)]),ht=[it].concat(Rt).reduce(function(Tt,Yt){return Tt.concat(Wt(Yt)===x?function Un(k,a){void 0===a&&(a={});var K=a.boundary,ee=a.rootBoundary,le=a.padding,pe=a.flipVariations,Ce=a.allowedAutoPlacements,Me=void 0===Ce?Q:Ce,ze=Ei(a.placement),Le=ze?pe?N:N.filter(function(tt){return Ei(tt)===ze}):S,nt=Le.filter(function(tt){return Me.indexOf(tt)>=0});0===nt.length&&(nt=Le);var Ge=nt.reduce(function(tt,Je){return tt[Je]=Si(k,{placement:Je,boundary:K,rootBoundary:ee,padding:le})[Wt(Je)],tt},{});return Object.keys(Ge).sort(function(tt,Je){return Ge[tt]-Ge[Je]})}(a,{placement:Yt,boundary:ze,rootBoundary:Le,padding:Me,flipVariations:tt,allowedAutoPlacements:Je}):Yt)},[]),_t=a.rects.reference,st=a.rects.popper,ft=new Map,xt=!0,Et=ht[0],Ct=0;Ct<ht.length;Ct++){var zt=ht[Ct],Jt=Wt(zt),ni=Ei(zt)===P,Zt=[ut,f].indexOf(Jt)>=0,ei=Zt?"width":"height",ti=Si(a,{placement:zt,boundary:ze,rootBoundary:Le,altBoundary:nt,padding:Me}),Ft=Zt?ni?v:y:ni?f:ut;_t[ei]>st[ei]&&(Ft=Mi(Ft));var ai=Mi(Ft),li=[];if(ee&&li.push(ti[Jt]<=0),pe&&li.push(ti[Ft]<=0,ti[ai]<=0),li.every(function(Tt){return Tt})){Et=zt,xt=!1;break}ft.set(zt,li)}if(xt)for(var Ri=function(Tt){var Yt=ht.find(function(ii){var pi=ft.get(ii);if(pi)return pi.slice(0,Tt).every(function(Qi){return Qi})});if(Yt)return Et=Yt,"break"},qt=tt?3:1;qt>0&&"break"!==Ri(qt);qt--);a.placement!==Et&&(a.modifiersData[I]._skip=!0,a.placement=Et,a.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Lr(k,a,b){return void 0===b&&(b={x:0,y:0}),{top:k.top-a.height-b.y,right:k.right-a.width+b.x,bottom:k.bottom-a.height+b.y,left:k.left-a.width-b.x}}function Or(k){return[ut,v,f,y].some(function(a){return k[a]>=0})}const Br={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(k){var a=k.state,b=k.name,I=a.rects.reference,K=a.rects.popper,ee=a.modifiersData.preventOverflow,le=Si(a,{elementContext:"reference"}),pe=Si(a,{altBoundary:!0}),Ce=Lr(le,I),Me=Lr(pe,K,ee),ze=Or(Ce),Le=Or(Me);a.modifiersData[b]={referenceClippingOffsets:Ce,popperEscapeOffsets:Me,isReferenceHidden:ze,hasPopperEscaped:Le},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":ze,"data-popper-escaped":Le})}},Fr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(k){var a=k.state,I=k.name,K=k.options.offset,ee=void 0===K?[0,0]:K,le=Q.reduce(function(ze,Le){return ze[Le]=(Ge=a.rects,tt=ee,Je=Wt(nt=Le),it=[y,ut].indexOf(Je)>=0?-1:1,Rt=(Rt=(kt="function"==typeof tt?tt(Object.assign({},Ge,{placement:nt})):tt)[0])||0,ht=((ht=kt[1])||0)*it,[y,v].indexOf(Je)>=0?{x:ht,y:Rt}:{x:Rt,y:ht}),ze;var nt,Ge,tt,Je,it,kt,Rt,ht},{}),pe=le[a.placement],Me=pe.y;null!=a.modifiersData.popperOffsets&&(a.modifiersData.popperOffsets.x+=pe.x,a.modifiersData.popperOffsets.y+=Me),a.modifiersData[I]=le}},sr={name:"popperOffsets",enabled:!0,phase:"read",fn:function(k){var a=k.state;a.modifiersData[k.name]=Pr({reference:a.rects.reference,element:a.rects.popper,strategy:"absolute",placement:a.placement})},data:{}},Nr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(k){var br,Bn,a=k.state,b=k.options,I=k.name,K=b.mainAxis,ee=void 0===K||K,le=b.altAxis,pe=void 0!==le&&le,nt=b.tether,Ge=void 0===nt||nt,tt=b.tetherOffset,Je=void 0===tt?0:tt,it=Si(a,{boundary:b.boundary,rootBoundary:b.rootBoundary,padding:b.padding,altBoundary:b.altBoundary}),kt=Wt(a.placement),Rt=Ei(a.placement),ht=!Rt,_t=Ji(kt),st="x"===_t?"y":"x",ft=a.modifiersData.popperOffsets,xt=a.rects.reference,Et=a.rects.popper,Ct="function"==typeof Je?Je(Object.assign({},a.rects,{placement:a.placement})):Je,zt="number"==typeof Ct?{mainAxis:Ct,altAxis:Ct}:Object.assign({mainAxis:0,altAxis:0},Ct),Jt=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,ni={x:0,y:0};if(ft){if(ee){var Zt,ei="y"===_t?ut:y,ti="y"===_t?f:v,Ft="y"===_t?"height":"width",ai=ft[_t],li=ai+it[ei],Ri=ai-it[ti],qt=Ge?-Et[Ft]/2:0,Tt=Rt===P?xt[Ft]:Et[Ft],Yt=Rt===P?-Et[Ft]:-xt[Ft],ii=a.elements.arrow,pi=Ge&&ii?Gi(ii):{width:0,height:0},Qi=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},kn=Qi[ei],En=Qi[ti],Zi=Pi(0,xt[Ft],pi[Ft]),mo=ht?xt[Ft]/2-qt-Zi-kn-zt.mainAxis:Tt-Zi-kn-zt.mainAxis,vo=ht?-xt[Ft]/2+qt+Zi+En+zt.mainAxis:Yt+Zi+En+zt.mainAxis,_r=a.elements.arrow&&Ii(a.elements.arrow),_o=_r?"y"===_t?_r.clientTop||0:_r.clientLeft||0:0,Sn=null!=(Zt=Jt?.[_t])?Zt:0,yo=ai+vo-Sn,Tn=Pi(Ge?oi(li,ai+mo-Sn-_o):li,ai,Ge?Gt(Ri,yo):Ri);ft[_t]=Tn,ni[_t]=Tn-ai}if(pe){var An,xi=ft[st],Yi="y"===st?"height":"width",Rn=xi+it["x"===_t?ut:y],In=xi-it["x"===_t?f:v],yr=-1!==[ut,y].indexOf(kt),Pn=null!=(An=Jt?.[st])?An:0,Dn=yr?Rn:xi-xt[Yi]-Et[Yi]-Pn+zt.altAxis,Ln=yr?xi+xt[Yi]+Et[Yi]-Pn-zt.altAxis:In,On=Ge&&yr?(Bn=Pi(Dn,xi,br=Ln))>br?br:Bn:Pi(Ge?Dn:Rn,xi,Ge?Ln:In);ft[st]=On,ni[st]=On-xi}a.modifiersData[I]=ni}},requiresIfExists:["offset"]};function jn(k,a,b){void 0===b&&(b=!1);var I,K,Le,nt,Ge,tt,ee=bt(a),le=bt(a)&&(nt=(Le=a).getBoundingClientRect(),Ge=Ci(nt.width)/Le.offsetWidth||1,tt=Ci(nt.height)/Le.offsetHeight||1,1!==Ge||1!==tt),pe=ci(a),Ce=ki(k,le,b),Me={scrollLeft:0,scrollTop:0},ze={x:0,y:0};return(ee||!ee&&!b)&&(("body"!==Ot(a)||rr(pe))&&(Me=(I=a)!==xe(I)&&bt(I)?{scrollLeft:(K=I).scrollLeft,scrollTop:K.scrollTop}:tr(I)),bt(a)?((ze=ki(a,!0)).x+=a.clientLeft,ze.y+=a.clientTop):pe&&(ze.x=ir(pe))),{x:Ce.left+Me.scrollLeft-ze.x,y:Ce.top+Me.scrollTop-ze.y,width:Ce.width,height:Ce.height}}function Hn(k){var a=new Map,b=new Set,I=[];function K(ee){b.add(ee.name),[].concat(ee.requires||[],ee.requiresIfExists||[]).forEach(function(le){if(!b.has(le)){var pe=a.get(le);pe&&K(pe)}}),I.push(ee)}return k.forEach(function(ee){a.set(ee.name,ee)}),k.forEach(function(ee){b.has(ee.name)||K(ee)}),I}var Mr={placement:"bottom",modifiers:[],strategy:"absolute"};function zr(){for(var k=arguments.length,a=new Array(k),b=0;b<k;b++)a[b]=arguments[b];return!a.some(function(I){return!(I&&"function"==typeof I.getBoundingClientRect)})}function zi(k){void 0===k&&(k={});var b=k.defaultModifiers,I=void 0===b?[]:b,K=k.defaultOptions,ee=void 0===K?Mr:K;return function(le,pe,Ce){void 0===Ce&&(Ce=ee);var Me,ze,Le={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mr,ee),modifiersData:{},elements:{reference:le,popper:pe},attributes:{},styles:{}},nt=[],Ge=!1,tt={state:Le,setOptions:function(it){var kt="function"==typeof it?it(Le.options):it;Je(),Le.options=Object.assign({},ee,Le.options,kt),Le.scrollParents={reference:At(le)?Di(le):le.contextElement?Di(le.contextElement):[],popper:Di(pe)};var Rt,ht,st,ft,_t=(Rt=[].concat(I,Le.options.modifiers),ht=Rt.reduce(function(st,ft){var xt=st[ft.name];return st[ft.name]=xt?Object.assign({},xt,ft,{options:Object.assign({},xt.options,ft.options),data:Object.assign({},xt.data,ft.data)}):ft,st},{}),st=Object.keys(ht).map(function(st){return ht[st]}),ft=Hn(st),St.reduce(function(xt,Et){return xt.concat(ft.filter(function(Ct){return Ct.phase===Et}))},[]));return Le.orderedModifiers=_t.filter(function(st){return st.enabled}),Le.orderedModifiers.forEach(function(st){var xt=st.options,Ct=st.effect;if("function"==typeof Ct){var zt=Ct({state:Le,name:st.name,instance:tt,options:void 0===xt?{}:xt});nt.push(zt||function(){})}}),tt.update()},forceUpdate:function(){if(!Ge){var it=Le.elements,kt=it.reference,Rt=it.popper;if(zr(kt,Rt)){Le.rects={reference:jn(kt,Ii(Rt),"fixed"===Le.options.strategy),popper:Gi(Rt)},Le.reset=!1,Le.placement=Le.options.placement,Le.orderedModifiers.forEach(function(Ct){return Le.modifiersData[Ct.name]=Object.assign({},Ct.data)});for(var ht=0;ht<Le.orderedModifiers.length;ht++)if(!0!==Le.reset){var _t=Le.orderedModifiers[ht],st=_t.fn,ft=_t.options;"function"==typeof st&&(Le=st({state:Le,options:void 0===ft?{}:ft,name:_t.name,instance:tt})||Le)}else Le.reset=!1,ht=-1}}},update:(Me=function(){return new Promise(function(it){tt.forceUpdate(),it(Le)})},function(){return ze||(ze=new Promise(function(it){Promise.resolve().then(function(){ze=void 0,it(Me())})})),ze}),destroy:function(){Je(),Ge=!0}};if(!zr(le,pe))return tt;function Je(){nt.forEach(function(it){return it()}),nt=[]}return tt.setOptions(Ce).then(function(it){!Ge&&Ce.onFirstUpdate&&Ce.onFirstUpdate(it)}),tt}}var Wn=zi(),qn=zi({defaultModifiers:[er,sr,$i,si]}),or=zi({defaultModifiers:[er,sr,$i,si,Fr,Dr,Nr,Sr,Br]});const Ur=Object.freeze(Object.defineProperty({__proto__:null,afterMain:et,afterRead:ce,afterWrite:Lt,applyStyles:si,arrow:Sr,auto:x,basePlacements:S,beforeMain:je,beforeRead:se,beforeWrite:wt,bottom:f,clippingParents:U,computeStyles:$i,createPopper:or,createPopperBase:Wn,createPopperLite:qn,detectOverflow:Si,end:L,eventListeners:er,flip:Dr,hide:Br,left:y,main:"main",modifierPhases:St,offset:Fr,placements:Q,popper:E,popperGenerator:zi,popperOffsets:sr,preventOverflow:Nr,read:"read",reference:T,right:v,start:P,top:ut,variationPlacements:N,viewport:Y,write:"write"},Symbol.toStringTag,{value:"Module"})),jr="dropdown",gi=".bs.dropdown",ar=".data-api",Vn="ArrowUp",Hr="ArrowDown",Xn=`hide${gi}`,Qn=`hidden${gi}`,Zn=`show${gi}`,Yn=`shown${gi}`,Wr=`click${gi}${ar}`,qr=`keydown${gi}${ar}`,Kn=`keyup${gi}${ar}`,Ti="show",mi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Gn=`${mi}.${Ti}`,Ui=".dropdown-menu",Jn=m()?"top-end":"top-start",$n=m()?"top-start":"top-end",es=m()?"bottom-end":"bottom-start",ts=m()?"bottom-start":"bottom-end",is=m()?"left-start":"right-start",rs=m()?"right-start":"left-start",ns={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},ss={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ri extends Ne{constructor(a,b){super(a,b),this._popper=null,this._parent=this._element.parentNode,this._menu=Z.next(this._element,Ui)[0]||Z.prev(this._element,Ui)[0]||Z.findOne(Ui,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ns}static get DefaultType(){return ss}static get NAME(){return jr}toggle(){return this._isShown()?this.hide():this.show()}show(){if(c(this._element)||this._isShown())return;const a={relatedTarget:this._element};if(!G.trigger(this._element,Zn,a).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const b of[].concat(...document.body.children))G.on(b,"mouseover",h);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ti),this._element.classList.add(Ti),G.trigger(this._element,Yn,a)}}hide(){!c(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(a){if(!G.trigger(this._element,Xn,a).defaultPrevented){if("ontouchstart"in document.documentElement)for(const b of[].concat(...document.body.children))G.off(b,"mouseover",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ti),this._element.classList.remove(Ti),this._element.setAttribute("aria-expanded","false"),Fe.removeDataAttribute(this._menu,"popper"),G.trigger(this._element,Qn,a)}}_getConfig(a){if("object"==typeof(a=super._getConfig(a)).reference&&!l(a.reference)&&"function"!=typeof a.reference.getBoundingClientRect)throw new TypeError(`${jr.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return a}_createPopper(){if(void 0===Ur)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let a=this._element;"parent"===this._config.reference?a=this._parent:l(this._config.reference)?a=s(this._config.reference):"object"==typeof this._config.reference&&(a=this._config.reference);const b=this._getPopperConfig();this._popper=or(a,this._menu,b)}_isShown(){return this._menu.classList.contains(Ti)}_getPlacement(){const a=this._parent;if(a.classList.contains("dropend"))return is;if(a.classList.contains("dropstart"))return rs;if(a.classList.contains("dropup-center"))return"top";if(a.classList.contains("dropdown-center"))return"bottom";const b="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return a.classList.contains("dropup")?b?$n:Jn:b?ts:es}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:a}=this._config;return"string"==typeof a?a.split(",").map(b=>Number.parseInt(b,10)):"function"==typeof a?b=>a(b,this._element):a}_getPopperConfig(){const a={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Fe.setDataAttribute(this._menu,"popper","static"),a.modifiers=[{name:"applyStyles",enabled:!1}]),{...a,...A(this._config.popperConfig,[a])}}_selectMenuItem({key:a,target:b}){const I=Z.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(K=>d(K));I.length&&X(I,b,a===Hr,!I.includes(b)).focus()}static jQueryInterface(a){return this.each(function(){const b=ri.getOrCreateInstance(this,a);if("string"==typeof a){if(void 0===b[a])throw new TypeError(`No method named "${a}"`);b[a]()}})}static clearMenus(a){if(2===a.button||"keyup"===a.type&&"Tab"!==a.key)return;const b=Z.find(Gn);for(const I of b){const K=ri.getInstance(I);if(!K||!1===K._config.autoClose)continue;const ee=a.composedPath(),le=ee.includes(K._menu);if(ee.includes(K._element)||"inside"===K._config.autoClose&&!le||"outside"===K._config.autoClose&&le||K._menu.contains(a.target)&&("keyup"===a.type&&"Tab"===a.key||/input|select|option|textarea|form/i.test(a.target.tagName)))continue;const pe={relatedTarget:K._element};"click"===a.type&&(pe.clickEvent=a),K._completeHide(pe)}}static dataApiKeydownHandler(a){const b=/input|textarea/i.test(a.target.tagName),I="Escape"===a.key,K=[Vn,Hr].includes(a.key);if(!K&&!I||b&&!I)return;a.preventDefault();const ee=this.matches(mi)?this:Z.prev(this,mi)[0]||Z.next(this,mi)[0]||Z.findOne(mi,a.delegateTarget.parentNode),le=ri.getOrCreateInstance(ee);if(K)return a.stopPropagation(),le.show(),void le._selectMenuItem(a);le._isShown()&&(a.stopPropagation(),le.hide(),ee.focus())}}G.on(document,qr,mi,ri.dataApiKeydownHandler),G.on(document,qr,Ui,ri.dataApiKeydownHandler),G.on(document,Wr,ri.clearMenus),G.on(document,Kn,ri.clearMenus),G.on(document,Wr,mi,function(k){k.preventDefault(),ri.getOrCreateInstance(this).toggle()}),w(ri);const Vr="backdrop",Qr=`mousedown.bs.${Vr}`,os={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},as={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Zr extends Ze{constructor(a){super(),this._config=this._getConfig(a),this._isAppended=!1,this._element=null}static get Default(){return os}static get DefaultType(){return as}static get NAME(){return Vr}show(a){if(!this._config.isVisible)return void A(a);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{A(a)})}hide(a){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),A(a)})):A(a)}dispose(){this._isAppended&&(G.off(this._element,Qr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const a=document.createElement("div");a.className=this._config.className,this._config.isAnimated&&a.classList.add("fade"),this._element=a}return this._element}_configAfterMerge(a){return a.rootElement=s(a.rootElement),a}_append(){if(this._isAppended)return;const a=this._getElement();this._config.rootElement.append(a),G.on(a,Qr,()=>{A(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(a){j(a,this._getElement(),this._config.isAnimated)}}const ji=".bs.focustrap",ls=`focusin${ji}`,hs=`keydown.tab${ji}`,Yr="backward",us={autofocus:!0,trapElement:null},ds={autofocus:"boolean",trapElement:"element"};class Kr extends Ze{constructor(a){super(),this._config=this._getConfig(a),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return us}static get DefaultType(){return ds}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),G.off(document,ji),G.on(document,ls,a=>this._handleFocusin(a)),G.on(document,hs,a=>this._handleKeydown(a)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,G.off(document,ji))}_handleFocusin(a){const{trapElement:b}=this._config;if(a.target===document||a.target===b||b.contains(a.target))return;const I=Z.focusableChildren(b);0===I.length?b.focus():this._lastTabNavDirection===Yr?I[I.length-1].focus():I[0].focus()}_handleKeydown(a){"Tab"===a.key&&(this._lastTabNavDirection=a.shiftKey?Yr:"forward")}}const Gr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Jr=".sticky-top",Hi="padding-right",$r="margin-right";class lr{constructor(){this._element=document.body}getWidth(){const a=document.documentElement.clientWidth;return Math.abs(window.innerWidth-a)}hide(){const a=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Hi,b=>b+a),this._setElementAttributes(Gr,Hi,b=>b+a),this._setElementAttributes(Jr,$r,b=>b-a)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Hi),this._resetElementAttributes(Gr,Hi),this._resetElementAttributes(Jr,$r)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(a,b,I){const K=this.getWidth();this._applyManipulationCallback(a,ee=>{if(ee!==this._element&&window.innerWidth>ee.clientWidth+K)return;this._saveInitialAttribute(ee,b);const le=window.getComputedStyle(ee).getPropertyValue(b);ee.style.setProperty(b,`${I(Number.parseFloat(le))}px`)})}_saveInitialAttribute(a,b){const I=a.style.getPropertyValue(b);I&&Fe.setDataAttribute(a,b,I)}_resetElementAttributes(a,b){this._applyManipulationCallback(a,I=>{const K=Fe.getDataAttribute(I,b);null!==K?(Fe.removeDataAttribute(I,b),I.style.setProperty(b,K)):I.style.removeProperty(b)})}_applyManipulationCallback(a,b){if(l(a))b(a);else for(const I of Z.find(a,this._element))b(I)}}const $t=".bs.modal",cs=`hide${$t}`,fs=`hidePrevented${$t}`,en=`hidden${$t}`,tn=`show${$t}`,ps=`shown${$t}`,gs=`resize${$t}`,ms=`click.dismiss${$t}`,vs=`mousedown.dismiss${$t}`,_s=`keydown.dismiss${$t}`,ys=`click${$t}.data-api`,rn="modal-open",hr="modal-static",bs={backdrop:!0,focus:!0,keyboard:!0},ws={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class vi extends Ne{constructor(a,b){super(a,b),this._dialog=Z.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new lr,this._addEventListeners()}static get Default(){return bs}static get DefaultType(){return ws}static get NAME(){return"modal"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||this._isTransitioning||G.trigger(this._element,tn,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(rn),this._adjustDialog(),this._backdrop.show(()=>this._showElement(a)))}hide(){this._isShown&&!this._isTransitioning&&(G.trigger(this._element,cs).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){G.off(window,$t),G.off(this._dialog,$t),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Zr({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Kr({trapElement:this._element})}_showElement(a){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const b=Z.findOne(".modal-body",this._dialog);b&&(b.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,G.trigger(this._element,ps,{relatedTarget:a})},this._dialog,this._isAnimated())}_addEventListeners(){G.on(this._element,_s,a=>{"Escape"===a.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),G.on(window,gs,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),G.on(this._element,vs,a=>{G.one(this._element,ms,b=>{this._element===a.target&&this._element===b.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(rn),this._resetAdjustments(),this._scrollBar.reset(),G.trigger(this._element,en)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(G.trigger(this._element,fs).defaultPrevented)return;const a=this._element.scrollHeight>document.documentElement.clientHeight,b=this._element.style.overflowY;"hidden"===b||this._element.classList.contains(hr)||(a||(this._element.style.overflowY="hidden"),this._element.classList.add(hr),this._queueCallback(()=>{this._element.classList.remove(hr),this._queueCallback(()=>{this._element.style.overflowY=b},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const a=this._element.scrollHeight>document.documentElement.clientHeight,b=this._scrollBar.getWidth(),I=b>0;if(I&&!a){const K=m()?"paddingLeft":"paddingRight";this._element.style[K]=`${b}px`}if(!I&&a){const K=m()?"paddingRight":"paddingLeft";this._element.style[K]=`${b}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(a,b){return this.each(function(){const I=vi.getOrCreateInstance(this,a);if("string"==typeof a){if(void 0===I[a])throw new TypeError(`No method named "${a}"`);I[a](b)}})}}G.on(document,ys,'[data-bs-toggle="modal"]',function(k){const a=Z.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&k.preventDefault(),G.one(a,tn,I=>{I.defaultPrevented||G.one(a,en,()=>{d(this)&&this.focus()})});const b=Z.findOne(".modal.show");b&&vi.getInstance(b).hide(),vi.getOrCreateInstance(a).toggle(this)}),he(vi),w(vi);const ui=".bs.offcanvas",sn=".data-api",xs=`load${ui}${sn}`,an="showing",hn=".offcanvas.show",Cs=`show${ui}`,ks=`shown${ui}`,Es=`hide${ui}`,un=`hidePrevented${ui}`,dn=`hidden${ui}`,Ss=`resize${ui}`,Ts=`click${ui}${sn}`,As=`keydown.dismiss${ui}`,Rs={backdrop:!0,keyboard:!0,scroll:!1},Is={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class di extends Ne{constructor(a,b){super(a,b),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Rs}static get DefaultType(){return Is}static get NAME(){return"offcanvas"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||G.trigger(this._element,Cs,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new lr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(an),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(an),G.trigger(this._element,ks,{relatedTarget:a})},this._element,!0))}hide(){this._isShown&&(G.trigger(this._element,Es).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new lr).reset(),G.trigger(this._element,dn)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const a=!!this._config.backdrop;return new Zr({className:"offcanvas-backdrop",isVisible:a,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:a?()=>{"static"!==this._config.backdrop?this.hide():G.trigger(this._element,un)}:null})}_initializeFocusTrap(){return new Kr({trapElement:this._element})}_addEventListeners(){G.on(this._element,As,a=>{"Escape"===a.key&&(this._config.keyboard?this.hide():G.trigger(this._element,un))})}static jQueryInterface(a){return this.each(function(){const b=di.getOrCreateInstance(this,a);if("string"==typeof a){if(void 0===b[a]||a.startsWith("_")||"constructor"===a)throw new TypeError(`No method named "${a}"`);b[a](this)}})}}G.on(document,Ts,'[data-bs-toggle="offcanvas"]',function(k){const a=Z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&k.preventDefault(),c(this))return;G.one(a,dn,()=>{d(this)&&this.focus()});const b=Z.findOne(hn);b&&b!==a&&di.getInstance(b).hide(),di.getOrCreateInstance(a).toggle(this)}),G.on(window,xs,()=>{for(const k of Z.find(hn))di.getOrCreateInstance(k).show()}),G.on(window,Ss,()=>{for(const k of Z.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(k).position&&di.getOrCreateInstance(k).hide()}),he(di),w(di);const cn={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ps=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ds=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ls=(k,a)=>{const b=k.nodeName.toLowerCase();return a.includes(b)?!Ps.has(b)||!!Ds.test(k.nodeValue):a.filter(I=>I instanceof RegExp).some(I=>I.test(b))},Os={allowList:cn,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Bs={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Fs={entry:"(string|element|function|null)",selector:"(string|element)"};class Ns extends Ze{constructor(a){super(),this._config=this._getConfig(a)}static get Default(){return Os}static get DefaultType(){return Bs}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(a=>this._resolvePossibleFunction(a)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(a){return this._checkContent(a),this._config.content={...this._config.content,...a},this}toHtml(){const a=document.createElement("div");a.innerHTML=this._maybeSanitize(this._config.template);for(const[K,ee]of Object.entries(this._config.content))this._setContent(a,ee,K);const b=a.children[0],I=this._resolvePossibleFunction(this._config.extraClass);return I&&b.classList.add(...I.split(" ")),b}_typeCheckConfig(a){super._typeCheckConfig(a),this._checkContent(a.content)}_checkContent(a){for(const[b,I]of Object.entries(a))super._typeCheckConfig({selector:b,entry:I},Fs)}_setContent(a,b,I){const K=Z.findOne(I,a);K&&((b=this._resolvePossibleFunction(b))?l(b)?this._putElementInTemplate(s(b),K):this._config.html?K.innerHTML=this._maybeSanitize(b):K.textContent=b:K.remove())}_maybeSanitize(a){return this._config.sanitize?function(b,I,K){if(!b.length)return b;if(K&&"function"==typeof K)return K(b);const ee=(new window.DOMParser).parseFromString(b,"text/html"),le=[].concat(...ee.body.querySelectorAll("*"));for(const pe of le){const Ce=pe.nodeName.toLowerCase();if(!Object.keys(I).includes(Ce)){pe.remove();continue}const Me=[].concat(...pe.attributes),ze=[].concat(I["*"]||[],I[Ce]||[]);for(const Le of Me)Ls(Le,ze)||pe.removeAttribute(Le.nodeName)}return ee.body.innerHTML}(a,this._config.allowList,this._config.sanitizeFn):a}_resolvePossibleFunction(a){return A(a,[this])}_putElementInTemplate(a,b){if(this._config.html)return b.innerHTML="",void b.append(a);b.textContent=a.textContent}}const Ms=new Set(["sanitize","allowList","sanitizeFn"]),ur="fade",Wi="show",pn="hide.bs.modal",Li="hover",dr="focus",zs={AUTO:"auto",TOP:"top",RIGHT:m()?"left":"right",BOTTOM:"bottom",LEFT:m()?"right":"left"},Us={allowList:cn,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},js={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class _i extends Ne{constructor(a,b){if(void 0===Ur)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(a,b),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Us}static get DefaultType(){return js}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),G.off(this._element.closest(".modal"),pn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const a=G.trigger(this._element,this.constructor.eventName("show")),b=(o(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(a.defaultPrevented||!b)return;this._disposePopper();const I=this._getTipElement();this._element.setAttribute("aria-describedby",I.getAttribute("id"));const{container:K}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(K.append(I),G.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(I),I.classList.add(Wi),"ontouchstart"in document.documentElement)for(const ee of[].concat(...document.body.children))G.on(ee,"mouseover",h);this._queueCallback(()=>{G.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!G.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Wi),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))G.off(a,"mouseover",h);this._activeTrigger.click=!1,this._activeTrigger[dr]=!1,this._activeTrigger[Li]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),G.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(a){const b=this._getTemplateFactory(a).toHtml();if(!b)return null;b.classList.remove(ur,Wi),b.classList.add(`bs-${this.constructor.NAME}-auto`);const I=(K=>{do{K+=Math.floor(1e6*Math.random())}while(document.getElementById(K));return K})(this.constructor.NAME).toString();return b.setAttribute("id",I),this._isAnimated()&&b.classList.add(ur),b}setContent(a){this._newContent=a,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(a){return this._templateFactory?this._templateFactory.changeContent(a):this._templateFactory=new Ns({...this._config,content:a,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(a){return this.constructor.getOrCreateInstance(a.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ur)}_isShown(){return this.tip&&this.tip.classList.contains(Wi)}_createPopper(a){const b=A(this._config.placement,[this,a,this._element]),I=zs[b.toUpperCase()];return or(this._element,a,this._getPopperConfig(I))}_getOffset(){const{offset:a}=this._config;return"string"==typeof a?a.split(",").map(b=>Number.parseInt(b,10)):"function"==typeof a?b=>a(b,this._element):a}_resolvePossibleFunction(a){return A(a,[this._element])}_getPopperConfig(a){const b={placement:a,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:I=>{this._getTipElement().setAttribute("data-popper-placement",I.state.placement)}}]};return{...b,...A(this._config.popperConfig,[b])}}_setListeners(){const a=this._config.trigger.split(" ");for(const b of a)if("click"===b)G.on(this._element,this.constructor.eventName("click"),this._config.selector,I=>{this._initializeOnDelegatedTarget(I).toggle()});else if("manual"!==b){const I=this.constructor.eventName(b===Li?"mouseenter":"focusin"),K=this.constructor.eventName(b===Li?"mouseleave":"focusout");G.on(this._element,I,this._config.selector,ee=>{const le=this._initializeOnDelegatedTarget(ee);le._activeTrigger["focusin"===ee.type?dr:Li]=!0,le._enter()}),G.on(this._element,K,this._config.selector,ee=>{const le=this._initializeOnDelegatedTarget(ee);le._activeTrigger["focusout"===ee.type?dr:Li]=le._element.contains(ee.relatedTarget),le._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},G.on(this._element.closest(".modal"),pn,this._hideModalHandler)}_fixTitle(){const a=this._element.getAttribute("title");a&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",a),this._element.setAttribute("data-bs-original-title",a),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(a,b){clearTimeout(this._timeout),this._timeout=setTimeout(a,b)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(a){const b=Fe.getDataAttributes(this._element);for(const I of Object.keys(b))Ms.has(I)&&delete b[I];return a={...b,..."object"==typeof a&&a?a:{}},a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a.container=!1===a.container?document.body:s(a.container),"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),"number"==typeof a.title&&(a.title=a.title.toString()),"number"==typeof a.content&&(a.content=a.content.toString()),a}_getDelegateConfig(){const a={};for(const[b,I]of Object.entries(this._config))this.constructor.Default[b]!==I&&(a[b]=I);return a.selector=!1,a.trigger="manual",a}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(a){return this.each(function(){const b=_i.getOrCreateInstance(this,a);if("string"==typeof a){if(void 0===b[a])throw new TypeError(`No method named "${a}"`);b[a]()}})}}w(_i);const Hs={..._i.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ws={..._i.DefaultType,content:"(null|string|element|function)"};class qi extends _i{static get Default(){return Hs}static get DefaultType(){return Ws}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(a){return this.each(function(){const b=qi.getOrCreateInstance(this,a);if("string"==typeof a){if(void 0===b[a])throw new TypeError(`No method named "${a}"`);b[a]()}})}}w(qi);const cr=".bs.scrollspy",qs=`activate${cr}`,gn=`click${cr}`,Vs=`load${cr}.data-api`,Ai="active",fr="[href]",mn=".nav-link",Xs=`${mn}, .nav-item > ${mn}, .list-group-item`,Qs={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Zs={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Oi extends Ne{constructor(a,b){super(a,b),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Qs}static get DefaultType(){return Zs}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const a of this._observableSections.values())this._observer.observe(a)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(a){return a.target=s(a.target)||document.body,a.rootMargin=a.offset?`${a.offset}px 0px -30%`:a.rootMargin,"string"==typeof a.threshold&&(a.threshold=a.threshold.split(",").map(b=>Number.parseFloat(b))),a}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(G.off(this._config.target,gn),G.on(this._config.target,gn,fr,a=>{const b=this._observableSections.get(a.target.hash);if(b){a.preventDefault();const I=this._rootElement||window,K=b.offsetTop-this._element.offsetTop;if(I.scrollTo)return void I.scrollTo({top:K,behavior:"smooth"});I.scrollTop=K}}))}_getNewObserver(){return new IntersectionObserver(b=>this._observerCallback(b),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(a){const b=le=>this._targetLinks.get(`#${le.target.id}`),I=le=>{this._previousScrollData.visibleEntryTop=le.target.offsetTop,this._process(b(le))},K=(this._rootElement||document.documentElement).scrollTop,ee=K>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=K;for(const le of a){if(!le.isIntersecting){this._activeTarget=null,this._clearActiveClass(b(le));continue}const pe=le.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ee&&pe){if(I(le),!K)return}else ee||pe||I(le)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const a=Z.find(fr,this._config.target);for(const b of a){if(!b.hash||c(b))continue;const I=Z.findOne(decodeURI(b.hash),this._element);d(I)&&(this._targetLinks.set(decodeURI(b.hash),b),this._observableSections.set(b.hash,I))}}_process(a){this._activeTarget!==a&&(this._clearActiveClass(this._config.target),this._activeTarget=a,a.classList.add(Ai),this._activateParents(a),G.trigger(this._element,qs,{relatedTarget:a}))}_activateParents(a){if(a.classList.contains("dropdown-item"))Z.findOne(".dropdown-toggle",a.closest(".dropdown")).classList.add(Ai);else for(const b of Z.parents(a,".nav, .list-group"))for(const I of Z.prev(b,Xs))I.classList.add(Ai)}_clearActiveClass(a){a.classList.remove(Ai);const b=Z.find(`${fr}.${Ai}`,a);for(const I of b)I.classList.remove(Ai)}static jQueryInterface(a){return this.each(function(){const b=Oi.getOrCreateInstance(this,a);if("string"==typeof a){if(void 0===b[a]||a.startsWith("_")||"constructor"===a)throw new TypeError(`No method named "${a}"`);b[a]()}})}}G.on(window,Vs,()=>{for(const k of Z.find('[data-bs-spy="scroll"]'))Oi.getOrCreateInstance(k)}),w(Oi);const yi=".bs.tab",Ys=`hide${yi}`,Ks=`hidden${yi}`,Gs=`show${yi}`,Js=`shown${yi}`,$s=`click${yi}`,eo=`keydown${yi}`,to=`load${yi}`,io="ArrowLeft",vn="ArrowRight",ro="ArrowUp",_n="ArrowDown",pr="Home",yn="End",bi="active",gr="show",wn=".dropdown-toggle",mr=`:not(${wn})`,xn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',vr=`.nav-link${mr}, .list-group-item${mr}, [role="tab"]${mr}, ${xn}`,no=`.${bi}[data-bs-toggle="tab"], .${bi}[data-bs-toggle="pill"], .${bi}[data-bs-toggle="list"]`;class wi extends Ne{constructor(a){super(a),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),G.on(this._element,eo,b=>this._keydown(b)))}static get NAME(){return"tab"}show(){const a=this._element;if(this._elemIsActive(a))return;const b=this._getActiveElem(),I=b?G.trigger(b,Ys,{relatedTarget:a}):null;G.trigger(a,Gs,{relatedTarget:b}).defaultPrevented||I&&I.defaultPrevented||(this._deactivate(b,a),this._activate(a,b))}_activate(a,b){a&&(a.classList.add(bi),this._activate(Z.getElementFromSelector(a)),this._queueCallback(()=>{"tab"===a.getAttribute("role")?(a.removeAttribute("tabindex"),a.setAttribute("aria-selected",!0),this._toggleDropDown(a,!0),G.trigger(a,Js,{relatedTarget:b})):a.classList.add(gr)},a,a.classList.contains("fade")))}_deactivate(a,b){a&&(a.classList.remove(bi),a.blur(),this._deactivate(Z.getElementFromSelector(a)),this._queueCallback(()=>{"tab"===a.getAttribute("role")?(a.setAttribute("aria-selected",!1),a.setAttribute("tabindex","-1"),this._toggleDropDown(a,!1),G.trigger(a,Ks,{relatedTarget:b})):a.classList.remove(gr)},a,a.classList.contains("fade")))}_keydown(a){if(![io,vn,ro,_n,pr,yn].includes(a.key))return;a.stopPropagation(),a.preventDefault();const b=this._getChildren().filter(K=>!c(K));let I;if([pr,yn].includes(a.key))I=b[a.key===pr?0:b.length-1];else{const K=[vn,_n].includes(a.key);I=X(b,a.target,K,!0)}I&&(I.focus({preventScroll:!0}),wi.getOrCreateInstance(I).show())}_getChildren(){return Z.find(vr,this._parent)}_getActiveElem(){return this._getChildren().find(a=>this._elemIsActive(a))||null}_setInitialAttributes(a,b){this._setAttributeIfNotExists(a,"role","tablist");for(const I of b)this._setInitialAttributesOnChild(I)}_setInitialAttributesOnChild(a){a=this._getInnerElement(a);const b=this._elemIsActive(a),I=this._getOuterElement(a);a.setAttribute("aria-selected",b),I!==a&&this._setAttributeIfNotExists(I,"role","presentation"),b||a.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(a,"role","tab"),this._setInitialAttributesOnTargetPanel(a)}_setInitialAttributesOnTargetPanel(a){const b=Z.getElementFromSelector(a);b&&(this._setAttributeIfNotExists(b,"role","tabpanel"),a.id&&this._setAttributeIfNotExists(b,"aria-labelledby",`${a.id}`))}_toggleDropDown(a,b){const I=this._getOuterElement(a);if(!I.classList.contains("dropdown"))return;const K=(ee,le)=>{const pe=Z.findOne(ee,I);pe&&pe.classList.toggle(le,b)};K(wn,bi),K(".dropdown-menu",gr),I.setAttribute("aria-expanded",b)}_setAttributeIfNotExists(a,b,I){a.hasAttribute(b)||a.setAttribute(b,I)}_elemIsActive(a){return a.classList.contains(bi)}_getInnerElement(a){return a.matches(vr)?a:Z.findOne(vr,a)}_getOuterElement(a){return a.closest(".nav-item, .list-group-item")||a}static jQueryInterface(a){return this.each(function(){const b=wi.getOrCreateInstance(this);if("string"==typeof a){if(void 0===b[a]||a.startsWith("_")||"constructor"===a)throw new TypeError(`No method named "${a}"`);b[a]()}})}}G.on(document,$s,xn,function(k){["A","AREA"].includes(this.tagName)&&k.preventDefault(),c(this)||wi.getOrCreateInstance(this).show()}),G.on(window,to,()=>{for(const k of Z.find(no))wi.getOrCreateInstance(k)}),w(wi);const fi=".bs.toast",so=`mouseover${fi}`,oo=`mouseout${fi}`,ao=`focusin${fi}`,lo=`focusout${fi}`,ho=`hide${fi}`,uo=`hidden${fi}`,co=`show${fi}`,fo=`shown${fi}`,Vi="show",Xi="showing",po={animation:"boolean",autohide:"boolean",delay:"number"},go={animation:!0,autohide:!0,delay:5e3};class Bi extends Ne{constructor(a,b){super(a,b),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return go}static get DefaultType(){return po}static get NAME(){return"toast"}show(){G.trigger(this._element,co).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Vi,Xi),this._queueCallback(()=>{this._element.classList.remove(Xi),G.trigger(this._element,fo),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(G.trigger(this._element,ho).defaultPrevented||(this._element.classList.add(Xi),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Xi,Vi),G.trigger(this._element,uo)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Vi),super.dispose()}isShown(){return this._element.classList.contains(Vi)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(a,b){switch(a.type){case"mouseover":case"mouseout":this._hasMouseInteraction=b;break;case"focusin":case"focusout":this._hasKeyboardInteraction=b}if(b)return void this._clearTimeout();const I=a.relatedTarget;this._element===I||this._element.contains(I)||this._maybeScheduleHide()}_setListeners(){G.on(this._element,so,a=>this._onInteraction(a,!0)),G.on(this._element,oo,a=>this._onInteraction(a,!1)),G.on(this._element,ao,a=>this._onInteraction(a,!0)),G.on(this._element,lo,a=>this._onInteraction(a,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(a){return this.each(function(){const b=Bi.getOrCreateInstance(this,a);if("string"==typeof a){if(void 0===b[a])throw new TypeError(`No method named "${a}"`);b[a](this)}})}}return he(Bi),w(Bi),{Alert:ke,Button:_e,Carousel:F,Collapse:lt,Dropdown:ri,Modal:vi,Offcanvas:di,Popover:qi,ScrollSpy:Oi,Tab:wi,Toast:Bi,Tooltip:_i}}),function(e,t){"object"==typeof exports&&typeof module<"u"?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.RSVP=e.RSVP||{})}(this,function(e){function t(E,T){for(var N=0,Q=E.length;N<Q;N++)if(E[N]===T)return N;return-1}function i(E){var T=E._promiseCallbacks;return T||(T=E._promiseCallbacks={}),T}var r={mixin:function(T){return T.on=this.on,T.off=this.off,T.trigger=this.trigger,T._promiseCallbacks=void 0,T},on:function(T,N){if("function"!=typeof N)throw new TypeError("Callback must be a function");var Q=i(this),se=void 0;(se=Q[T])||(se=Q[T]=[]),-1===t(se,N)&&se.push(N)},off:function(T,N){var re,Q=i(this),se=void 0;N?-1!==(re=t(se=Q[T],N))&&se.splice(re,1):Q[T]=[]},trigger:function(T,N,Q){var re;if(re=i(this)[T])for(var je=0;je<re.length;je++)(0,re[je])(N,Q)}},n={instrument:!1};function l(E,T){if("onerror"!==E)return 2!==arguments.length?n[E]:void(n[E]=T);n.on("error",T)}function d(E){return"function"==typeof E}r.mixin(n);var h=Array.isArray?Array.isArray:function(E){return"[object Array]"===Object.prototype.toString.call(E)},u=Date.now||function(){return(new Date).getTime()};function g(){}var _=Object.create||function(E){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof E)throw new TypeError("Argument must be an object");return g.prototype=E,new g},m=[];function A(E,T,N){1===m.push({name:E,payload:{key:T._guidKey,id:T._id,eventName:E,detail:T._result,childId:N&&N._id,label:T._label,timeStamp:u(),error:n["instrument-with-stack"]?new Error(T._label):null}})&&function w(){setTimeout(function(){for(var E=0;E<m.length;E++){var T=m[E],N=T.payload;N.guid=N.key+N.id,N.childGuid=N.key+N.childId,N.error&&(N.stack=N.error.stack),n.trigger(T.name,T.payload)}m.length=0},50)}()}function j(E,T){if(E&&"object"==typeof E&&E.constructor===this)return E;var Q=new this(z,T);return Ae(Q,E),Q}function z(){}var O=void 0,D=1,M=2,B=new Be;function W(E){try{return E.then}catch(T){return B.error=T,B}}function Ie(E,T,N){T.constructor===E.constructor&&N===Ne&&E.constructor.resolve===j?function ge(E,T){T._state===D?J(E,T._result):T._state===M?(T._onError=null,ae(E,T._result)):me(T,void 0,function(N){T!==N?Ae(E,N):J(E,N)},function(N){return ae(E,N)})}(E,T):N===B?(ae(E,B.error),B.error=null):void 0===N?J(E,T):d(N)?function Ue(E,T,N){n.async(function(Q){var se=!1,re=function Se(E,T,N,Q){try{E.call(T,N,Q)}catch(se){return se}}(N,T,function(ce){se||(se=!0,T!==ce?Ae(Q,ce):J(Q,ce))},function(ce){se||(se=!0,ae(Q,ce))});!se&&re&&(se=!0,ae(Q,re))},E)}(E,T,N):J(E,T)}function Ae(E,T){E===T?J(E,T):function s(E){return"function"==typeof E||"object"==typeof E&&null!==E}(T)?Ie(E,T,W(T)):J(E,T)}function q(E){E._onError&&E._onError(E._result),G(E)}function J(E,T){E._state===O&&(E._result=T,E._state=D,0===E._subscribers.length?n.instrument&&A("fulfilled",E):n.async(G,E))}function ae(E,T){E._state===O&&(E._state=M,E._result=T,n.async(q,E))}function me(E,T,N,Q){var se=E._subscribers,re=se.length;E._onError=null,se[re]=T,se[re+D]=N,se[re+M]=Q,0===re&&E._state&&n.async(G,E)}function G(E){var T=E._subscribers,N=E._state;if(n.instrument&&A(N===D?"fulfilled":"rejected",E),0!==T.length){for(var Q=void 0,se=void 0,re=E._result,ce=0;ce<T.length;ce+=3)se=T[ce+N],(Q=T[ce])?Fe(N,Q,se,re):se(re);E._subscribers.length=0}}function Be(){this.error=null}var We=new Be;function Fe(E,T,N,Q){var se=d(N),re=void 0,ce=void 0,je=void 0,Ve=void 0;if(se){if(re=function Xe(E,T){try{return E(T)}catch(N){return We.error=N,We}}(N,Q),re===We?(Ve=!0,ce=re.error,re.error=null):je=!0,T===re)return void ae(T,function X(){return new TypeError("A promises callback cannot return that same promise.")}())}else re=Q,je=!0;T._state!==O||(se&&je?Ae(T,re):Ve?ae(T,ce):E===D?J(T,re):E===M&&ae(T,re))}function Ne(E,T,N){var Q=arguments,se=this,re=se._state;if(re===D&&!E||re===M&&!T)return n.instrument&&A("chained",se,se),se;se._onError=null;var Ve,ce=new se.constructor(z,N),je=se._result;return n.instrument&&A("chained",se,ce),re?(Ve=Q[re-1],n.async(function(){return Fe(re,ce,Ve,je)})):me(se,ce,E,T),ce}function be(E,T,N){return E===D?{state:"fulfilled",value:N}:{state:"rejected",reason:N}}function Z(E,T,N,Q){this._instanceConstructor=E,this.promise=new E(z,Q),this._abortOnReject=N,this._validateInput(T)?(this._input=T,this.length=T.length,this._remaining=T.length,this._init(),0===this.length?J(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&J(this.promise,this._result))):ae(this.promise,this._validationError())}Z.prototype._validateInput=function(E){return h(E)},Z.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},Z.prototype._init=function(){this._result=new Array(this.length)},Z.prototype._enumerate=function(){for(var E=this.length,T=this.promise,N=this._input,Q=0;T._state===O&&Q<E;Q++)this._eachEntry(N[Q],Q)},Z.prototype._settleMaybeThenable=function(E,T){var N=this._instanceConstructor,Q=N.resolve;if(Q===j){var se=W(E);if(se===Ne&&E._state!==O)E._onError=null,this._settledAt(E._state,T,E._result);else if("function"!=typeof se)this._remaining--,this._result[T]=this._makeResult(D,T,E);else if(N===Ee){var re=new N(z);Ie(re,E,se),this._willSettleAt(re,T)}else this._willSettleAt(new N(function(ce){return ce(E)}),T)}else this._willSettleAt(Q(E),T)},Z.prototype._eachEntry=function(E,T){!function c(E){return"object"==typeof E&&null!==E}(E)?(this._remaining--,this._result[T]=this._makeResult(D,T,E)):this._settleMaybeThenable(E,T)},Z.prototype._settledAt=function(E,T,N){var Q=this.promise;Q._state===O&&(this._remaining--,this._abortOnReject&&E===M?ae(Q,N):this._result[T]=this._makeResult(E,T,N)),0===this._remaining&&J(Q,this._result)},Z.prototype._makeResult=function(E,T,N){return N},Z.prototype._willSettleAt=function(E,T){var N=this;me(E,void 0,function(Q){return N._settledAt(D,T,Q)},function(Q){return N._settledAt(M,T,Q)})};var Te="rsvp_"+u()+"-",ke=0;function Ee(E,T){this._id=ke++,this._label=T,this._state=void 0,this._result=void 0,this._subscribers=[],n.instrument&&A("created",this),z!==E&&("function"!=typeof E&&function Qe(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Ee?function Ze(E,T){var N=!1;try{T(function(Q){N||(N=!0,Ae(E,Q))},function(Q){N||(N=!0,ae(E,Q))})}catch(Q){ae(E,Q)}}(this,E):function _e(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function It(){this.value=void 0}Ee.cast=j,Ee.all=function he(E,T){return new Z(this,E,!0,T).promise},Ee.race=function ve(E,T){var Q=new this(z,T);if(!h(E))return ae(Q,new TypeError("You must pass an array to race.")),Q;for(var se=0;Q._state===O&&se<E.length;se++)me(this.resolve(E[se]),void 0,function(re){return Ae(Q,re)},function(re){return ae(Q,re)});return Q},Ee.resolve=j,Ee.reject=function we(E,T){var Q=new this(z,T);return ae(Q,E),Q},Ee.prototype={constructor:Ee,_guidKey:Te,_onError:function(T){var N=this;n.after(function(){N._onError&&n.trigger("error",T,N._label)})},then:Ne,catch:function(T,N){return this.then(void 0,T,N)},finally:function(T,N){var se=this.constructor;return this.then(function(re){return se.resolve(T()).then(function(){return re})},function(re){return se.resolve(T()).then(function(){throw re})},N)}};var mt=new It,Ht=new It;function yt(E,T,N){try{E.apply(T,N)}catch(Q){return mt.value=Q,mt}}function $e(E,T){return{then:function(Q,se){return E.call(T,Q,se)}}}function Ye(E,T){var N=function(){for(var re=arguments.length,ce=new Array(re+1),je=!1,Ve=0;Ve<re;++Ve){var et=arguments[Ve];if(!je){if((je=dt(et))===Ht){var wt=new Ee(z);return ae(wt,Ht.value),wt}je&&!0!==je&&(et=$e(je,et))}ce[Ve]=et}var vt=new Ee(z);return ce[re]=function(Lt,St){Lt?ae(vt,Lt):void 0===T?Ae(vt,St):!0===T?Ae(vt,function Vt(E){for(var T=E.length,N=new Array(T-1),Q=1;Q<T;Q++)N[Q-1]=E[Q];return N}(arguments)):h(T)?Ae(vt,function jt(E,T){for(var N={},Q=E.length,se=new Array(Q),re=0;re<Q;re++)se[re]=E[re];for(var ce=0;ce<T.length;ce++)N[T[ce]]=se[ce+1];return N}(arguments,T)):Ae(vt,St)},je?function qe(E,T,N,Q){return Ee.all(T).then(function(se){var re=yt(N,Q,se);return re===mt&&ae(E,re.value),E})}(vt,ce,E,this):function Nt(E,T,N,Q){var se=yt(N,Q,T);return se===mt&&ae(E,se.value),E}(vt,ce,E,this)};return N.__proto__=E,N}function dt(E){return!(!E||"object"!=typeof E)&&(E.constructor===Ee||function Bt(E){try{return E.then}catch(T){return mt.value=T,mt}}(E))}function Pe(E,T){return Ee.all(E,T)}function rt(E,T,N){this._superConstructor(E,T,!1,N)}function Ke(E,T){return new rt(Ee,E,T).promise}function Pt(E,T){return Ee.race(E,T)}function pt(E,T,N){this._superConstructor(E,T,!0,N)}function Mt(E,T){return new pt(Ee,E,T).promise}function Dt(E,T,N){this._superConstructor(E,T,!1,N)}function R(E,T){return new Dt(Ee,E,T).promise}function ue(E){throw setTimeout(function(){throw E}),E}function de(E){var T={resolve:void 0,reject:void 0};return T.promise=new Ee(function(N,Q){T.resolve=N,T.reject=Q},E),T}function H(E,T,N){return Ee.all(E,N).then(function(Q){if(!d(T))throw new TypeError("You must pass a function as map's second argument.");for(var se=Q.length,re=new Array(se),ce=0;ce<se;ce++)re[ce]=T(Q[ce]);return Ee.all(re,N)})}function ie(E,T){return Ee.resolve(E,T)}function C(E,T){return Ee.reject(E,T)}function fe(E,T){return Ee.all(E,T)}function p(E,T,N){var Q=h(E)?fe(E,N):function Re(E,T){return Ee.resolve(E,T).then(function(N){return fe(N,T)})}(E,N);return Q.then(function(se){if(!d(T))throw new TypeError("You must pass a function as filter's second argument.");for(var re=se.length,ce=new Array(re),je=0;je<re;je++)ce[je]=T(se[je]);return fe(ce,N).then(function(Ve){for(var et=new Array(re),wt=0,vt=0;vt<re;vt++)Ve[vt]&&(et[wt]=se[vt],wt++);return et.length=wt,et})})}(rt.prototype=_(Z.prototype))._superConstructor=Z,rt.prototype._makeResult=be,rt.prototype._validationError=function(){return new Error("allSettled must be called with an array")},(pt.prototype=_(Z.prototype))._superConstructor=Z,pt.prototype._init=function(){this._result={}},pt.prototype._validateInput=function(E){return E&&"object"==typeof E},pt.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},pt.prototype._enumerate=function(){var E=this,T=E.promise,N=E._input,Q=[];for(var se in N)T._state===O&&Object.prototype.hasOwnProperty.call(N,se)&&Q.push({position:se,entry:N[se]});var re=Q.length;E._remaining=re;for(var ce=void 0,je=0;T._state===O&&je<re;je++)E._eachEntry((ce=Q[je]).entry,ce.position)},(Dt.prototype=_(pt.prototype))._superConstructor=Z,Dt.prototype._makeResult=be,Dt.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var ne=0,oe=void 0;function F(E,T){gt[ne]=E,gt[ne+1]=T,2===(ne+=2)&&lt()}var V=typeof window<"u"?window:void 0,te=V||{},Oe=te.MutationObserver||te.WebKitMutationObserver,ye=typeof self>"u"&&typeof process<"u"&&"[object process]"==={}.toString.call(process),De=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ct(){return function(){return setTimeout(Ut,1)}}var gt=new Array(1e3);function Ut(){for(var E=0;E<ne;E+=2)(0,gt[E])(gt[E+1]),gt[E]=void 0,gt[E+1]=void 0;ne=0}var f,lt=void 0;if(lt=ye?function ot(){var E=process.nextTick,T=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(T)&&"0"===T[1]&&"10"===T[2]&&(E=setImmediate),function(){return E(Ut)}}():Oe?function He(){var E=0,T=new Oe(Ut),N=document.createTextNode("");return T.observe(N,{characterData:!0}),function(){return N.data=E=++E%2}}():De?function at(){var E=new MessageChannel;return E.port1.onmessage=Ut,function(){return E.port2.postMessage(0)}}():void 0===V&&"function"==typeof require?function Kt(){try{var T=require("vertx");return oe=T.runOnLoop||T.runOnContext,function Xt(){return typeof oe<"u"?function(){oe(Ut)}:ct()}()}catch{return ct()}}():ct(),"object"==typeof self)self;else{if("object"!=typeof global)throw new Error("no global: `self` or `global` found");global}function v(E,T,N){return T in E?Object.defineProperty(E,T,{value:N,enumerable:!0,configurable:!0,writable:!0}):E[T]=N,E}n.async=F,n.after=function(E){return setTimeout(E,0)};var y=ie,x=function(T,N){return n.async(T,N)};function S(){n.on.apply(n,arguments)}function P(){n.off.apply(n,arguments)}if(typeof window<"u"&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var L=window.__PROMISE_INSTRUMENTATION__;for(var U in l("instrument",!0),L)L.hasOwnProperty(U)&&S(U,L[U])}var Y=(v(f={asap:F,cast:y,Promise:Ee,EventTarget:r,all:Pe,allSettled:Ke,race:Pt,hash:Mt,hashSettled:R,rethrow:ue,defer:de,denodeify:Ye,configure:l,on:S,off:P,resolve:ie,reject:C,map:H},"async",x),v(f,"filter",p),f);e.default=Y,e.asap=F,e.cast=y,e.Promise=Ee,e.EventTarget=r,e.all=Pe,e.allSettled=Ke,e.race=Pt,e.hash=Mt,e.hashSettled=R,e.rethrow=ue,e.defer=de,e.denodeify=Ye,e.configure=l,e.on=S,e.off=P,e.resolve=ie,e.reject=C,e.map=H,e.async=x,e.filter=p,Object.defineProperty(e,"__esModule",{value:!0})}),(EPUBJS=EPUBJS||{}).VERSION="0.2.19",EPUBJS.plugins=EPUBJS.plugins||{},EPUBJS.filePath=EPUBJS.filePath||"/epubjs/",EPUBJS.Render={},function(e){var i=window.ePub=function(){var r,n;return typeof arguments[0]<"u"&&("string"==typeof arguments[0]||arguments[0]instanceof ArrayBuffer)&&(r=arguments[0],arguments[1]&&"object"==typeof arguments[1]?(n=arguments[1]).bookPath=r:n={bookPath:r}),arguments[0]&&"object"==typeof arguments[0]&&!(arguments[0]instanceof ArrayBuffer)&&(n=arguments[0]),new EPUBJS.Book(n)};"function"==typeof define&&define.amd?define(["rsvp","jszip","localforage"],function(r,n,l){return i}):typeof module<"u"&&module.exports&&(global.RSVP=require("rsvp"),global.JSZip=require("jszip"),global.localForage=require("localforage"),module.exports=i)}(),EPUBJS.Book=function(e){this.settings=EPUBJS.core.defaults(e||{},{bookPath:void 0,bookKey:void 0,packageUrl:void 0,storage:!1,fromStorage:!1,saved:!1,online:!0,contained:!1,width:void 0,height:void 0,layoutOveride:void 0,orientation:void 0,minSpreadWidth:768,gap:"auto",version:1,restore:!1,reload:!1,goto:!1,styles:{},classes:[],headTags:{},withCredentials:!1,render_method:"Iframe",displayLastPage:!1}),this.settings.EPUBJSVERSION=EPUBJS.VERSION,this.spinePos=0,this.stored=!1,this.online=this.settings.online||navigator.onLine,this.networkListeners(),this.ready={manifest:new RSVP.defer,spine:new RSVP.defer,metadata:new RSVP.defer,cover:new RSVP.defer,toc:new RSVP.defer,pageList:new RSVP.defer},this.readyPromises=[this.ready.manifest.promise,this.ready.spine.promise,this.ready.metadata.promise,this.ready.cover.promise,this.ready.toc.promise],this.pageList=[],this.pagination=new EPUBJS.Pagination,this.pageListReady=this.ready.pageList.promise,this.ready.all=RSVP.all(this.readyPromises),this.ready.all.then(this._ready.bind(this)),this.isRendered=!1,this._q=EPUBJS.core.queue(this),this._rendering=!1,this._displayQ=EPUBJS.core.queue(this),this._moving=!1,this._gotoQ=EPUBJS.core.queue(this),this.renderer=new EPUBJS.Renderer(this.settings.render_method),this.renderer.setMinSpreadWidth(this.settings.minSpreadWidth),this.renderer.setGap(this.settings.gap),this.listenToRenderer(this.renderer),this.defer_opened=new RSVP.defer,this.opened=this.defer_opened.promise,this.store=!1,!1!==this.settings.storage&&this.fromStorage(!0),("string"==typeof this.settings.bookPath||this.settings.bookPath instanceof ArrayBuffer)&&this.open(this.settings.bookPath,this.settings.reload),window.addEventListener("beforeunload",this.unload.bind(this),!1)},EPUBJS.Book.prototype.open=function(e,t){var r,i=this,n=new RSVP.defer;return this.settings.bookPath=e,this.settings.contained||this.isContained(e)?(this.settings.contained=this.contained=!0,this.bookUrl="",r=this.unarchive(e).then(function(){return i.loadPackage()})):(this.bookUrl=this.urlFrom(e),r=this.loadPackage()),this.settings.restore&&!t&&localStorage?r.then(function(l){var s=i.packageIdentifier(l);i.restore(s)||i.unpack(l),n.resolve(),i.defer_opened.resolve()}):r.then(function(l){i.unpack(l),n.resolve(),i.defer_opened.resolve()}),this._registerReplacements(this.renderer),n.promise},EPUBJS.Book.prototype.loadPackage=function(e){var l,t=this,i=new EPUBJS.Parser,r=e||"META-INF/container.xml";return(l=this.settings.packageUrl?t.loadXml(t.settings.packageUrl):t.loadXml(t.bookUrl+r).then(function(s){return i.container(s)}).then(function(s){return t.settings.contentsPath=t.bookUrl+s.basePath,t.settings.packageUrl=t.bookUrl+s.packagePath,t.settings.encoding=s.encoding,t.loadXml(t.settings.packageUrl)})).catch(function(s){console.error("Could not load book at: "+r),t.trigger("book:loadFailed",r)}),l},EPUBJS.Book.prototype.packageIdentifier=function(e){return(new EPUBJS.Parser).identifier(e)},EPUBJS.Book.prototype.unpack=function(e){var t=this,i=new EPUBJS.Parser;t.contents=i.packageContents(e,t.settings.contentsPath),t.manifest=t.contents.manifest,t.spine=t.contents.spine,t.spineIndexByURL=t.contents.spineIndexByURL,t.metadata=t.contents.metadata,t.settings.bookKey||(t.settings.bookKey=t.generateBookKey(t.metadata.identifier)),t.globalLayoutProperties=t.parseLayoutProperties(t.metadata),t.contents.coverPath&&(t.cover=t.contents.cover=t.settings.contentsPath+t.contents.coverPath),t.spineNodeIndex=t.contents.spineNodeIndex,t.ready.manifest.resolve(t.contents.manifest),t.ready.spine.resolve(t.contents.spine),t.ready.metadata.resolve(t.contents.metadata),t.ready.cover.resolve(t.contents.cover),t.locations=new EPUBJS.Locations(t.spine,t.store,t.settings.withCredentials),t.contents.navPath?(t.settings.navUrl=t.settings.contentsPath+t.contents.navPath,t.loadXml(t.settings.navUrl).then(function(r){return i.nav(r,t.spineIndexByURL,t.spine)}).then(function(r){t.toc=t.contents.toc=r,t.ready.toc.resolve(t.contents.toc)},function(r){t.ready.toc.resolve(!1)}),t.loadXml(t.settings.navUrl).then(function(r){return i.pageList(r,t.spineIndexByURL,t.spine)}).then(function(r){var n=new EPUBJS.EpubCFI,l=0;0!==r.length&&(t.pageList=t.contents.pageList=r,t.pageList.forEach(function(s){s.cfi||(l+=1,n.generateCfiFromHref(s.href,t).then(function(d){s.cfi=d,s.packageUrl=t.settings.packageUrl,0==(l-=1)&&(t.pagination.process(t.pageList),t.ready.pageList.resolve(t.pageList))}))}),l||(t.pagination.process(t.pageList),t.ready.pageList.resolve(t.pageList)))},function(r){t.ready.pageList.resolve([])})):t.contents.tocPath?(t.settings.tocUrl=t.settings.contentsPath+t.contents.tocPath,t.loadXml(t.settings.tocUrl).then(function(r){return i.toc(r,t.spineIndexByURL,t.spine)},function(r){console.error(r)}).then(function(r){t.toc=t.contents.toc=r,t.ready.toc.resolve(t.contents.toc)},function(r){t.ready.toc.resolve(!1)})):t.ready.toc.resolve(!1)},EPUBJS.Book.prototype.createHiddenRender=function(e,t,i){var s,d,r=this.element.getBoundingClientRect(),n=t||this.settings.width||r.width,l=i||this.settings.height||r.height;return e.setMinSpreadWidth(this.settings.minSpreadWidth),e.setGap(this.settings.gap),this._registerReplacements(e),this.settings.forceSingle&&e.forceSingle(!0),(s=document.createElement("div")).style.visibility="hidden",s.style.overflow="hidden",s.style.width="0",s.style.height="0",this.element.appendChild(s),(d=document.createElement("div")).style.visibility="hidden",d.style.overflow="hidden",d.style.width=n+"px",d.style.height=l+"px",s.appendChild(d),e.initialize(d,this.settings.width,this.settings.height),s},EPUBJS.Book.prototype.generatePageList=function(e,t,i){var r=[],n=new EPUBJS.Renderer(this.settings.render_method,!1),l=this.createHiddenRender(n,e,t),s=new RSVP.defer,d=-1,c=this.spine.length,h=0,u=function(_){var m,w=d+1,A=_||new RSVP.defer;if(w>=c)A.resolve();else{if(i&&i.cancelled)return n.remove(),this.element.removeChild(l),void A.reject(new Error("User cancelled"));m=new EPUBJS.Chapter(this.spine[d=w],this.store),n.displayChapter(m,this.globalLayoutProperties).then(function(X){n.pageMap.forEach(function(z){r.push({cfi:z.start,page:h+=1})}),n.pageMap.length%2>0&&n.spreads&&r.push({cfi:n.pageMap[n.pageMap.length-1].end,page:h+=1}),setTimeout(function(){u(A)},1)})}return A.promise}.bind(this);return u().then(function(){n.remove(),this.element.removeChild(l),s.resolve(r)}.bind(this),function(_){s.reject(_)}),s.promise},EPUBJS.Book.prototype.generatePagination=function(e,t,i){var r=this,n=new RSVP.defer;return this.ready.spine.promise.then(function(){r.generatePageList(e,t,i).then(function(l){r.pageList=r.contents.pageList=l,r.pagination.process(l),r.ready.pageList.resolve(r.pageList),n.resolve(r.pageList)},function(l){n.reject(l)})}),n.promise},EPUBJS.Book.prototype.loadPagination=function(e){var t;return(t="string"==typeof e?JSON.parse(e):e)&&t.length&&(this.pageList=t,this.pagination.process(this.pageList),this.ready.pageList.resolve(this.pageList)),this.pageList},EPUBJS.Book.prototype.getPageList=function(){return this.ready.pageList.promise},EPUBJS.Book.prototype.getMetadata=function(){return this.ready.metadata.promise},EPUBJS.Book.prototype.getToc=function(){return this.ready.toc.promise},EPUBJS.Book.prototype.networkListeners=function(){var e=this;window.addEventListener("offline",function(t){e.online=!1,e.settings.storage&&e.fromStorage(!0),e.trigger("book:offline")},!1),window.addEventListener("online",function(t){e.online=!0,e.settings.storage&&e.fromStorage(!1),e.trigger("book:online")},!1)},EPUBJS.Book.prototype.listenToRenderer=function(e){var t=this;e.Events.forEach(function(i){e.on(i,function(r){t.trigger(i,r)})}),e.on("renderer:visibleRangeChanged",function(i){var r,n,l,s=[];this.pageList.length>0&&(r=this.pagination.pageFromCfi(i.start),l=this.pagination.percentageFromPage(r),s.push(r),i.end&&(n=this.pagination.pageFromCfi(i.end),s.push(n)),this.trigger("book:pageChanged",{anchorPage:r,percentage:l,pageRange:s}))}.bind(this)),e.on("render:loaded",this.loadChange.bind(this))},EPUBJS.Book.prototype.loadChange=function(e){var n,t=EPUBJS.core.uri(e),i=EPUBJS.core.uri(this.currentChapter.absolute);t.path!=i.path?(console.warn("Miss Match",t.path,this.currentChapter.absolute),n=new EPUBJS.Chapter(this.spine[this.spineIndexByURL[t.filename]],this.store),this.currentChapter=n,this.renderer.currentChapter=n,this.renderer.afterLoad(this.renderer.render.docEl),this.renderer.beforeDisplay(function(){this.renderer.afterDisplay()}.bind(this))):this._rendering||this.renderer.reformat()},EPUBJS.Book.prototype.unlistenToRenderer=function(e){e.Events.forEach(function(t){e.off(t)})},EPUBJS.Book.prototype.coverUrl=function(){var e=this.ready.cover.promise.then(function(t){return this.settings.fromStorage?this.store.getUrl(this.contents.cover):this.settings.contained?this.zip.getUrl(this.contents.cover):this.contents.cover}.bind(this));return e.then(function(t){this.cover=t}.bind(this)),e},EPUBJS.Book.prototype.loadXml=function(e){return this.settings.fromStorage?this.store.getXml(e,this.settings.encoding):this.settings.contained?this.zip.getXml(e,this.settings.encoding):EPUBJS.core.request(e,"xml",this.settings.withCredentials)},EPUBJS.Book.prototype.urlFrom=function(e){var d,t=EPUBJS.core.uri(e),i=t.protocol,r="/"==t.path[0],n=window.location,l=n.origin||n.protocol+"//"+n.host,s=document.getElementsByTagName("base");return s.length&&(d=s[0].href),t.protocol?t.origin+t.path:!i&&r?(d||l)+t.path:i||r?void 0:EPUBJS.core.resolveUrl(d||n.pathname,t.path)},EPUBJS.Book.prototype.unarchive=function(e){return this.zip=new EPUBJS.Unarchiver,this.store=this.zip,this.zip.open(e)},EPUBJS.Book.prototype.isContained=function(e){if(e instanceof ArrayBuffer)return!0;var t=EPUBJS.core.uri(e);return!(!t.extension||"epub"!=t.extension&&"zip"!=t.extension)},EPUBJS.Book.prototype.isSaved=function(e){var t;return!(!localStorage||(t=localStorage.getItem(e),!localStorage||null===t))},EPUBJS.Book.prototype.generateBookKey=function(e){return"epubjs:"+EPUBJS.VERSION+":"+window.location.host+":"+e},EPUBJS.Book.prototype.saveContents=function(){if(!localStorage)return!1;localStorage.setItem(this.settings.bookKey,JSON.stringify(this.contents))},EPUBJS.Book.prototype.removeSavedContents=function(){if(!localStorage)return!1;localStorage.removeItem(this.settings.bookKey)},EPUBJS.Book.prototype.renderTo=function(e){var t=this;if(EPUBJS.core.isElement(e))this.element=e;else{if("string"!=typeof e)return void console.error("Not an Element");this.element=EPUBJS.core.getEl(e)}return this.opened.then(function(){return t.renderer.initialize(t.element,t.settings.width,t.settings.height),t.metadata.direction&&t.renderer.setDirection(t.metadata.direction),t._rendered(),t.startDisplay()})},EPUBJS.Book.prototype.startDisplay=function(){return this.settings.goto?this.goto(this.settings.goto):this.settings.previousLocationCfi?this.gotoCfi(this.settings.previousLocationCfi):this.displayChapter(this.spinePos,this.settings.displayLastPage)},EPUBJS.Book.prototype.restore=function(e){var d,t=this,i=["manifest","spine","metadata","cover","toc","spineNodeIndex","spineIndexByURL","globalLayoutProperties"],r=!1,n=this.generateBookKey(e),l=localStorage.getItem(n),s=i.length;if(this.settings.clearSaved&&(r=!0),!r&&"undefined"!=l&&null!==l)for(t.contents=JSON.parse(l),d=0;d<s;d++){var c=i[d];if(!t.contents[c]){r=!0;break}t[c]=t.contents[c]}return!(r||!l||!this.contents||!this.settings.contentsPath||(this.settings.bookKey=n,this.ready.manifest.resolve(this.manifest),this.ready.spine.resolve(this.spine),this.ready.metadata.resolve(this.metadata),this.ready.cover.resolve(this.cover),this.ready.toc.resolve(this.toc),0))},EPUBJS.Book.prototype.displayChapter=function(e,t,i){var n,l,s,o,r=this,c=i||new RSVP.defer;return this.isRendered?this._rendering||this.renderer._moving?(this._displayQ.enqueue("displayChapter",[e,t,c]),c.promise):(EPUBJS.core.isNumber(e)?s=e:(l=new EPUBJS.EpubCFI(e),s=l.spinePos),(s<0||s>=this.spine.length)&&(console.warn("Not A Valid Location"),s=0,t=!1,l=!1),o=new EPUBJS.Chapter(this.spine[s],this.store),this._rendering=!0,this._needsAssetReplacement()&&o.registerHook("beforeChapterRender",[EPUBJS.replace.head,EPUBJS.replace.resources,EPUBJS.replace.posters,EPUBJS.replace.svg],!0),r.currentChapter=o,n=r.renderer.displayChapter(o,this.globalLayoutProperties),l?r.renderer.gotoCfi(l):t&&r.renderer.lastPage(),n.then(function(h){r.spinePos=s,c.resolve(r.renderer),!1===r.settings.fromStorage&&!1===r.settings.contained&&r.preloadNextChapter(),r._rendering=!1,r._displayQ.dequeue(),0===r._displayQ.length()&&r._gotoQ.dequeue()},function(h){console.error("Could not load Chapter: "+o.absolute,h),r.trigger("book:chapterLoadFailed",o.absolute),r._rendering=!1,c.reject(h)}),c.promise):(this._q.enqueue("displayChapter",arguments),c.reject({message:"Rendering",stack:(new Error).stack}),c.promise)},EPUBJS.Book.prototype.nextPage=function(t){return t=t||new RSVP.defer,this.isRendered?this.renderer.nextPage()?(t.resolve(!0),t.promise):this.nextChapter(t):(this._q.enqueue("nextPage",[t]),t.promise)},EPUBJS.Book.prototype.prevPage=function(t){return t=t||new RSVP.defer,this.isRendered?this.renderer.prevPage()?(t.resolve(!0),t.promise):this.prevChapter(t):(this._q.enqueue("prevPage",[t]),t.promise)},EPUBJS.Book.prototype.nextChapter=function(t){if(t=t||new RSVP.defer,this.spinePos<this.spine.length-1){for(var i=this.spinePos+1;this.spine[i]&&this.spine[i].linear&&"no"==this.spine[i].linear;)i++;if(i<this.spine.length)return this.displayChapter(i,!1,t)}return this.trigger("book:atEnd"),t.resolve(!0),t.promise},EPUBJS.Book.prototype.prevChapter=function(t){if(t=t||new RSVP.defer,this.spinePos>0){for(var i=this.spinePos-1;this.spine[i]&&this.spine[i].linear&&"no"==this.spine[i].linear;)i--;if(i>=0)return this.displayChapter(i,!0,t)}return this.trigger("book:atStart"),t.resolve(!0),t.promise},EPUBJS.Book.prototype.getCurrentLocationCfi=function(){return!!this.isRendered&&this.renderer.currentLocationCfi},EPUBJS.Book.prototype.goto=function(e){return 0===e.indexOf("epubcfi(")?this.gotoCfi(e):e.indexOf("%")===e.length-1?this.gotoPercentage(parseInt(e.substring(0,e.length-1))/100):"number"==typeof e||!1===isNaN(e)?this.gotoPage(e):this.gotoHref(e)},EPUBJS.Book.prototype.gotoCfi=function(e,t){var i,r,n,s,c=t||new RSVP.defer;return this.isRendered?this._moving||this._rendering?(console.warn("Renderer is moving"),this._gotoQ.enqueue("gotoCfi",[e,c]),!1):-1!=(r=(i=new EPUBJS.EpubCFI(e)).spinePos)&&(n=this.spine[r],s=c.promise,this._moving=!0,this.currentChapter&&this.spinePos===r?(this.renderer.gotoCfi(i),this._moving=!1,c.resolve(this.renderer.currentLocationCfi)):((!n||-1==r)&&(n=this.spine[r=0]),this.displayChapter(e).then(function(o){this._moving=!1,c.resolve(o.currentLocationCfi)}.bind(this),function(){this._moving=!1}.bind(this))),s.then(function(){this._gotoQ.dequeue()}.bind(this)),s):(console.warn("Not yet Rendered"),this.settings.previousLocationCfi=e,!1)},EPUBJS.Book.prototype.gotoHref=function(e,t){var i,r,n,l,s,d=t||new RSVP.defer;return this.isRendered?this._moving||this._rendering?(this._gotoQ.enqueue("gotoHref",[e,d]),!1):(i=e.split("#"),n=i[1]||!1,l=-1==(r=i[0]).search("://")?r.replace(EPUBJS.core.uri(this.settings.contentsPath).path,""):r.replace(this.settings.contentsPath,""),s=this.spineIndexByURL[l],r||(s=this.currentChapter?this.currentChapter.spinePos:0),"number"==typeof s&&(this.currentChapter&&s==this.currentChapter.spinePos?(n?this.renderer.section(n):this.renderer.firstPage(),d.resolve(this.renderer.currentLocationCfi),d.promise.then(function(){this._gotoQ.dequeue()}.bind(this)),d.promise):this.displayChapter(s).then(function(){n&&this.renderer.section(n),d.resolve(this.renderer.currentLocationCfi)}.bind(this)))):(this.settings.goto=e,!1)},EPUBJS.Book.prototype.gotoPage=function(e){var t=this.pagination.cfiFromPage(e);return this.gotoCfi(t)},EPUBJS.Book.prototype.gotoPercentage=function(e){var t=this.pagination.pageFromPercentage(e);return this.gotoPage(t)},EPUBJS.Book.prototype.preloadNextChapter=function(){var e,t=this.spinePos+1;if(t>=this.spine.length)return!1;(e=new EPUBJS.Chapter(this.spine[t]))&&EPUBJS.core.request(e.absolute)},EPUBJS.Book.prototype.storeOffline=function(){var e=this,t=EPUBJS.core.values(this.manifest);return this.store.put(t).then(function(){e.settings.stored=!0,e.trigger("book:stored")})},EPUBJS.Book.prototype.availableOffline=function(){return this.settings.stored>0},EPUBJS.Book.prototype.toStorage=function(){var e=this.settings.bookKey;this.store.isStored(e).then(function(t){return!0===t?(this.settings.stored=!0,!0):this.storeOffline().then(function(){this.store.token(e,!0)}.bind(this))}.bind(this))},EPUBJS.Book.prototype.fromStorage=function(e){this.contained||this.settings.contained||(this.online&&this.opened.then(this.toStorage.bind(this)),this.store&&this.settings.fromStorage&&!1===e?(this.settings.fromStorage=!1,this.store.off("offline"),this.store=!1):this.settings.fromStorage||(this.store=new EPUBJS.Storage(this.settings.credentials),this.store.on("offline",function(i){i?(this.offline=!0,this.settings.fromStorage=!0,this.trigger("book:offline")):(this.offline=!1,this.settings.fromStorage=!1,this.trigger("book:online"))}.bind(this))))},EPUBJS.Book.prototype.setStyle=function(e,t,i){if(!this.isRendered)return this._q.enqueue("setStyle",arguments);this.settings.styles[e]=t,this.renderer.setStyle(e,t,i),-1===["color","background","background-color"].indexOf(e)&&this.renderer.reformat()},EPUBJS.Book.prototype.removeStyle=function(e){if(!this.isRendered)return this._q.enqueue("removeStyle",arguments);this.renderer.removeStyle(e),this.renderer.reformat(),delete this.settings.styles[e]},EPUBJS.Book.prototype.resetClasses=function(e){if(!this.isRendered)return this._q.enqueue("setClasses",arguments);e.constructor===String&&(e=[e]),this.settings.classes=e,this.renderer.setClasses(this.settings.classes),this.renderer.reformat()},EPUBJS.Book.prototype.addClass=function(e){if(!this.isRendered)return this._q.enqueue("addClass",arguments);-1==this.settings.classes.indexOf(e)&&this.settings.classes.push(e),this.renderer.setClasses(this.settings.classes),this.renderer.reformat()},EPUBJS.Book.prototype.removeClass=function(e){if(!this.isRendered)return this._q.enqueue("removeClass",arguments);var t=this.settings.classes.indexOf(e);-1!=t&&(delete this.settings.classes[t],this.renderer.setClasses(this.settings.classes),this.renderer.reformat())},EPUBJS.Book.prototype.addHeadTag=function(e,t){if(!this.isRendered)return this._q.enqueue("addHeadTag",arguments);this.settings.headTags[e]=t},EPUBJS.Book.prototype.useSpreads=function(e){console.warn("useSpreads is deprecated, use forceSingle or set a layoutOveride instead"),this.forceSingle(!1===e)},EPUBJS.Book.prototype.forceSingle=function(e){var t=typeof e>"u"||e;this.renderer.forceSingle(t),this.settings.forceSingle=t,this.isRendered&&this.renderer.reformat()},EPUBJS.Book.prototype.setMinSpreadWidth=function(e){this.settings.minSpreadWidth=e,this.isRendered&&(this.renderer.setMinSpreadWidth(this.settings.minSpreadWidth),this.renderer.reformat())},EPUBJS.Book.prototype.setGap=function(e){this.settings.gap=e,this.isRendered&&(this.renderer.setGap(this.settings.gap),this.renderer.reformat())},EPUBJS.Book.prototype.chapter=function(e){var r,t=this.spineIndexByURL[e];return t&&(r=new EPUBJS.Chapter(this.spine[t],this.store,this.settings.withCredentials)).load(),r},EPUBJS.Book.prototype.unload=function(){this.settings.restore&&localStorage&&this.saveContents(),this.unlistenToRenderer(this.renderer),this.trigger("book:unload")},EPUBJS.Book.prototype.destroy=function(){window.removeEventListener("beforeunload",this.unload),this.currentChapter&&this.currentChapter.unload(),this.unload(),this.renderer&&this.renderer.remove()},EPUBJS.Book.prototype._ready=function(){this.trigger("book:ready")},EPUBJS.Book.prototype._rendered=function(e){this.isRendered=!0,this.trigger("book:rendered"),this._q.flush()},EPUBJS.Book.prototype.applyStyles=function(e,t){e.applyStyles(this.settings.styles),t()},EPUBJS.Book.prototype.applyClasses=function(e,t){e.setClasses(this.settings.classes),t()},EPUBJS.Book.prototype.applyHeadTags=function(e,t){e.applyHeadTags(this.settings.headTags),t()},EPUBJS.Book.prototype._registerReplacements=function(e){e.registerHook("beforeChapterDisplay",this.applyStyles.bind(this,e),!0),e.registerHook("beforeChapterDisplay",this.applyHeadTags.bind(this,e),!0),e.registerHook("beforeChapterDisplay",this.applyClasses.bind(this,e),!0),e.registerHook("beforeChapterDisplay",EPUBJS.replace.hrefs.bind(this),!0)},EPUBJS.Book.prototype._needsAssetReplacement=function(){return!!this.settings.fromStorage||!!this.settings.contained},EPUBJS.Book.prototype.parseLayoutProperties=function(e){return{layout:this.settings.layoutOveride&&this.settings.layoutOveride.layout||e.layout||"reflowable",spread:this.settings.layoutOveride&&this.settings.layoutOveride.spread||e.spread||"auto",orientation:this.settings.layoutOveride&&this.settings.layoutOveride.orientation||e.orientation||"auto"}},RSVP.EventTarget.mixin(EPUBJS.Book.prototype),RSVP.on("error",function(e){console.error(e)}),RSVP.configure("instrument",!0),EPUBJS.Chapter=function(e,t,i){this.href=e.href,this.absolute=e.url,this.id=e.id,this.spinePos=e.index,this.cfiBase=e.cfiBase,this.properties=e.properties,this.manifestProperties=e.manifestProperties,this.linear=e.linear,this.pages=1,this.store=t,this.credentials=i,this.epubcfi=new EPUBJS.EpubCFI,this.deferred=new RSVP.defer,this.loaded=this.deferred.promise,EPUBJS.Hooks.mixin(this),this.getHooks("beforeChapterRender"),this.caches={}},EPUBJS.Chapter.prototype.load=function(e,t){var n,i=e||this.store,r=t||this.credentials;return(n=i?i.getXml(this.absolute):EPUBJS.core.request(this.absolute,!1,r)).then(function(l){try{this.setDocument(l),this.deferred.resolve(this)}catch(s){this.deferred.reject({message:this.absolute+" -> "+s.message,stack:(new Error).stack})}}.bind(this)),n},EPUBJS.Chapter.prototype.render=function(e){return this.load().then(function(t){var i=t.querySelector("head"),r=t.createElement("base");return r.setAttribute("href",this.absolute),i.insertBefore(r,i.firstChild),this.contents=t,new RSVP.Promise(function(n,l){this.triggerHooks("beforeChapterRender",function(){n(t)}.bind(this),this)}.bind(this))}.bind(this)).then(function(t){return(new XMLSerializer).serializeToString(t)}.bind(this))},EPUBJS.Chapter.prototype.url=function(e){var t=new RSVP.defer,i=e||this.store,n=this;return i?this.tempUrl?t.resolve(this.tempUrl):i.getUrl(this.absolute).then(function(s){n.tempUrl=s,t.resolve(s)}):t.resolve(this.absolute),t.promise},EPUBJS.Chapter.prototype.setPages=function(e){this.pages=e},EPUBJS.Chapter.prototype.getPages=function(e){return this.pages},EPUBJS.Chapter.prototype.getID=function(){return this.ID},EPUBJS.Chapter.prototype.unload=function(e){this.document=null,this.tempUrl&&e&&(e.revokeUrl(this.tempUrl),this.tempUrl=!1)},EPUBJS.Chapter.prototype.setDocument=function(e){this.document=e,this.contents=e.documentElement,!this.document.evaluate&&document.evaluate&&(this.document.evaluate=document.evaluate)},EPUBJS.Chapter.prototype.cfiFromRange=function(e){var t,i,r,n,l,d,c;if(this.document){if(typeof document.evaluate<"u"){if(i=EPUBJS.core.getElementXPath(e.startContainer),r=EPUBJS.core.getElementXPath(e.endContainer),n=this.document.evaluate(i,this.document,EPUBJS.core.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,e.collapsed||(l=this.document.evaluate(r,this.document,EPUBJS.core.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),t=this.document.createRange(),n)try{t.setStart(n,e.startOffset),!e.collapsed&&l&&t.setEnd(l,e.endOffset)}catch{console.log("missed"),n=!1}n||(console.log("not found, try fuzzy match"),d=EPUBJS.core.cleanStringForXpath(e.startContainer.textContent),(n=this.document.evaluate(i="//text()[contains(.,"+d+")]",this.document,EPUBJS.core.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)&&(t.setStart(n,e.startOffset),e.collapsed||(c=EPUBJS.core.cleanStringForXpath(e.endContainer.textContent),(l=this.document.evaluate(r="//text()[contains(.,"+c+")]",this.document,EPUBJS.core.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)&&t.setEnd(l,e.endOffset))))}else t=e;return this.epubcfi.generateCfiFromRange(t,this.cfiBase)}},EPUBJS.Chapter.prototype.find=function(e){var t=this,i=[],r=e.toLowerCase();return this.textSprint(this.document,function(l){!function(l){for(var c,o,u,s=l.textContent.toLowerCase(),d=t.document.createRange(),h=-1;-1!=o;)-1!=(o=s.indexOf(r,h+1))&&((d=t.document.createRange()).setStart(l,o),d.setEnd(l,o+r.length),c=t.cfiFromRange(d),u=l.textContent.length<150?l.textContent:"..."+(u=l.textContent.substring(o-75,o+75))+"...",i.push({cfi:c,excerpt:u})),h=o}(l)}),i},EPUBJS.Chapter.prototype.textSprint=function(e,t){for(var r,i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(n){return n.data&&!/^\s*$/.test(n.data)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1);r=i.nextNode();)t(r)},EPUBJS.Chapter.prototype.replace=function(e,t,i,r){var n=this.contents.querySelectorAll(e),l=Array.prototype.slice.call(n),s=l.length;0!==s?l.forEach(function(d){var c=!1;t(d,function(h,u){!1===c&&(s--,r&&r(h,u,s),s<=0&&i&&i(!0),c=!0)})}.bind(this)):i(!1)},EPUBJS.Chapter.prototype.replaceWithStored=function(e,t,i,r){var n,l={},s=this.store,d=this.caches[e],o=EPUBJS.core.uri(this.absolute).base,h=t;s&&(d||(d={}),n=EPUBJS.core.clone(d),this.replace(e,function(m,w){var A=m.getAttribute(h),j=EPUBJS.core.resolveUrl(o,A),X=function(z){var O;m.onload=function(){clearTimeout(O),w(z,j)},"svg image"==e&&m.setAttribute("externalResourcesRequired","true"),"link[href]"==e&&"stylesheet"!==m.getAttribute("rel")?w(z,j):O=setTimeout(function(){w(z,j)},5),z&&m.setAttribute(h,z)};j in n?(X(n[j]),l[j]=n[j],delete n[j]):i(s,j,X,m)},function(m){r&&r(),EPUBJS.core.values(n).forEach(function(w){s.revokeUrl(w)}),d=l},function(m,w,A){l[w]=m}))},(EPUBJS=EPUBJS||{}).core={};var EPUBJS,ELEMENT_NODE=1,TEXT_NODE=3,COMMENT_NODE=8,DOCUMENT_NODE=9;function kaltura(e,t){try{kWidget.embed({targetId:"kaltura_player",wid:"_3303993",uiconf_id:"Student"!==t?50360342:47481143,flashvars:{hotspots:{plugin:!0},statistics:{plugin:!0},transcript:{collapsed:!1},accessibilityButtons:{plugin:!0,positionBtn:!1,forwardBtn:!0,backwardBtn:!0},onPageCss1:"/assets/css/onpage.css",IframeCustomPluginCss1:"/assets/css/player_custom.css",IframeCustomPluginJs1:"/assets/js/player_custom.js",myComponent:{plugin:!0,img:"/assets/images/icons/video-player/notes.svg",iframeHTML5Js:"/assets/js/player-plugin/player-notes.js",iframeHTML5Css:"/assets/css/player-plugin/player-notes.css"}},cache_st:1645705220,entry_id:e})}catch(r){console.error(r.message)}kWidget.addReadyCallback(function(r){var n=document.getElementById(r);n.kBind("ccDataLoaded",function(){$("#hasCaptions").text(!0)}),n.kBind("playerUpdatePlayhead",function(){var l=n.evaluate("{video.player.currentTime}"),s=n.evaluate("{duration}"),d=Math.ceil(l/s*100);$("#videoprogress").text(d),$("#currentTimeStore").text(l)}),n.kBind("playerPlayEnd",function(){var l=n.evaluate("{video.player.currentTime}");$("#videoprogress").text(100),$("#currentTimeStore").text(l)})})}function seekOnInit(e,t,i){try{kWidget.embed({targetId:"kaltura_player",wid:"_3303993",uiconf_id:"Student"!==i?50360342:47481143,flashvars:{hotspots:{plugin:!0},statistics:{plugin:!0},transcript:{collapsed:!1},accessibilityButtons:{plugin:!0,positionBtn:!1,forwardBtn:!0,backwardBtn:!0},onPageCss1:"/assets/css/onpage.css",IframeCustomPluginCss1:"/assets/css/player_custom.css",IframeCustomPluginJs1:"/assets/js/player_custom.js",myComponent:{plugin:!0,img:"/assets/images/icons/video-player/notes.svg",iframeHTML5Js:"/assets/js/player-plugin/player-notes.js",iframeHTML5Css:"/assets/css/player-plugin/player-notes.css"}},cache_st:1645705220,entry_id:e})}catch(n){console.error(n.message)}kWidget.addReadyCallback(function(n){var l=document.getElementById("kaltura_player"),s=t||0;l.kBind("mediaReady",function(){l.sendNotification("doSeek",s)})})}function msToTime(e){var t=e,i=e%60,r=(e=(e-i)/60)%60,n=(e-r)/60;return t>=3600?n<10?n="0"+n:r<10?r="0"+r:i<10?i="0"+i:n+":"+r+":"+i:(r<10&&(r="0"+r),i<10&&(i="0"+i),r+":"+i)}function notesImplementation(){var e=document.getElementById("kaltura_player");e.sendNotification("doPause");var t=e.evaluate("{video.player.currentTime}");let i=msToTime(Math.round(t));setTimeout(function(){$("#noteTime").text(i),$("#noteTime").attr("data-time",t)},500)}function stats(e,t,i,r,n){var l=e,s={kalturaServer:{uri:"www.kaltura.com",previewUIConf:r},cdnServers:{serverUri:n,securedServerUri:"https://cdnapisec.kaltura.com"},ks:t,pid:i,locale:"en",menuConfig:{showMenu:!1},customStyle:{baseClassName:"kms",css:"\n      body.kms {\n          background: transparent;\n          background-color: white;\n      }\n      .kms .kMain .kReportView .kReport, .kms .kMain .kReportView .kReport .kDivider {\n          background: transparent;\n      }\n      .kms .kMain .kReportView .kReport .kTotalsRow,  .kms .kMain .kReportView .kReport .kTotalsContainer {\n          background: transparent;\n      }\n      .kms .kMain .kReportView .kReport .kFilters {\n          background-color: white;\n      }\n      .kms .kMain .kReportView .kReport .kReportHeader {\n          background: transparent;\n      }\n      .kms .kMain .kReportView .kReport .kTitle{\n          display: none\n      }\n      .kms .kMain .kReportView .kReport .kEntryDetails{\n          display: none\n      }\n      .kms .kMain .kReportView .kReport .kReportContainer {\n          background: transparent;\n      }\n      .kms .kMain .kReportView .kReport .kEntryDetails {\n          background: transparent;\n      }\n      .kms .kMain .kReportView .kReport.kImageReport {\n          background: transparent;\n      }\n      .kms .kMain .kReportView .kReport .kRefineFiltersHost {\n          background: transparent;\n      }\n      .kms .kReport .kTotalsRow .kTotalsContainer .kTotals{\n          width: 100%  !important;\n          \n      }      \n      .kms .kReport .kTotalsRow .kTotalsContainer .kSocialHighlights{\n          display: none\n      }\n      /* Margins */\n      .kms .kContent {\n          width: 100% !important;\n      }\n      .kms .kReportView .kContent {\n          padding-left: 20px !important;\n          padding-right: 20px !important;\n          box-sizing: border-box;\n      }\n      /* Borders */\n      .kms .kTotalContainer, .kms .kSocialHighlights {\n          border: 1px solid #cccccc !important;\n      }\n      .kms .kTotalContainer:first-child {\n          border-top-left-radius: 3px;\n          border-bottom-left-radius: 3px;\n      }\n      .kms .kTotalContainer:last-child {\n          border-top-right-radius: 3px;\n          border-bottom-right-radius: 3px;\n          border-left: none !important;\n      }\n      .kms .kTotalContainer:not(:first-child):not(:last-child) {\n          border-left: none !important;\n      }\n      .kms .kEntryPreview app-video-entry-preview .kReport {\n          border: 1px solid #cccccc !important;\n          border-bottom: none !important;\n          border-radius: 0px;\n          border-top-left-radius: 3px;\n          border-top-right-radius: 3px;\n      }\n      .kms .kEntryPreview app-video-entry-user-engagement .kReport {\n          border: 1px solid #cccccc !important;\n          border-top: none !important;\n          border-radius: 0px;\n          border-bottom-left-radius: 3px;\n          border-bottom-right-radius: 3px;\n      }\n      .kms .kReportContainer .kFilters {\n          border: 1px solid #cccccc !important;\n          border-bottom: none !important;\n          border-top-left-radius: 3px;\n          border-top-right-radius: 3px;\n      }\n      .kms .kReportContainer .kReportContent {\n          border: 1px solid #cccccc !important;\n          border-top: none !important;\n          border-bottom-left-radius: 3px;\n          border-bottom-right-radius: 3px;\n      }\n      .kms .kReportContainer .kReportContent.kNoTitle {\n          border-top: 1px solid #cccccc !important;\n          border-top-left-radius: 3px;\n          border-top-right-radius: 3px;\n      }"}},d=document.getElementById("analytics"),c=o=>{d&&d.contentWindow&&d.contentWindow.postMessage&&d.contentWindow.postMessage(o,"*")};window.addEventListener("message",o=>{if(o.data){var h=o.data;switch(h.messageType){case"analyticsInit":var u=h.payload.menuConfig;console.log(u),c({messageType:"init",payload:{...s,menusConfig:u,viewsConfig:h.payload.viewsConfig}});break;case"analyticsInitComplete":c({messageType:"navigate",payload:{url:`/entry/${l}`}}),c({messageType:"updateFilters",payload:{queryParams:{dateBy:"last30days"}}});break;case"navigateBack":window.location="/";break;case"updateLayout":d.style.height=`${h.payload.height}px`;break;case"navigateTo":var[_,m]=h.payload.split("?"),w=m.split("&").reduce((A,j)=>{var[X,z]=j.split("=");return A[X]=z,A},{});case"entryNavigateBack":console.log("ENB"),c({messageType:"navigate",payload:{url:_,queryParams:w}}),c({messageType:"updateFilters",payload:{queryParams:w}});break;default:console.log(`${h.messageType} event is not implemented`)}}})}function uiWidget(){var e;e=function(e,t){var i=0,r=Array.prototype.slice,n=e.cleanData;e.cleanData=function(l){for(var d,s=0;null!=(d=l[s]);s++)try{e(d).triggerHandler("remove")}catch{}n(l)},e.widget=function(l,s,d){var c,o,h,u,g={},_=l.split(".")[0];l=l.split(".")[1],d||(d=s,s=e.Widget),e.expr[":"][(c=_+"-"+l).toLowerCase()]=function(m){return!!e.data(m,c)},e[_]=e[_]||{},o=e[_][l],h=e[_][l]=function(m,w){if(!this._createWidget)return new h(m,w);arguments.length&&this._createWidget(m,w)},e.extend(h,o,{version:d.version,_proto:e.extend({},d),_childConstructors:[]}),(u=new s).options=e.widget.extend({},u.options),e.each(d,function(m,w){g[m]=e.isFunction(w)?function(){var A=function(){return s.prototype[m].apply(this,arguments)},j=function(X){return s.prototype[m].apply(this,X)};return function(){var O,X=this._super,z=this._superApply;return this._super=A,this._superApply=j,O=w.apply(this,arguments),this._super=X,this._superApply=z,O}}():w}),h.prototype=e.widget.extend(u,{widgetEventPrefix:o&&u.widgetEventPrefix||l},g,{constructor:h,namespace:_,widgetName:l,widgetFullName:c}),o?(e.each(o._childConstructors,function(m,w){var A=w.prototype;e.widget(A.namespace+"."+A.widgetName,h,w._proto)}),delete o._childConstructors):s._childConstructors.push(h),e.widget.bridge(l,h)},e.widget.extend=function(l){for(var o,h,s=r.call(arguments,1),d=0,c=s.length;d<c;d++)for(o in s[d])h=s[d][o],s[d].hasOwnProperty(o)&&h!==t&&(l[o]=e.isPlainObject(h)?e.isPlainObject(l[o])?e.widget.extend({},l[o],h):e.widget.extend({},h):h);return l},e.widget.bridge=function(l,s){var d=s.prototype.widgetFullName||l;e.fn[l]=function(c){var o="string"==typeof c,h=r.call(arguments,1),u=this;return c=!o&&h.length?e.widget.extend.apply(null,[c].concat(h)):c,this.each(o?function(){var g,_=e.data(this,d);return _?e.isFunction(_[c])&&"_"!==c.charAt(0)?(g=_[c].apply(_,h))!==_&&g!==t?(u=g&&g.jquery?u.pushStack(g.get()):g,!1):void 0:e.error("no such method '"+c+"' for "+l+" widget instance"):e.error("cannot call methods on "+l+" prior to initialization; attempted to call method '"+c+"'")}:function(){var g=e.data(this,d);g?g.option(c||{})._init():e.data(this,d,new s(c,this))}),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(l,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),l),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(d){d.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(l,s){var c,o,h,d=l;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof l)if(d={},c=l.split("."),l=c.shift(),c.length){for(o=d[l]=e.widget.extend({},this.options[l]),h=0;h<c.length-1;h++)o[c[h]]=o[c[h]]||{},o=o[c[h]];if(l=c.pop(),1===arguments.length)return o[l]===t?null:o[l];o[l]=s}else{if(1===arguments.length)return this.options[l]===t?null:this.options[l];d[l]=s}return this._setOptions(d),this},_setOptions:function(l){var s;for(s in l)this._setOption(s,l[s]);return this},_setOption:function(l,s){return this.options[l]=s,"disabled"===l&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!s).attr("aria-disabled",s),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(l,s,d){var c,o=this;"boolean"!=typeof l&&(d=s,s=l,l=!1),d?(s=c=e(s),this.bindings=this.bindings.add(s)):(d=s,s=this.element,c=this.widget()),e.each(d,function(h,u){function g(){if(l||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof u?o[u]:u).apply(o,arguments)}"string"!=typeof u&&(g.guid=u.guid=u.guid||g.guid||e.guid++);var _=h.match(/^(\w+)\s*(.*)$/),m=_[1]+o.eventNamespace,w=_[2];w?c.delegate(w,m,g):s.bind(m,g)})},_off:function(l,s){s=(s||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,l.unbind(s).undelegate(s)},_delay:function(l,s){var c=this;return setTimeout(function d(){return("string"==typeof l?c[l]:l).apply(c,arguments)},s||0)},_hoverable:function(l){this.hoverable=this.hoverable.add(l),this._on(l,{mouseenter:function(s){e(s.currentTarget).addClass("ui-state-hover")},mouseleave:function(s){e(s.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(l){this.focusable=this.focusable.add(l),this._on(l,{focusin:function(s){e(s.currentTarget).addClass("ui-state-focus")},focusout:function(s){e(s.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(l,s,d){var c,o,h=this.options[l];if(d=d||{},(s=e.Event(s)).type=(l===this.widgetEventPrefix?l:this.widgetEventPrefix+l).toLowerCase(),s.target=this.element[0],o=s.originalEvent)for(c in o)c in s||(s[c]=o[c]);return this.element.trigger(s,d),!(e.isFunction(h)&&!1===h.apply(this.element[0],[s].concat(d))||s.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(l,s){e.Widget.prototype["_"+l]=function(d,c,o){"string"==typeof c&&(c={effect:c});var h,u=c?!0===c||"number"==typeof c?s:c.effect||s:l;"number"==typeof(c=c||{})&&(c={duration:c}),h=!e.isEmptyObject(c),c.complete=o,c.delay&&d.delay(c.delay),h&&e.effects&&e.effects.effect[u]?d[l](c):u!==l&&d[u]?d[u](c.duration,c.easing,o):d.queue(function(g){e(this)[l](),o&&o.call(d[0]),g()})}})},"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}function iframeTransport(){var e;e=function(e){var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,l,s,r=i.initialIframeSrc||"javascript:false;";return{send:function(d,c){(n=e('<form style="display:none;"></form>')).attr("accept-charset",i.formAcceptCharset),s=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+s+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+s+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+s+"_method=PATCH",i.type="POST"),l=e('<iframe src="'+r+'" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var o,h=e.isArray(i.paramName)?i.paramName:[i.paramName];l.unbind("load").bind("load",function(){var u;try{if(!(u=l.contents()).length||!u[0].firstChild)throw new Error}catch{u=void 0}c(200,"success",{iframe:u}),e('<iframe src="'+r+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",l.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(u,g){e('<input type="hidden"/>').prop("name",g.name).val(g.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(o=i.fileInput.clone(),i.fileInput.after(function(u){return o[u]}),i.paramName&&i.fileInput.each(function(u){e(this).prop("name",h[u]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),o&&o.length&&i.fileInput.each(function(u,g){var _=e(o[u]);e(g).prop("name",_.prop("name")).attr("form",_.attr("form")),_.replaceWith(g)})}),n.append(l).appendTo(document.body)},abort:function(){l&&l.unbind("load").prop("src",r),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(i){return i&&e(i[0].body).text()},"iframe json":function(i){return i&&e.parseJSON(e(i[0].body).text())},"iframe html":function(i){return i&&e(i[0].body).html()},"iframe xml":function(i){var r=i&&i[0];return r&&e.isXMLDoc(r)?r:e.parseXML(r.XMLDocument&&r.XMLDocument.xml||e(r.body).html())},"iframe script":function(i){return i&&e.globalEval(e(i[0].body).text())}}})},"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}EPUBJS.core.getEl=function(e){return document.getElementById(e)},EPUBJS.core.getEls=function(e){return document.getElementsByClassName(e)},EPUBJS.core.request=function(e,t,i){var d,r=window.URL,n=r?"blob":"arraybuffer",l=new RSVP.defer,s=new XMLHttpRequest,c=XMLHttpRequest.prototype;return"overrideMimeType"in c||Object.defineProperty(c,"overrideMimeType",{value:function(u){}}),s.onreadystatechange=function(){var h;this.readyState==this.DONE&&(200!==this.status&&0!==this.status||!this.response?l.reject({message:this.response,stack:(new Error).stack}):(h="xml"==t?this.responseXML?this.responseXML:(new DOMParser).parseFromString(this.response,"application/xml"):"xhtml"==t?this.responseXML?this.responseXML:(new DOMParser).parseFromString(this.response,"application/xhtml+xml"):"html"==t?this.responseXML?this.responseXML:(new DOMParser).parseFromString(this.response,"text/html"):"json"==t?JSON.parse(this.response):"blob"==t?r?this.response:new Blob([this.response]):this.response,l.resolve(h)))},s.open("GET",e,!0),i&&(s.withCredentials=!0),t||(d=EPUBJS.core.uri(e),t={htm:"html"}[t=d.extension]||t),"blob"==t&&(s.responseType=n),"json"==t&&s.setRequestHeader("Accept","application/json"),"xml"==t&&(s.responseType="document",s.overrideMimeType("text/xml")),"xhtml"==t&&(s.responseType="document"),"html"==t&&(s.responseType="document"),"binary"==t&&(s.responseType="arraybuffer"),s.send(),l.promise},EPUBJS.core.toArray=function(e){var t=[];for(var i in e){var r;e.hasOwnProperty(i)&&((r=e[i]).ident=i,t.push(r))}return t},EPUBJS.core.uri=function(e){var s,d,c,t={protocol:"",host:"",path:"",origin:"",directory:"",base:"",filename:"",extension:"",fragment:"",href:e},i=e.indexOf("blob:"),r=e.indexOf("://"),n=e.indexOf("?"),l=e.indexOf("#");return 0===i?(t.protocol="blob",t.base=e.indexOf(0,l),t):(-1!=l&&(t.fragment=e.slice(l+1),e=e.slice(0,l)),-1!=n&&(t.search=e.slice(n+1),e=e.slice(0,n),href=t.href),-1!=r?(t.protocol=e.slice(0,r),-1===(c=(s=e.slice(r+3)).indexOf("/"))?(t.host=t.path,t.path=""):(t.host=s.slice(0,c),t.path=s.slice(c)),t.origin=t.protocol+"://"+t.host,t.directory=EPUBJS.core.folder(t.path),t.base=t.origin+t.directory):(t.path=e,t.directory=EPUBJS.core.folder(e),t.base=t.directory),t.filename=e.replace(t.base,""),-1!=(d=t.filename.lastIndexOf("."))&&(t.extension=t.filename.slice(d+1)),t)},EPUBJS.core.folder=function(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)},EPUBJS.core.dataURLToBlob=function(e){var i,r,n,l,s,t=";base64,";if(-1==e.indexOf(t))return r=(i=e.split(","))[0].split(":")[1],n=i[1],new Blob([n],{type:r});r=(i=e.split(t))[0].split(":")[1],l=(n=window.atob(i[1])).length,s=new Uint8Array(l);for(var d=0;d<l;++d)s[d]=n.charCodeAt(d);return new Blob([s],{type:r})},EPUBJS.core.addScript=function(e,t,i){var r,n;n=!1,(r=document.createElement("script")).type="text/javascript",r.async=!1,r.src=e,r.onload=r.onreadystatechange=function(){!n&&(!this.readyState||"complete"==this.readyState)&&(n=!0,t&&t())},(i=i||document.body).appendChild(r)},EPUBJS.core.addScripts=function(e,t,i){var r=e.length,n=0,l=function(){n++,r==n?t&&t():EPUBJS.core.addScript(e[n],l,i)};EPUBJS.core.addScript(e[n],l,i)},EPUBJS.core.addCss=function(e,t,i){var r,n;n=!1,(r=document.createElement("link")).type="text/css",r.rel="stylesheet",r.href=e,r.onload=r.onreadystatechange=function(){!n&&(!this.readyState||"complete"==this.readyState)&&(n=!0,t&&t())},(i=i||document.body).appendChild(r)},EPUBJS.core.prefixed=function(e){var t=["Webkit","Moz","O","ms"],r=e[0].toUpperCase()+e.slice(1),n=t.length;if(typeof document.documentElement.style[e]<"u")return e;for(var l=0;l<n;l++)if(typeof document.documentElement.style[t[l]+r]<"u")return t[l]+r;return e},EPUBJS.core.resolveUrl=function(e,t){var r=[],n=EPUBJS.core.uri(t),l=e.split("/");return n.host?t:(l.pop(),t.split("/").forEach(function(d){".."===d?l.pop():r.push(d)}),l.concat(r).join("/"))},EPUBJS.core.uuid=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==i?r:7&r|8).toString(16)})},EPUBJS.core.insert=function(e,t,i){var r=EPUBJS.core.locationOf(e,t,i);return t.splice(r,0,e),r},EPUBJS.core.locationOf=function(e,t,i,r,n){var c,l=r||0,s=n||t.length,d=parseInt(l+(s-l)/2);return i||(i=function(o,h){return o>h?1:o<h?-1:(o=h)?0:void 0}),s-l<=0?d:(c=i(t[d],e),s-l==1?c>0?d:d+1:0===c?d:-1===c?EPUBJS.core.locationOf(e,t,i,d,s):EPUBJS.core.locationOf(e,t,i,l,d))},EPUBJS.core.indexOfSorted=function(e,t,i,r,n){var c,l=r||0,s=n||t.length,d=parseInt(l+(s-l)/2);return i||(i=function(o,h){return o>h?1:o<h?-1:(o=h)?0:void 0}),s-l<=0?-1:(c=i(t[d],e),s-l==1?0===c?d:-1:0===c?d:-1===c?EPUBJS.core.indexOfSorted(e,t,i,d,s):EPUBJS.core.indexOfSorted(e,t,i,l,d))},EPUBJS.core.queue=function(e){var t=[],i=e,n=function(){var c;t.length&&(c=t.shift(),i[c.funcName].apply(c.context||i,c.args))};return{enqueue:function(c,o,h){return t.push({funcName:c,args:o,context:h}),t},dequeue:n,flush:function(){for(;t.length;)n()},clear:function(){t=[]},length:function(){return t.length}}},EPUBJS.core.getElementXPath=function(e){return e&&e.id?'//*[@id="'+e.id+'"]':EPUBJS.core.getElementTreeXPath(e)},EPUBJS.core.getElementTreeXPath=function(e){var r,n,t=[],i="http://www.w3.org/1999/xhtml"===e.ownerDocument.documentElement.getAttribute("xmlns");for(e.nodeType===Node.TEXT_NODE&&(r=EPUBJS.core.indexOfTextNode(e)+1,t.push("text()["+r+"]"),e=e.parentNode);e&&1==e.nodeType;e=e.parentNode){r=0;for(var d=e.previousSibling;d;d=d.previousSibling)d.nodeType!=Node.DOCUMENT_TYPE_NODE&&d.nodeName==e.nodeName&&++r;n=e.nodeName.toLowerCase(),t.splice(0,0,(i?"xhtml:"+n:n)+(r?"["+(r+1)+"]":""))}return t.length?"./"+t.join("/"):null},EPUBJS.core.nsResolver=function(e){return{xhtml:"http://www.w3.org/1999/xhtml",epub:"http://www.idpf.org/2007/ops"}[e]||null},EPUBJS.core.cleanStringForXpath=function(e){var t=e.match(/[^'"]+|['"]/g);return"concat('',"+(t=t.map(function(i){return"'"===i?'"\'"':'"'===i?"'\"'":"'"+i+"'"})).join(",")+")"},EPUBJS.core.indexOfTextNode=function(e){for(var r,i=e.parentNode.childNodes,n=-1,l=0;l<i.length&&((r=i[l]).nodeType===Node.TEXT_NODE&&n++,r!=e);l++);return n},EPUBJS.core.defaults=function(e){for(var t=1,i=arguments.length;t<i;t++){var r=arguments[t];for(var n in r)void 0===e[n]&&(e[n]=r[n])}return e},EPUBJS.core.extend=function(e){return[].slice.call(arguments,1).forEach(function(i){i&&Object.getOwnPropertyNames(i).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}),e},EPUBJS.core.clone=function(e){return EPUBJS.core.isArray(e)?e.slice():EPUBJS.core.extend({},e)},EPUBJS.core.isElement=function(e){return!(!e||1!=e.nodeType)},EPUBJS.core.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},EPUBJS.core.isString=function(e){return"string"==typeof e||e instanceof String},EPUBJS.core.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},EPUBJS.core.values=function(e){var i,r,n,t=-1;if(!e)return[];for(r=(i=Object.keys(e)).length,n=Array(r);++t<r;)n[t]=e[i[t]];return n},EPUBJS.core.indexOfNode=function(e,t){for(var n,r=e.parentNode.childNodes,l=-1,s=0;s<r.length&&((n=r[s]).nodeType===t&&l++,n!=e);s++);return l},EPUBJS.core.indexOfTextNode=function(e){return EPUBJS.core.indexOfNode(e,TEXT_NODE)},EPUBJS.core.indexOfElementNode=function(e){return EPUBJS.core.indexOfNode(e,ELEMENT_NODE)},EPUBJS.EpubCFI=function(e){if(e)return this.parse(e)},EPUBJS.EpubCFI.prototype.generateChapterComponent=function(e,t,i){var l="/"+2*(e+1)+"/";return l+=2*(parseInt(t)+1),i&&(l+="["+i+"]"),l},EPUBJS.EpubCFI.prototype.generatePathComponent=function(e){return e.map(function(t){return 2*(t.index+1)+(t.id?"["+t.id+"]":"")}).join("/")},EPUBJS.EpubCFI.prototype.generateCfiFromElement=function(e,t){var i=this.pathTo(e),r=this.generatePathComponent(i);return r.length?"epubcfi("+t+"!/"+r+"/1:0)":"epubcfi("+t+"!/4/)"},EPUBJS.EpubCFI.prototype.pathTo=function(e){for(var i,t=[];e&&null!==e.parentNode&&9!=e.parentNode.nodeType;)t.unshift({id:e.id,tagName:e.tagName,index:(i=e.parentNode.children)?Array.prototype.indexOf.call(i,e):0}),e=e.parentNode;return t},EPUBJS.EpubCFI.prototype.getChapterComponent=function(e){return e.split("!")[0]},EPUBJS.EpubCFI.prototype.getPathComponent=function(e){var t=e.split("!");return(t[1]?t[1].split(":"):"")[0]},EPUBJS.EpubCFI.prototype.getCharecterOffsetComponent=EPUBJS.EpubCFI.prototype.getCharacterOffsetComponent=function(e){return e.split(":")[1]||""},EPUBJS.EpubCFI.prototype.parse=function(e){var i,r,n,l,s,d,c,o,h,t={},g=function(_){var w,A,j;return w=parseInt(_)/2-1,(A=_.match(/\[(.*)\]/))&&A[1]&&(j=A[1]),{type:"element",index:w,id:j||!1}};return"string"!=typeof e?{spinePos:-1}:(t.str=e,0===e.indexOf("epubcfi(")&&")"===e[e.length-1]&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),n=this.getPathComponent(e)||"",l=this.getCharacterOffsetComponent(e),r&&(i=r.split("/")[2]||"")?(t.spinePos=parseInt(i)/2-1||0,d=i.match(/\[(.*)\]/),t.spineId=!!d&&d[1],-1!=n.indexOf(",")&&console.warn("CFI Ranges are not supported"),o=(c=n.split("/")).pop(),t.steps=[],c.forEach(function(_){var m;_&&(m=g(_),t.steps.push(m))}),h=parseInt(o),isNaN(h)||t.steps.push(h%2==0?g(o):{type:"text",index:(h-1)/2}),(s=l.match(/\[(.*)\]/))&&s[1]?(t.characterOffset=parseInt(l.split("[")[0]),t.textLocationAssertion=s[1]):t.characterOffset=parseInt(l),t):{spinePos:-1})},EPUBJS.EpubCFI.prototype.addMarker=function(e,t,i){var l,s,d,c,r=t||document,n=i||this.createMarker(r);return"string"==typeof e&&(e=this.parse(e)),s=e.steps[e.steps.length-1],!(-1===e.spinePos||(l=this.findParent(e,r),!l))&&(s&&"text"===s.type?(d=l.childNodes[s.index],e.characterOffset?(c=d.splitText(e.characterOffset),n.classList.add("EPUBJS-CFI-SPLIT"),l.insertBefore(n,c)):l.insertBefore(n,d)):l.insertBefore(n,l.firstChild),n)},EPUBJS.EpubCFI.prototype.createMarker=function(e){var i=(e||document).createElement("span");return i.id="EPUBJS-CFI-MARKER:"+EPUBJS.core.uuid(),i.classList.add("EPUBJS-CFI-MARKER"),i},EPUBJS.EpubCFI.prototype.removeMarker=function(e,t){t||document,e.classList.contains("EPUBJS-CFI-SPLIT")?(nextSib=e.nextSibling,prevSib=e.previousSibling,nextSib&&prevSib&&3===nextSib.nodeType&&3===prevSib.nodeType&&(prevSib.textContent+=nextSib.textContent,e.parentNode.removeChild(nextSib)),e.parentNode.removeChild(e)):e.classList.contains("EPUBJS-CFI-MARKER")&&e.parentNode.removeChild(e)},EPUBJS.EpubCFI.prototype.findParent=function(e,t){var d,c,i=t||document,r=i.getElementsByTagName("html")[0],n=Array.prototype.slice.call(r.children);if("string"==typeof e&&(e=this.parse(e)),!(c=e.steps.slice(0)).length)return i.getElementsByTagName("body")[0];for(;c&&c.length>0;){if(!(r="text"===(d=c.shift()).type?r.childNodes[d.index].parentNode||r:d.id?i.getElementById(d.id):n[d.index])||typeof r>"u")return console.error("No Element For",d,e.str),!1;n=Array.prototype.slice.call(r.children)}return r},EPUBJS.EpubCFI.prototype.compare=function(e,t){if("string"==typeof e&&(e=new EPUBJS.EpubCFI(e)),"string"==typeof t&&(t=new EPUBJS.EpubCFI(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;for(var i=0;i<e.steps.length;i++){if(!t.steps[i]||e.steps[i].index>t.steps[i].index)return 1;if(e.steps[i].index<t.steps[i].index)return-1}return e.steps.length<t.steps.length?-1:e.characterOffset>t.characterOffset?1:e.characterOffset<t.characterOffset?-1:0},EPUBJS.EpubCFI.prototype.generateCfiFromHref=function(e,t){var o,i=EPUBJS.core.uri(e),n=i.fragment,l=t.spineIndexByURL[i.path],d=new RSVP.defer,c=new EPUBJS.EpubCFI;return typeof l<"u"&&t.loadXml((o=t.spine[l]).url).then(function(h){var g,u=h.getElementById(n);g=c.generateCfiFromElement(u,o.cfiBase),d.resolve(g)}),d.promise},EPUBJS.EpubCFI.prototype.generateCfiFromTextNode=function(e,t,i){var r=e.parentNode,n=this.pathTo(r);return"epubcfi("+i+"!/"+this.generatePathComponent(n)+"/"+(1+2*Array.prototype.indexOf.call(r.childNodes,e))+":"+(t||0)+")"},EPUBJS.EpubCFI.prototype.generateCfiFromRangeAnchor=function(e,t){return this.generateCfiFromTextNode(e.anchorNode,e.anchorOffset,t)},EPUBJS.EpubCFI.prototype.generateCfiFromRange=function(e,t){var i,r,n,l,s,d,c,o,h,u,g,_;if(3===(i=e.startContainer).nodeType)r=i.parentNode,d=1+2*EPUBJS.core.indexOfTextNode(i),n=this.pathTo(r);else{if(e.collapsed)return this.generateCfiFromElement(i,t);n=this.pathTo(i)}return l=this.generatePathComponent(n),s=e.startOffset,e.collapsed?"epubcfi("+t+"!/"+l+"/"+d+":"+s+")":(3===(c=e.endContainer).nodeType?(o=c.parentNode,_=1+2*EPUBJS.core.indexOfTextNode(c),h=this.pathTo(o)):h=this.pathTo(c),u=this.generatePathComponent(h),g=e.endOffset,(u=u.replace(l,"")).length&&(u+="/"),"epubcfi("+t+"!/"+l+"/"+d+":"+s+","+u+_+":"+g+")")},EPUBJS.EpubCFI.prototype.generateXpathFromSteps=function(e){var t=[".","*"];return e.forEach(function(i){var r=i.index+1;t.push(i.id?"*[position()="+r+" and @id='"+i.id+"']":"text"===i.type?"text()["+r+"]":"*["+r+"]")}),t.join("/")},EPUBJS.EpubCFI.prototype.generateQueryFromSteps=function(e){var t=["html"];return e.forEach(function(i){var r=i.index+1;i.id?t.push("#"+i.id):"text"===i.type||t.push("*:nth-child("+r+")")}),t.join(">")},EPUBJS.EpubCFI.prototype.generateRangeFromCfi=function(e,t){var n,l,s,d,c,o,i=t||document,r=i.createRange();return"string"==typeof e&&(e=this.parse(e)),-1!==e.spinePos&&(n=e.steps[e.steps.length-1],typeof document.evaluate<"u"?(l=this.generateXpathFromSteps(e.steps),s=i.evaluate(l,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):(c=this.generateQueryFromSteps(e.steps),(o=i.querySelector(c))&&"text"==n.type&&(s=o.childNodes[n.index])),s?(s&&e.characterOffset>=0?e.characterOffset<(d=s.length)?(r.setStart(s,e.characterOffset),r.setEnd(s,d)):(console.debug("offset greater than length:",e.characterOffset,d),r.setStart(s,d-1),r.setEnd(s,d)):s&&r.selectNode(s),r):null)},EPUBJS.EpubCFI.prototype.isCfiString=function(e){return"string"==typeof e&&0===e.indexOf("epubcfi(")},EPUBJS.Events=function(e,t){return this.events={},this.el=t||document.createElement("div"),e.createEvent=this.createEvent,e.tell=this.tell,e.listen=this.listen,e.deafen=this.deafen,e.listenUntil=this.listenUntil,this},EPUBJS.Events.prototype.createEvent=function(e){var t=new CustomEvent(e);return this.events[e]=t,t},EPUBJS.Events.prototype.tell=function(e,t){var i;this.events[e]?i=this.events[e]:(console.warn("No event:",e,"defined yet, creating."),i=this.createEvent(e)),t&&(i.msg=t),this.el.dispatchEvent(i)},EPUBJS.Events.prototype.listen=function(e,t,i){if(!this.events[e])return console.warn("No event:",e,"defined yet, creating."),void this.createEvent(e);this.el.addEventListener(e,i?t.bind(i):t,!1)},EPUBJS.Events.prototype.deafen=function(e,t){this.el.removeEventListener(e,t,!1)},EPUBJS.Events.prototype.listenUntil=function(e,t,i,r){this.listen(e,i,r),this.listen(t,function n(){this.deafen(e,i),this.deafen(t,n)},this)},EPUBJS.hooks={},EPUBJS.Hooks=function(){function e(){}return e.prototype.getHooks=function(){for(var i in this.hooks={},Array.prototype.slice.call(arguments).forEach(function(r){this.hooks[r]=[]},this),this.hooks)EPUBJS.core.values(EPUBJS.hooks[i]).forEach(function(r){this.registerHook(i,r)},this)},e.prototype.registerHook=function(t,i,r){typeof this.hooks[t]<"u"?"function"==typeof i?r?this.hooks[t].unshift(i):this.hooks[t].push(i):Array.isArray(i)&&i.forEach(function(n){r?this.hooks[t].unshift(n):this.hooks[t].push(n)},this):(this.hooks[t]=[i],"function"==typeof i?this.hooks[t]=[i]:Array.isArray(i)&&(this.hooks[t]=[],i.forEach(function(n){this.hooks[t].push(n)},this)))},e.prototype.removeHook=function(t,i){var r;typeof this.hooks[t]<"u"&&("function"==typeof i?(r=this.hooks[t].indexOf(i))>-1&&this.hooks[t].splice(r,1):Array.isArray(i)&&i.forEach(function(n){(r=this.hooks[t].indexOf(n))>-1&&this.hooks[t].splice(r,1)},this))},e.prototype.triggerHooks=function(t,i,r){var n,l;if(typeof this.hooks[t]>"u")return!1;function s(){--l<=0&&i&&i()}0===(l=(n=this.hooks[t]).length)&&i&&i(),n.forEach(function(d){d(s,r)})},{register:function(t){if(void 0===EPUBJS.hooks[t]&&(EPUBJS.hooks[t]={}),"object"!=typeof EPUBJS.hooks[t])throw"Already registered: "+t;return EPUBJS.hooks[t]},mixin:function(t){for(var i in e.prototype)t[i]=e.prototype[i]}}}(),EPUBJS.Layout=EPUBJS.Layout||{},EPUBJS.Layout.isFixedLayout=function(e){var t=e.querySelector("[name=viewport]");if(!t||!t.hasAttribute("content"))return!1;var i=t.getAttribute("content");return/width=(\d+)/.test(i)&&/height=(\d+)/.test(i)},EPUBJS.Layout.Reflowable=function(){this.documentElement=null,this.spreadWidth=null},EPUBJS.Layout.Reflowable.prototype.format=function(e,t,i,r){var n=EPUBJS.core.prefixed("columnAxis"),l=EPUBJS.core.prefixed("columnGap"),s=EPUBJS.core.prefixed("columnWidth"),d=EPUBJS.core.prefixed("columnFill"),c=Math.floor(t),o=Math.floor(c/8),h=r>=0?r:o%2==0?o:o-1;return this.documentElement=e,this.spreadWidth=c+h,e.style.overflow="hidden",e.style.width=c+"px",e.style.height=i+"px",e.style[n]="horizontal",e.style[d]="auto",e.style[s]=c+"px",e.style[l]=h+"px",this.colWidth=c,this.gap=h,{pageWidth:this.spreadWidth,pageHeight:i}},EPUBJS.Layout.Reflowable.prototype.calculatePages=function(){var t;return this.documentElement.style.width="auto",{displayedPages:t=Math.ceil(this.documentElement.scrollWidth/this.spreadWidth),pageCount:t}},EPUBJS.Layout.ReflowableSpreads=function(){this.documentElement=null,this.spreadWidth=null},EPUBJS.Layout.ReflowableSpreads.prototype.format=function(e,t,i,r){var n=EPUBJS.core.prefixed("columnAxis"),l=EPUBJS.core.prefixed("columnGap"),s=EPUBJS.core.prefixed("columnWidth"),d=EPUBJS.core.prefixed("columnFill"),h=Math.floor(t),u=h%2==0?h:h-1,g=Math.floor(u/8),_=r>=0?r:g%2==0?g:g-1,m=Math.floor((u-_)/2);return this.documentElement=e,this.spreadWidth=2*(m+_),e.style.overflow="hidden",e.style.width=u+"px",e.style.height=i+"px",e.style[n]="horizontal",e.style[d]="auto",e.style[l]=_+"px",e.style[s]=m+"px",this.colWidth=m,this.gap=_,{pageWidth:this.spreadWidth,pageHeight:i}},EPUBJS.Layout.ReflowableSpreads.prototype.calculatePages=function(){var t=Math.ceil(this.documentElement.scrollWidth/this.spreadWidth);return this.documentElement.style.width=t*this.spreadWidth-this.gap+"px",{displayedPages:t,pageCount:2*t}},EPUBJS.Layout.Fixed=function(){this.documentElement=null},EPUBJS.Layout.Fixed.prototype.format=function(e,t,i,r){var o,h,u,n=EPUBJS.core.prefixed("columnWidth"),l=EPUBJS.core.prefixed("transform"),s=EPUBJS.core.prefixed("transformOrigin"),d=e.querySelector("[name=viewport]");this.documentElement=e,d&&d.hasAttribute("content")&&((o=d.getAttribute("content").split(","))[0]&&(h=o[0].replace("width=","")),o[1]&&(u=o[1].replace("height=","")));var g=t/h,_=i/u,m=g<_?g:_;return e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style[l]="scale("+m+") translate(-50%, -50%)",e.style[s]="0px 0px 0px",e.style.width=h+"px"||"auto",e.style.height=u+"px"||"auto",e.style[n]="auto",e.style.overflow="auto",this.colWidth=h,this.gap=0,{pageWidth:h,pageHeight:u}},EPUBJS.Layout.Fixed.prototype.calculatePages=function(){return{displayedPages:1,pageCount:1}},EPUBJS.Locations=function(e,t,i){this.spine=e,this.store=t,this.credentials=i,this.epubcfi=new EPUBJS.EpubCFI,this._locations=[],this.total=0,this.break=150,this._current=0},EPUBJS.Locations.prototype.generate=function(e){var t=new RSVP.defer,i=-1,r=this.spine.length,l=function(s){var d,c=i+1,o=s||new RSVP.defer;return c>=r?o.resolve():(d=new EPUBJS.Chapter(this.spine[i=c],this.store,this.credentials),this.process(d).then(function(){setTimeout(function(){l(o)},1)})),o.promise}.bind(this);return"number"==typeof e&&(this.break=e),l().then(function(){this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),t.resolve(this._locations)}.bind(this)),t.promise},EPUBJS.Locations.prototype.process=function(e){return e.load().then(function(t){var i,s,d,r=t,n=r.documentElement.querySelector("body"),l=0,c=this.break;this.sprint(n,function(o){var u,h=o.length,g=0;if(0===o.textContent.trim().length)return!1;for(0===l&&(i=r.createRange()).setStart(o,0),(u=c-l)>h&&(l+=h,g=h);g<h;)u=c-l,0===l&&(g+=1,(i=r.createRange()).setStart(o,g)),g+u>=h?(l+=h-g,g=h):(i.setEnd(o,g+=u),d=e.cfiFromRange(i),this._locations.push(d),l=0);s=o}.bind(this)),i&&(i.setEnd(s,s.length),d=e.cfiFromRange(i),this._locations.push(d),l=0)}.bind(this))},EPUBJS.Locations.prototype.sprint=function(e,t){for(var i,r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);i=r.nextNode();)t(i)},EPUBJS.Locations.prototype.locationFromCfi=function(e){return 0===this._locations.length?-1:EPUBJS.core.locationOf(e,this._locations,this.epubcfi.compare)},EPUBJS.Locations.prototype.percentageFromCfi=function(e){var t=this.locationFromCfi(e);return this.percentageFromLocation(t)},EPUBJS.Locations.prototype.percentageFromLocation=function(e){return e&&this.total?e/this.total:0},EPUBJS.Locations.prototype.cfiFromLocation=function(e){var t=-1;return"number"!=typeof e&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t},EPUBJS.Locations.prototype.cfiFromPercentage=function(e){var i=Math.ceil(this.total*(e>1?e/100:e));return this.cfiFromLocation(i)},EPUBJS.Locations.prototype.load=function(e){return this._locations=JSON.parse(e),this.total=this._locations.length-1,this._locations},EPUBJS.Locations.prototype.save=function(e){return JSON.stringify(this._locations)},EPUBJS.Locations.prototype.getCurrent=function(e){return this._current},EPUBJS.Locations.prototype.setCurrent=function(e){var t;if("string"==typeof e)this._currentCfi=e;else{if("number"!=typeof e)return;this._current=e}0!==this._locations.length&&("string"==typeof e?(t=this.locationFromCfi(e),this._current=t):t=e,this.trigger("changed",{percentage:this.percentageFromLocation(t)}))},Object.defineProperty(EPUBJS.Locations.prototype,"currentLocation",{get:function(){return this._current},set:function(e){this.setCurrent(e)}}),RSVP.EventTarget.mixin(EPUBJS.Locations.prototype),EPUBJS.Pagination=function(e){this.pages=[],this.locations=[],this.epubcfi=new EPUBJS.EpubCFI,e&&e.length&&this.process(e)},EPUBJS.Pagination.prototype.process=function(e){e.forEach(function(t){this.pages.push(t.page),this.locations.push(t.cfi)},this),this.pageList=e,this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage},EPUBJS.Pagination.prototype.pageFromCfi=function(e){var t=-1;if(0===this.locations.length)return-1;var i=EPUBJS.core.indexOfSorted(e,this.locations,this.epubcfi.compare);return-1!=i?t=this.pages[i]:void 0!==(t=(i=EPUBJS.core.locationOf(e,this.locations,this.epubcfi.compare))-1>=0?this.pages[i-1]:this.pages[0])||(t=-1),t},EPUBJS.Pagination.prototype.cfiFromPage=function(e){var t=-1;"number"!=typeof e&&(e=parseInt(e));var i=this.pages.indexOf(e);return-1!=i&&(t=this.locations[i]),t},EPUBJS.Pagination.prototype.pageFromPercentage=function(e){return Math.round(this.totalPages*e)},EPUBJS.Pagination.prototype.percentageFromPage=function(e){return Math.round((e-this.firstPage)/this.totalPages*1e3)/1e3},EPUBJS.Pagination.prototype.percentageFromCfi=function(e){var t=this.pageFromCfi(e);return this.percentageFromPage(t)},EPUBJS.Parser=function(e){this.baseUrl=e||""},EPUBJS.Parser.prototype.container=function(e){var t,i;if(e){if(t=e.querySelector("rootfile"))return{packagePath:i=t.getAttribute("full-path"),basePath:EPUBJS.core.uri(i).directory,encoding:e.xmlEncoding};console.error("No RootFile Found")}else console.error("Container File Not Found")},EPUBJS.Parser.prototype.identifier=function(e){var t;if(e){if(t=e.querySelector("metadata"))return this.getElementText(t,"identifier");console.error("No Metadata Found")}else console.error("Package File Not Found")},EPUBJS.Parser.prototype.packageContents=function(e,t){var r,n,l,s,d,c,o,h,u,g,_,i=this;if(t&&(this.baseUrl=t),e)if(r=e.querySelector("metadata"))if(n=e.querySelector("manifest")){if(l=e.querySelector("spine"))return s=i.manifest(n),d=i.findNavPath(n),c=i.findTocPath(n,l),o=i.findCoverPath(e),h=Array.prototype.indexOf.call(l.parentNode.childNodes,l),u=i.spine(l,s),g={},u.forEach(function(m){g[m.href]=m.index}),(_=i.metadata(r)).direction=l.getAttribute("page-progression-direction"),{metadata:_,spine:u,manifest:s,navPath:d,tocPath:c,coverPath:o,spineNodeIndex:h,spineIndexByURL:g};console.error("No Spine Found")}else console.error("No Manifest Found");else console.error("No Metadata Found");else console.error("Package File Not Found")},EPUBJS.Parser.prototype.findNavPath=function(e){var t=e.querySelector("item[properties$='nav'], item[properties^='nav '], item[properties*=' nav ']");return!!t&&t.getAttribute("href")},EPUBJS.Parser.prototype.findTocPath=function(e,t){var r,i=e.querySelector("item[media-type='application/x-dtbncx+xml']");return i||(r=t.getAttribute("toc"))&&(i=e.querySelector("item[id='"+r+"']")),!!i&&i.getAttribute("href")},EPUBJS.Parser.prototype.metadata=function(e){var t={},i=this;return t.bookTitle=i.getElementText(e,"title"),t.creator=i.getElementText(e,"creator"),t.description=i.getElementText(e,"description"),t.pubdate=i.getElementText(e,"date"),t.publisher=i.getElementText(e,"publisher"),t.identifier=i.getElementText(e,"identifier"),t.language=i.getElementText(e,"language"),t.rights=i.getElementText(e,"rights"),t.modified_date=i.querySelectorText(e,"meta[property='dcterms:modified']"),t.layout=i.querySelectorText(e,"meta[property='rendition:layout']"),t.orientation=i.querySelectorText(e,"meta[property='rendition:orientation']"),t.spread=i.querySelectorText(e,"meta[property='rendition:spread']"),t},EPUBJS.Parser.prototype.findCoverPath=function(e){if("2.0"===e.querySelector("package").getAttribute("version")){var i=e.querySelector('meta[name="cover"]');if(i){var r=i.getAttribute("content"),n=e.querySelector("item[id='"+r+"']");return!!n&&n.getAttribute("href")}return!1}var l=e.querySelector("item[properties='cover-image']");return!!l&&l.getAttribute("href")},EPUBJS.Parser.prototype.getElementText=function(e,t){var r,i=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t);return i&&0!==i.length&&(r=i[0]).childNodes.length?r.childNodes[0].nodeValue:""},EPUBJS.Parser.prototype.querySelectorText=function(e,t){var i=e.querySelector(t);return i&&i.childNodes.length?i.childNodes[0].nodeValue:""},EPUBJS.Parser.prototype.manifest=function(e){var t=this.baseUrl,i={},r=e.querySelectorAll("item");return Array.prototype.slice.call(r).forEach(function(l){var s=l.getAttribute("id"),d=l.getAttribute("href")||"",c=l.getAttribute("media-type")||"",o=l.getAttribute("properties")||"";i[s]={href:d,url:t+d,type:c,properties:o}}),i},EPUBJS.Parser.prototype.spine=function(e,t){var i=e.getElementsByTagName("itemref"),r=Array.prototype.slice.call(i),n=EPUBJS.core.indexOfElementNode(e),l=new EPUBJS.EpubCFI;return r.map(function(s,d){var c=s.getAttribute("idref"),o=l.generateChapterComponent(n,d,c),h=s.getAttribute("properties")||"",u=h.length?h.split(" "):[],g=t[c].properties,_=g.length?g.split(" "):[];return{id:c,linear:s.getAttribute("linear")||"",properties:u,manifestProperties:_,href:t[c].href,url:t[c].url,index:d,cfiBase:o,cfi:"epubcfi("+o+")"}})},EPUBJS.Parser.prototype.querySelectorByType=function(e,t,i){var r=e.querySelector(t+'[*|type="'+i+'"]');if(null!==r&&0!==r.length)return r;r=e.querySelectorAll(t);for(var n=0;n<r.length;n++)if(r[n].getAttributeNS("http://www.idpf.org/2007/ops","type")===i)return r[n]},EPUBJS.Parser.prototype.nav=function(e,t,i){var r=this.querySelectorByType(e,"nav","toc");return this.navItems(r,t,i)},EPUBJS.Parser.prototype.navItems=function(e,t,i){if(!e)return[];var r=e.querySelector("ol");if(!r)return[];var l=[];return Array.prototype.forEach.call(r.childNodes,function(s){if("li"===s.tagName){var d=s.querySelector("a, span"),c=d.getAttribute("href")||"",o=d.textContent||"",h=c.split("#"),g=t[h[0]],_=i[g],m=_?_.cfi:"",w=this.navItems(s,t,i);l.push({href:c,label:o,spinePos:g,subitems:w,cfi:m})}}.bind(this)),l},EPUBJS.Parser.prototype.toc=function(e,t,i){var l,c,r=e.querySelectorAll("navMap navPoint"),n=r.length,s={},d=[];if(!r||0===n)return d;for(l=0;l<n;++l)s[(c=this.tocItem(r[l],t,i)).id]=c,c.parent?s[c.parent].subitems.push(c):d.push(c);return d},EPUBJS.Parser.prototype.tocItem=function(e,t,i){var m,r=e.getAttribute("id")||!1,l=e.querySelector("content").getAttribute("src"),s=e.querySelector("navLabel"),d=s.textContent?s.textContent:"",h=t[l.split("#")[0]],u=i[h],_=e.parentNode,w=u?u.cfi:"";return _&&"navPoint"===_.nodeName&&(m=_.getAttribute("id")),r||(h?(r=(u=i[h]).id,w=u.cfi):(r="epubjs-autogen-toc-id-"+EPUBJS.core.uuid(),e.setAttribute("id",r))),{id:r,href:l,label:d,spinePos:h,subitems:[],parent:m,cfi:w}},EPUBJS.Parser.prototype.pageList=function(e,t,i){var s,o,r=this.querySelectorByType(e,"nav","page-list"),n=r?r.querySelectorAll("ol li"):[],l=n.length,c=[];if(!n||0===l)return c;for(s=0;s<l;++s)o=this.pageListItem(n[s],t,i),c.push(o);return c},EPUBJS.Parser.prototype.pageListItem=function(e,t,i){e.getAttribute("id");var o,n=e.querySelector("a"),l=n.getAttribute("href")||"",d=parseInt(n.textContent||"");return-1!=l.indexOf("epubcfi")?{cfi:(o=l.split("#")).length>1&&o[1],href:l,packageUrl:o[0],page:d}:{href:l,page:d}},EPUBJS.Render.Iframe=function(){this.iframe=null,this.document=null,this.window=null,this.docEl=null,this.bodyEl=null,this.leftPos=0,this.pageWidth=0,this.id=EPUBJS.core.uuid()},EPUBJS.Render.Iframe.prototype.create=function(){return this.element=document.createElement("div"),this.element.id="epubjs-view:"+this.id,this.isMobile=navigator.userAgent.match(/(iPad|iPhone|iPod|Mobile|Android)/g),this.transform=EPUBJS.core.prefixed("transform"),this.element},EPUBJS.Render.Iframe.prototype.addIframe=function(){return this.iframe=document.createElement("iframe"),this.iframe.id="epubjs-iframe:"+this.id,this.iframe.scrolling=this.scrolling||"no",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.addEventListener("load",this.loaded.bind(this),!1),(this._width||this._height)&&(this.iframe.height=this._height,this.iframe.width=this._width),this.iframe},EPUBJS.Render.Iframe.prototype.load=function(e,t){var i=this,r=new RSVP.defer;return this.window&&this.unload(),this.iframe&&this.element.removeChild(this.iframe),this.iframe=this.addIframe(),this.element.appendChild(this.iframe),this.iframe.onload=function(n){i.document=i.iframe.contentDocument,i.docEl=i.document.documentElement,i.headEl=i.document.head,i.bodyEl=i.document.body||i.document.querySelector("body"),i.window=i.iframe.contentWindow,i.window.addEventListener("resize",i.resized.bind(i),!1),i.leftPos=0,i.setLeft(0),i.bodyEl&&(i.bodyEl.style.margin="0"),r.resolve(i.docEl)},this.iframe.onerror=function(n){r.reject({message:"Error Loading Contents: "+n,stack:(new Error).stack})},this.document=this.iframe.contentDocument,this.document?(this.iframe.contentDocument.open(),this.iframe.contentDocument.write(e),this.iframe.contentDocument.close(),r.promise):(r.reject(new Error("No Document Available")),r.promise)},EPUBJS.Render.Iframe.prototype.loaded=function(e){var r,t=this.iframe.contentWindow.location.href;this.document=this.iframe.contentDocument,this.docEl=this.document.documentElement,this.headEl=this.document.head,this.bodyEl=this.document.body||this.document.querySelector("body"),this.window=this.iframe.contentWindow,this.window.focus(),"about:blank"!=t&&(r=this.iframe.contentDocument.querySelector("base").getAttribute("href"),this.trigger("render:loaded",r))},EPUBJS.Render.Iframe.prototype.resize=function(e,t){this.element&&(this.element.style.height=t,!isNaN(e)&&e%2!=0&&(e+=1),this.element.style.width=e,this.iframe&&(this.iframe.height=t,this.iframe.width=e),this._height=t,this._width=e,this.width=this.element.getBoundingClientRect().width||e,this.height=this.element.getBoundingClientRect().height||t)},EPUBJS.Render.Iframe.prototype.resized=function(e){this.width=this.iframe.getBoundingClientRect().width,this.height=this.iframe.getBoundingClientRect().height},EPUBJS.Render.Iframe.prototype.totalWidth=function(){return this.docEl.scrollWidth},EPUBJS.Render.Iframe.prototype.totalHeight=function(){return this.docEl.scrollHeight},EPUBJS.Render.Iframe.prototype.setPageDimensions=function(e,t){this.pageWidth=e,this.pageHeight=t},EPUBJS.Render.Iframe.prototype.setDirection=function(e){this.direction=e,this.docEl&&"rtl"==this.docEl.dir&&(this.docEl.dir="rtl","pre-paginated"!==this.layout&&(this.docEl.style.position="static",this.docEl.style.right="auto"))},EPUBJS.Render.Iframe.prototype.setLeft=function(e){this.isMobile?this.docEl.style[this.transform]="translate("+-e+"px, 0)":this.document.defaultView.scrollTo(e,0)},EPUBJS.Render.Iframe.prototype.setLayout=function(e){this.layout=e},EPUBJS.Render.Iframe.prototype.setStyle=function(e,t,i){i&&(e=EPUBJS.core.prefixed(e)),this.bodyEl&&(this.bodyEl.style[e]=t)},EPUBJS.Render.Iframe.prototype.removeStyle=function(e){this.bodyEl&&(this.bodyEl.style[e]="")},EPUBJS.Render.Iframe.prototype.setClasses=function(e){this.bodyEl&&(this.bodyEl.className=e.join(" "))},EPUBJS.Render.Iframe.prototype.addHeadTag=function(e,t,i){var r=i||this.document,n=r.createElement(e),l=r.head;for(var s in t)n.setAttribute(s,t[s]);l&&l.insertBefore(n,l.firstChild)},EPUBJS.Render.Iframe.prototype.page=function(e){this.leftPos=this.pageWidth*(e-1),"rtl"===this.direction&&(this.leftPos=-1*this.leftPos),this.setLeft(this.leftPos)},EPUBJS.Render.Iframe.prototype.getPageNumberByElement=function(e){var t;if(e)return t=this.leftPos+e.getBoundingClientRect().left,Math.floor(t/this.pageWidth)+1},EPUBJS.Render.Iframe.prototype.getPageNumberByRect=function(e){return Math.floor((this.leftPos+e.left)/this.pageWidth)+1},EPUBJS.Render.Iframe.prototype.getBaseElement=function(){return this.bodyEl},EPUBJS.Render.Iframe.prototype.getDocumentElement=function(){return this.docEl},EPUBJS.Render.Iframe.prototype.isElementVisible=function(e){var t,i;return!!(e&&"function"==typeof e.getBoundingClientRect&&(t=e.getBoundingClientRect(),i=t.left,0!==t.width&&0!==t.height&&i>=0&&i<this.pageWidth))},EPUBJS.Render.Iframe.prototype.scroll=function(e){this.scrolling=e?"yes":"no"},EPUBJS.Render.Iframe.prototype.unload=function(){this.window.removeEventListener("resize",this.resized),this.iframe.removeEventListener("load",this.loaded)},RSVP.EventTarget.mixin(EPUBJS.Render.Iframe.prototype),EPUBJS.Renderer=function(e,t){this.listenedEvents=["keydown","keyup","keypressed","mouseup","mousedown","click"],this.upEvent="mouseup",this.downEvent="mousedown","ontouchstart"in document.documentElement&&(this.listenedEvents.push("touchstart","touchend"),this.upEvent="touchend",this.downEvent="touchstart"),e&&typeof EPUBJS.Render[e]<"u"?this.render=new EPUBJS.Render[e]:console.error("Not a Valid Rendering Method"),this.render.on("render:loaded",this.loaded.bind(this)),this.caches={},this.epubcfi=new EPUBJS.EpubCFI,this.spreads=!0,this.isForcedSingle=!1,this.resized=this.onResized.bind(this),this.layoutSettings={},this.hidden=t||!1,EPUBJS.Hooks.mixin(this),this.getHooks("beforeChapterDisplay"),this._q=EPUBJS.core.queue(this),this._moving=!1},EPUBJS.Renderer.prototype.Events=["renderer:keydown","renderer:keyup","renderer:keypressed","renderer:mouseup","renderer:mousedown","renderer:click","renderer:touchstart","renderer:touchend","renderer:selected","renderer:chapterUnload","renderer:chapterUnloaded","renderer:chapterDisplayed","renderer:locationChanged","renderer:visibleLocationChanged","renderer:visibleRangeChanged","renderer:resized","renderer:spreads","renderer:beforeResize"],EPUBJS.Renderer.prototype.initialize=function(e,t,i){this.container=e,this.element=this.render.create(),this.initWidth=t,this.initHeight=i,this.width=t||this.container.clientWidth,this.height=i||this.container.clientHeight,this.container.appendChild(this.element),t&&i?this.render.resize(this.width,this.height):this.render.resize("100%","100%"),document.addEventListener("orientationchange",this.onResized.bind(this))},EPUBJS.Renderer.prototype.displayChapter=function(e,t){if(this._moving){console.warning("Rendering In Progress");var r=new RSVP.defer;return r.reject({message:"Rendering In Progress",stack:(new Error).stack}),r.promise}return this._moving=!0,e.render().then(function(n){return this.currentChapter&&(this.trigger("renderer:chapterUnload"),this.currentChapter.unload(),this.render.window&&this.render.window.removeEventListener("resize",this.resized),this.removeEventListeners(),this.removeSelectionListeners(),this.trigger("renderer:chapterUnloaded"),this.contents=null,this.doc=null,this.pageMap=null),this.currentChapter=e,this.chapterPos=1,this.currentChapterCfiBase=e.cfiBase,this.layoutSettings=this.reconcileLayoutSettings(t,e.properties),this.load(n,e.href)}.bind(this),function(){this._moving=!1}.bind(this))},EPUBJS.Renderer.prototype.load=function(e,t){var i=new RSVP.defer;return this.layoutMethod=this.determineLayout(this.layoutSettings),this.layout=new EPUBJS.Layout[this.layoutMethod],this.visible(!1),this.render.load(e,t).then(function(n){EPUBJS.Layout.isFixedLayout(n)&&(this.layoutSettings.layout="pre-paginated",this.layoutMethod=this.determineLayout(this.layoutSettings),this.layout=new EPUBJS.Layout[this.layoutMethod]),this.render.setLayout(this.layoutSettings.layout),"rtl"==this.render.direction&&"rtl"!=this.render.docEl.dir&&(this.render.docEl.dir="rtl","pre-paginated"!==this.render.layout&&(this.render.docEl.style.position="absolute",this.render.docEl.style.right="0")),this.afterLoad(n),this.beforeDisplay(function(){this.afterDisplay(),this.visible(!0),i.resolve(this)}.bind(this))}.bind(this)),i.promise},EPUBJS.Renderer.prototype.afterLoad=function(e){this.contents=e,this.doc=this.render.document,this.formated=this.layout.format(e,this.render.width,this.render.height,this.gap),this.render.setPageDimensions(this.formated.pageWidth,this.formated.pageHeight),!this.initWidth&&!this.initHeight&&this.render.window.addEventListener("resize",this.resized,!1),this.addEventListeners(),this.addSelectionListeners()},EPUBJS.Renderer.prototype.afterDisplay=function(e){var t=this.layout.calculatePages(),i=this.currentChapter,r=this._q.length();this._moving=!1,this.updatePages(t),this.visibleRangeCfi=this.getVisibleRangeCfi(),this.currentLocationCfi=this.visibleRangeCfi.start,0===r&&(this.trigger("renderer:locationChanged",this.currentLocationCfi),this.trigger("renderer:visibleRangeChanged",this.visibleRangeCfi)),i.cfi=this.currentLocationCfi,this.trigger("renderer:chapterDisplayed",i)},EPUBJS.Renderer.prototype.loaded=function(e){this.trigger("render:loaded",e)},EPUBJS.Renderer.prototype.reconcileLayoutSettings=function(e,t){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return t.forEach(function(n){var d,c,l=n.replace("rendition:",""),s=l.indexOf("-");-1!=s&&(d=l.slice(0,s),c=l.slice(s+1),i[d]=c)}),i},EPUBJS.Renderer.prototype.determineLayout=function(e){var t=this.determineSpreads(this.minSpreadWidth),i=t?"ReflowableSpreads":"Reflowable",r=!1;return"pre-paginated"===e.layout&&(i="Fixed",r=!0,t=!1),"reflowable"===e.layout&&"none"===e.spread&&(i="Reflowable",r=!1,t=!1),"reflowable"===e.layout&&"both"===e.spread&&(i="ReflowableSpreads",r=!1,t=!0),this.spreads=t,this.render.scroll(r),this.trigger("renderer:spreads",t),i},EPUBJS.Renderer.prototype.beforeDisplay=function(e,t){this.triggerHooks("beforeChapterDisplay",e,this)},EPUBJS.Renderer.prototype.updatePages=function(e){this.pageMap=this.mapPage(),this.displayedPages=this.spreads?Math.ceil(this.pageMap.length/2):this.pageMap.length,this.currentChapter.pages=this.pageMap.length,this._q.flush()},EPUBJS.Renderer.prototype.reformat=function(){var i,r,e=this;this.contents&&((r=this.determineSpreads(this.minSpreadWidth))!=this.spreads&&(this.spreads=r,this.layoutMethod=this.determineLayout(this.layoutSettings),this.layout=new EPUBJS.Layout[this.layoutMethod]),this.chapterPos=1,this.render.page(this.chapterPos),e.formated=e.layout.format(e.render.docEl,e.render.width,e.render.height,e.gap),e.render.setPageDimensions(e.formated.pageWidth,e.formated.pageHeight),i=e.layout.calculatePages(),e.updatePages(i),e.currentLocationCfi&&e.gotoCfi(e.currentLocationCfi))},EPUBJS.Renderer.prototype.visible=function(e){if(typeof e>"u")return this.element.style.visibility;!0!==e||this.hidden?!1===e&&(this.element.style.visibility="hidden"):this.element.style.visibility="visible"},EPUBJS.Renderer.prototype.remove=function(){this.render.window&&(this.render.unload(),this.render.window.removeEventListener("resize",this.resized),this.removeEventListeners(),this.removeSelectionListeners()),this.container.removeChild(this.element)},EPUBJS.Renderer.prototype.applyStyles=function(e){for(var t in e)this.render.setStyle(t,e[t])},EPUBJS.Renderer.prototype.setStyle=function(e,t,i){this.render.setStyle(e,t,i)},EPUBJS.Renderer.prototype.removeStyle=function(e){this.render.removeStyle(e)},EPUBJS.Renderer.prototype.setClasses=function(e){this.render.setClasses(e)},EPUBJS.Renderer.prototype.applyHeadTags=function(e){for(var t in e)this.render.addHeadTag(t,e[t])},EPUBJS.Renderer.prototype.page=function(e){return this.pageMap?e>=1&&e<=this.displayedPages&&(this.chapterPos=e,this.render.page(e),this.visibleRangeCfi=this.getVisibleRangeCfi(),this.currentLocationCfi=this.visibleRangeCfi.start,this.trigger("renderer:locationChanged",this.currentLocationCfi),this.trigger("renderer:visibleRangeChanged",this.visibleRangeCfi),!0):(console.warn("pageMap not set, queuing"),this._q.enqueue("page",arguments),!0)},EPUBJS.Renderer.prototype.nextPage=function(){return this.page(this.chapterPos+1)},EPUBJS.Renderer.prototype.prevPage=function(){return this.page(this.chapterPos-1)},EPUBJS.Renderer.prototype.pageByElement=function(e){var t;e&&(t=this.render.getPageNumberByElement(e),this.page(t))},EPUBJS.Renderer.prototype.lastPage=function(){if(this._moving)return this._q.enqueue("lastPage",arguments);this.page(this.displayedPages)},EPUBJS.Renderer.prototype.firstPage=function(){if(this._moving)return this._q.enqueue("firstPage",arguments);this.page(1)},EPUBJS.Renderer.prototype.section=function(e){var t=this.doc.getElementById(e);t&&this.pageByElement(t)},EPUBJS.Renderer.prototype.firstElementisTextNode=function(e){var t=e.childNodes;return!!(t.length&&t[0]&&3===t[0].nodeType&&t[0].textContent.trim().length)},EPUBJS.Renderer.prototype.isGoodNode=function(e){return-1!==["audio","canvas","embed","iframe","img","math","object","svg","video"].indexOf(e.tagName.toLowerCase())||this.firstElementisTextNode(e)},EPUBJS.Renderer.prototype.walk=function(e,t,i){for(var r,n,d,s=e,c=[s],h=0;!r&&c.length;){if(e=c.shift(),this.containsPoint(e,t,i)&&this.isGoodNode(e)&&(r=e),!r&&e&&e.childElementCount>0){if(!(n=e.children)||!n.length)return r;for(var u=(n.length?n.length:0)-1;u>=0;u--)n[u]!=d&&c.unshift(n[u])}if(!r&&0===c.length&&s&&null!==s.parentNode&&(c.push(s.parentNode),d=s,s=s.parentNode),++h>1e4){console.error("ENDLESS LOOP");break}}return r},EPUBJS.Renderer.prototype.containsPoint=function(e,t,i){var r;return!!(e&&"function"==typeof e.getBoundingClientRect&&(r=e.getBoundingClientRect(),0!==r.width&&0!==r.height&&r.left>=t&&t<=r.left+r.width))},EPUBJS.Renderer.prototype.textSprint=function(e,t){var r,n,i=function(l){return/^\s*$/.test(l.data)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT};try{for(r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:i},!1);n=r.nextNode();)t(n)}catch{for(r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,i,!1);n=r.nextNode();)t(n)}},EPUBJS.Renderer.prototype.sprint=function(e,t){for(var r,i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);r=i.nextNode();)t(r)},EPUBJS.Renderer.prototype.mapPage=function(){var c,o,h,g,_,m,w,A,e=this,t=[],i=this.render.getBaseElement(),r=1,n=this.layout.colWidth+this.layout.gap,l=this.formated.pageWidth*(this.chapterPos-1),s=n*r-l,d=0,X=function(D){var M;return e.splitTextNodeIntoWordsRanges(D).forEach(function(W){var Se=W.getBoundingClientRect();!Se||0===Se.width&&0===Se.height||(Se.left+Se.width<s?t[r-1]||(W.collapse(!0),h=e.currentChapter.cfiFromRange(W),M=t.push({start:h,end:null})):(!c&&g&&(o=e.splitTextNodeIntoWordsRanges(g),c=o[o.length-1]),c&&t.length&&(c.collapse(!1),h=e.currentChapter.cfiFromRange(c),t[t.length-1]&&(t[t.length-1].end=h)),W.collapse(!0),h=e.currentChapter.cfiFromRange(W),M=t.push({start:h,end:null}),d=s=n*(r+=1)-l),c=W)}),M},z=this.render.getDocumentElement(),O=z.dir;return"rtl"==O&&(z.dir="ltr","pre-paginated"!==this.layoutSettings.layout&&(z.style.position="static")),this.textSprint(i,function(D){var M,B,W;if(D.nodeType==Node.TEXT_NODE){if((B=document.createRange()).selectNodeContents(D),!(M=B.getBoundingClientRect())||0===M.width&&0===M.height)return;M.left>d&&(W=X(D)),M.right>d&&(W=X(D)),g=D,W&&(c=null)}}),"rtl"==O&&(z.dir=O,"pre-paginated"!==this.layoutSettings.layout&&(z.style.left="auto",z.style.right="0")),!c&&g&&(o=e.splitTextNodeIntoWordsRanges(g),c=o[o.length-1]),c&&(c.collapse(!1),h=e.currentChapter.cfiFromRange(c),t[t.length-1].end=h),t.length||((_=this.doc.createRange()).selectNodeContents(i),_.collapse(!0),w=e.currentChapter.cfiFromRange(_),(m=this.doc.createRange()).selectNodeContents(i),m.collapse(!1),A=e.currentChapter.cfiFromRange(m),t.push({start:w,end:A})),c=null,o=void 0,_=null,m=null,i=null,t},EPUBJS.Renderer.prototype.indexOfBreakableChar=function(e,t){t||(t=0);for(var r=t;r<e.length;r++)if(-1!="- \t\r\n\b\f".indexOf(e.charAt(r)))return r;return-1},EPUBJS.Renderer.prototype.splitTextNodeIntoWordsRanges=function(e){var r,t=[],i=e.textContent.trim(),s=this.indexOfBreakableChar(i);if(-1===s)return(r=this.doc.createRange()).selectNodeContents(e),[r];for((r=this.doc.createRange()).setStart(e,0),r.setEnd(e,s),t.push(r),(r=this.doc.createRange()).setStart(e,s+1);-1!=s;)(s=this.indexOfBreakableChar(i,s+1))>0&&(r&&(r.setEnd(e,s),t.push(r)),(r=this.doc.createRange()).setStart(e,s+1));return r&&(r.setEnd(e,i.length),t.push(r)),t},EPUBJS.Renderer.prototype.rangePosition=function(e){var i;return(i=e.getClientRects()).length?i[0]:null},EPUBJS.Renderer.prototype.getPageCfi=function(){return this.pageMap[2*this.chapterPos-1].start},EPUBJS.Renderer.prototype.getRange=function(e,t,i){var r=this.doc.createRange();return document,document,this.visibileEl=this.findElementAfter(e,t),r.setStart(this.visibileEl,1),r},EPUBJS.Renderer.prototype.pagesInCurrentChapter=function(){return this.pageMap?this.pageMap.length:(console.warn("page map not loaded"),!1)},EPUBJS.Renderer.prototype.currentRenderedPage=function(){return this.pageMap?this.spreads&&this.pageMap.length>1?2*this.chapterPos-1:this.chapterPos:(console.warn("page map not loaded"),!1)},EPUBJS.Renderer.prototype.getRenderedPagesLeft=function(){return this.pageMap?this.pageMap.length-(this.spreads?2*this.chapterPos-1:this.chapterPos):(console.warn("page map not loaded"),!1)},EPUBJS.Renderer.prototype.getVisibleRangeCfi=function(){var e,t,i;return this.pageMap?(this.spreads?(i=t=this.pageMap[(e=2*this.chapterPos)-2],this.pageMap.length>1&&this.pageMap.length>e-1&&(i=this.pageMap[e-1])):i=t=this.pageMap[(e=this.chapterPos)-1],t||(console.warn("page range miss:",e,this.pageMap),i=t=this.pageMap[this.pageMap.length-1]),{start:t.start,end:i.end}):(console.warn("page map not loaded"),!1)},EPUBJS.Renderer.prototype.gotoCfi=function(e){var t,i,r;if(this._moving)return this._q.enqueue("gotoCfi",arguments);if(EPUBJS.core.isString(e)&&(e=this.epubcfi.parse(e)),typeof document.evaluate>"u")(i=this.epubcfi.addMarker(e,this.doc))&&(t=this.render.getPageNumberByElement(i),this.epubcfi.removeMarker(i,this.doc),this.page(t));else if(r=this.epubcfi.generateRangeFromCfi(e,this.doc)){var n=r.getBoundingClientRect();t=n?this.render.getPageNumberByRect(n):1,this.page(t),this.currentLocationCfi=e.str}else this.page(1)},EPUBJS.Renderer.prototype.findFirstVisible=function(e){var t=e||this.render.getBaseElement();return this.walk(t,0,0)||e},EPUBJS.Renderer.prototype.findElementAfter=function(e,t,i){var r=i||this.render.getBaseElement();return this.walk(r,e,t)||r},EPUBJS.Renderer.prototype.resize=function(e,t,i){this.width=e,this.height=t,!1!==i&&this.render.resize(this.width,this.height),this.contents&&this.reformat(),this.trigger("renderer:resized",{width:this.width,height:this.height})},EPUBJS.Renderer.prototype.onResized=function(e){this.trigger("renderer:beforeResize"),this.resize(this.container.clientWidth,this.container.clientHeight,!1)},EPUBJS.Renderer.prototype.addEventListeners=function(){this.render.document&&this.listenedEvents.forEach(function(e){this.render.document.addEventListener(e,this.triggerEvent.bind(this),!1)},this)},EPUBJS.Renderer.prototype.removeEventListeners=function(){this.render.document&&this.listenedEvents.forEach(function(e){this.render.document.removeEventListener(e,this.triggerEvent,!1)},this)},EPUBJS.Renderer.prototype.triggerEvent=function(e){this.trigger("renderer:"+e.type,e)},EPUBJS.Renderer.prototype.addSelectionListeners=function(){this.render.document.addEventListener("selectionchange",this.onSelectionChange.bind(this),!1)},EPUBJS.Renderer.prototype.removeSelectionListeners=function(){this.render.document&&this.doc.removeEventListener("selectionchange",this.onSelectionChange,!1)},EPUBJS.Renderer.prototype.onSelectionChange=function(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){this.selectedRange=this.render.window.getSelection(),this.trigger("renderer:selected",this.selectedRange)}.bind(this),500)},EPUBJS.Renderer.prototype.setMinSpreadWidth=function(e){this.minSpreadWidth=e,this.spreads=this.determineSpreads(e)},EPUBJS.Renderer.prototype.determineSpreads=function(e){return!(this.isForcedSingle||!e||this.width<e)},EPUBJS.Renderer.prototype.forceSingle=function(e){this.isForcedSingle=!!e},EPUBJS.Renderer.prototype.setGap=function(e){this.gap=e},EPUBJS.Renderer.prototype.setDirection=function(e){this.direction=e,this.render.setDirection(this.direction)},EPUBJS.Renderer.prototype.replace=function(e,t,i,r){var n=this.contents.querySelectorAll(e),l=Array.prototype.slice.call(n),s=l.length;0!==s?l.forEach(function(d){var c=!1;t(d,function(h,u){!1===c&&(s--,r&&r(h,u,s),s<=0&&i&&i(!0),c=!0)})}.bind(this)):i(!1)},RSVP.EventTarget.mixin(EPUBJS.Renderer.prototype),(EPUBJS=EPUBJS||{}).replace={},EPUBJS.replace.hrefs=function(e,t){var i=this;t.replace("a[href]",function(n,l){var c,o,g,_,s=n.getAttribute("href"),d=s.search("://");0!==s.indexOf("mailto:")?(-1!=d?n.setAttribute("target","_blank"):(_=t.render.docEl.querySelector("base").getAttribute("href"),c=(g=EPUBJS.core.uri(_)).directory,0===s.indexOf("#")&&(s=g.filename+s),o=c?EPUBJS.core.resolveUrl("file"===g.protocol?g.base:c,s):s,n.onclick=function(){return i.trigger("book:linkClicked",s),i.goto(o),!1}),l()):l()},e)},EPUBJS.replace.head=function(e,t){t.replaceWithStored("link[href]","href",EPUBJS.replace.links,e)},EPUBJS.replace.resources=function(e,t){t.replaceWithStored("[src]","src",EPUBJS.replace.srcs,e)},EPUBJS.replace.posters=function(e,t){t.replaceWithStored("[poster]","poster",EPUBJS.replace.srcs,e)},EPUBJS.replace.svg=function(e,t){t.replaceWithStored("svg image","xlink:href",function(i,r,n){i.getUrl(r).then(n)},e)},EPUBJS.replace.srcs=function(e,t,i){-1===t.search("://")?e.getUrl(t).then(i):i()},EPUBJS.replace.links=function(e,t,i,r){"stylesheet"===r.getAttribute("rel")?EPUBJS.replace.stylesheets(e,t).then(function(n,l){i(n,l)},function(n){i(null)}):e.getUrl(t).then(i,function(n){i(null)})},EPUBJS.replace.stylesheets=function(e,t){var i=new RSVP.defer;if(e)return e.getText(t).then(function(r){EPUBJS.replace.cssImports(e,t,r).then(function(l){EPUBJS.replace.cssUrls(e,t,r=l+r).then(function(s){var d=window.URL||window.webkitURL||window.mozURL,c=new Blob([s],{type:"text/css"}),o=d.createObjectURL(c);i.resolve(o)},function(s){i.reject(s)})},function(l){i.reject(l)})},function(r){i.reject(r)}),i.promise},EPUBJS.replace.cssImports=function(e,t,i){var r=new RSVP.defer;if(e){for(var l,n=/@import\s+(?:url\()?\'?\"?((?!data:)[^\'|^\"^\)]*)\'?\"?\)?/gi,s=[],d="";l=n.exec(i);)s.push(l[1]);return 0===s.length&&r.resolve(d),s.forEach(function(c){var o=EPUBJS.core.resolveUrl(t,c);o=EPUBJS.core.uri(o).path,e.getText(o).then(function(h){d+=h,s.indexOf(c)===s.length-1&&r.resolve(d)},function(h){r.reject(h)})}),r.promise}},EPUBJS.replace.cssUrls=function(e,t,i){var r=new RSVP.defer,n=i.match(/url\(\'?\"?((?!data:)[^\'|^\"^\)]*)\'?\"?\)/g);if(e){if(!n)return r.resolve(i),r.promise;var l=n.map(function(s){var d=EPUBJS.core.resolveUrl(t,s.replace(/url\(|[|\)|\'|\"]|\?.*$/g,""));return e.getUrl(d).then(function(c){i=i.replace(s,'url("'+c+'")')},function(c){r.reject(c)})});return RSVP.all(l).then(function(){r.resolve(i)}),r.promise}},EPUBJS.Storage=function(e){this.checkRequirements(),this.urlCache={},this.withCredentials=e,this.URL=window.URL||window.webkitURL||window.mozURL,this.offline=!1},EPUBJS.Storage.prototype.checkRequirements=function(e){typeof localforage>"u"&&console.error("localForage library not loaded")},EPUBJS.Storage.prototype.put=function(e,t){var i=new RSVP.defer,r=e.length,n=0,l=function(s){var c,o,d=s||new RSVP.defer;return n>=r?d.resolve():(c=e[n].url,o=window.encodeURIComponent(c),EPUBJS.core.request(c,"binary").then(function(h){return localforage.setItem(o,h)}).then(function(h){n++,setTimeout(function(){l(d)},1)})),d.promise}.bind(this);return Array.isArray(e)||(e=[e]),l().then(function(){i.resolve()}.bind(this)),i.promise},EPUBJS.Storage.prototype.token=function(e,t){var i=window.encodeURIComponent(e);return localforage.setItem(i,t).then(function(r){return null!==r})},EPUBJS.Storage.prototype.isStored=function(e){var t=window.encodeURIComponent(e);return localforage.getItem(t).then(function(i){return null!==i})},EPUBJS.Storage.prototype.getText=function(e){var t=window.encodeURIComponent(e);return EPUBJS.core.request(e,"arraybuffer",this.withCredentials).then(function(i){return this.offline&&(this.offline=!1,this.trigger("offline",!1)),localforage.setItem(t,i),i}.bind(this)).then(function(i){var r=new RSVP.defer,n=EPUBJS.core.getMimeType(e),l=new Blob([i],{type:n}),s=new FileReader;return s.addEventListener("loadend",function(){r.resolve(s.result)}),s.readAsText(l,n),r.promise}).catch(function(){var i=new RSVP.defer,r=localforage.getItem(t);return this.offline||(this.offline=!0,this.trigger("offline",!0)),r?(r.then(function(n){var l=EPUBJS.core.getMimeType(e),s=new Blob([n],{type:l}),d=new FileReader;d.addEventListener("loadend",function(){i.resolve(d.result)}),d.readAsText(s,l)}),i.promise):(i.reject({message:"File not found in the storage: "+e,stack:(new Error).stack}),i.promise)}.bind(this))},EPUBJS.Storage.prototype.getUrl=function(e){var t=window.encodeURIComponent(e);return EPUBJS.core.request(e,"arraybuffer",this.withCredentials).then(function(i){return this.offline&&(this.offline=!1,this.trigger("offline",!1)),localforage.setItem(t,i),e}.bind(this)).catch(function(){var r,l,i=new RSVP.defer,n=window.URL||window.webkitURL||window.mozURL;return this.offline||(this.offline=!0,this.trigger("offline",!0)),t in this.urlCache?(i.resolve(this.urlCache[t]),i.promise):(r=localforage.getItem(t))?(r.then(function(s){var d=new Blob([s],{type:EPUBJS.core.getMimeType(e)});l=n.createObjectURL(d),i.resolve(l),this.urlCache[t]=l}.bind(this)),i.promise):(i.reject({message:"File not found in the storage: "+e,stack:(new Error).stack}),i.promise)}.bind(this))},EPUBJS.Storage.prototype.getXml=function(e){var t=window.encodeURIComponent(e);return EPUBJS.core.request(e,"arraybuffer",this.withCredentials).then(function(i){return this.offline&&(this.offline=!1,this.trigger("offline",!1)),localforage.setItem(t,i),i}.bind(this)).then(function(i){var r=new RSVP.defer,n=EPUBJS.core.getMimeType(e),l=new Blob([i],{type:n}),s=new FileReader;return s.addEventListener("loadend",function(){var c=(new DOMParser).parseFromString(s.result,"text/xml");r.resolve(c)}),s.readAsText(l,n),r.promise}).catch(function(){var i=new RSVP.defer,r=localforage.getItem(t);return this.offline||(this.offline=!0,this.trigger("offline",!0)),r?(r.then(function(n){var l=EPUBJS.core.getMimeType(e),s=new Blob([n],{type:l}),d=new FileReader;d.addEventListener("loadend",function(){var o=(new DOMParser).parseFromString(d.result,"text/xml");i.resolve(o)}),d.readAsText(s,l)}),i.promise):(i.reject({message:"File not found in the storage: "+e,stack:(new Error).stack}),i.promise)}.bind(this))},EPUBJS.Storage.prototype.revokeUrl=function(e){var t=window.URL||window.webkitURL||window.mozURL,i=this.urlCache[e];i&&t.revokeObjectURL(i)},EPUBJS.Storage.prototype.failed=function(e){console.error(e)},RSVP.EventTarget.mixin(EPUBJS.Storage.prototype),EPUBJS.Unarchiver=function(e){this.checkRequirements(),this.urlCache={}},EPUBJS.Unarchiver.prototype.checkRequirements=function(e){typeof JSZip>"u"&&console.error("JSZip lib not loaded")},EPUBJS.Unarchiver.prototype.open=function(e,t){if(e instanceof ArrayBuffer){this.zip=new JSZip(e);var i=new RSVP.defer;return i.resolve(),i.promise}return EPUBJS.core.request(e,"binary").then(function(r){this.zip=new JSZip(r)}.bind(this))},EPUBJS.Unarchiver.prototype.getXml=function(e,t){var i=window.decodeURIComponent(e);return this.getText(i,t).then(function(r){var n=new DOMParser,l=EPUBJS.core.getMimeType(e);return 65279===r.charCodeAt(0)&&(r=r.slice(1)),n.parseFromString(r,l)})},EPUBJS.Unarchiver.prototype.getUrl=function(e,t){var d,c,r=new RSVP.defer,n=window.decodeURIComponent(e),l=this.zip.file(n),s=window.URL||window.webkitURL||window.mozURL;return l?e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(c=new Blob([l.asUint8Array()],{type:EPUBJS.core.getMimeType(l.name)}),d=s.createObjectURL(c),r.resolve(d),this.urlCache[e]=d,r.promise):(r.reject({message:"File not found in the epub: "+e,stack:(new Error).stack}),r.promise)},EPUBJS.Unarchiver.prototype.getText=function(e,t){var s,r=new RSVP.defer,n=window.decodeURIComponent(e),l=this.zip.file(n);return l?(s=l.asText(),r.resolve(s),r.promise):(r.reject({message:"File not found in the epub: "+e,stack:(new Error).stack}),r.promise)},EPUBJS.Unarchiver.prototype.revokeUrl=function(e){var t=window.URL||window.webkitURL||window.mozURL,i=this.urlCache[e];i&&t.revokeObjectURL(i)},EPUBJS.Unarchiver.prototype.failed=function(e){console.error(e)},EPUBJS.Unarchiver.prototype.afterSaved=function(e){this.callback()},EPUBJS.Unarchiver.prototype.toStorage=function(e){var t=0,r=this,n=e.length;function l(){0==--n&&r.afterSaved()}e.forEach(function(s){setTimeout(function(d){r.saveEntryFileToStorage(d,l)},t,s),t+=20}),console.log("time",t)},function(){var e={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib","x-dsrc":"d","x-diff":["diff","patch"],"x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas"],"x-pcs-gcd":"gcd","x-perl":["pl","pm"],"x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcard":"vcf",sgml:["sgml","sgm"],"x-c":["c","cc","cxx","cpp","h","hh","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},t=function(){var i,r,n,l,s={};for(i in e)if(e.hasOwnProperty(i))for(r in e[i])if(e[i].hasOwnProperty(r))if("string"==typeof(n=e[i][r]))s[n]=i+"/"+r;else for(l=0;l<n.length;l++)s[n[l]]=i+"/"+r;return s}();EPUBJS.core.getMimeType=function(i){return i&&t[i.split(".").pop().toLowerCase()]||"text/plain"}}(),EPUBJS.Hooks.register("beforeChapterDisplay").endnotes=function(e,t){var i=t.contents.querySelectorAll("a[href]"),r=Array.prototype.slice.call(i),c=(EPUBJS.core.folder(location.pathname),{});EPUBJS.core.addCss(EPUBJS.cssPath+"popup.css",!1,t.render.document.head),r.forEach(function(o){var u,g,_,A,j,X;function O(){c[g].classList.add("on")}function D(){c[g].classList.remove("on")}function M(){setTimeout(function(){c[g].classList.remove("show")},100)}"noteref"==o.getAttribute("epub:type")&&(u=o.getAttribute("href"),g=u.replace("#",""),_=t.render.document.getElementById(g),o.addEventListener("mouseover",function z(){var ge,Ae,W=t.height,Se=t.width,Ie=225;X||(ge=_.cloneNode(!0),X=ge.querySelector("p")),c[g]||(c[g]=document.createElement("div"),c[g].setAttribute("class","popup"),pop_content=document.createElement("div"),c[g].appendChild(pop_content),pop_content.appendChild(X),pop_content.setAttribute("class","pop_content"),t.render.document.body.appendChild(c[g]),c[g].addEventListener("mouseover",O,!1),c[g].addEventListener("mouseout",D,!1),t.on("renderer:pageChanged",M,this),t.on("renderer:pageChanged",D,this)),ge=c[g],Ae=o.getBoundingClientRect(),A=Ae.left,j=Ae.top,ge.classList.add("show"),popRect=ge.getBoundingClientRect(),ge.style.left=A-popRect.width/2+"px",ge.style.top=j+"px",Ie>W/2.5&&(Ie=W/2.5,pop_content.style.maxHeight=Ie+"px"),popRect.height+j>=W-25?(ge.style.top=j-popRect.height+"px",ge.classList.add("above")):ge.classList.remove("above"),A-popRect.width<=0?(ge.style.left=A+"px",ge.classList.add("left")):ge.classList.remove("left"),A+popRect.width/2>=Se?(ge.style.left=A-300+"px",popRect=ge.getBoundingClientRect(),ge.style.left=A-popRect.width+"px",popRect.height+j>=W-25?(ge.style.top=j-popRect.height+"px",ge.classList.add("above")):ge.classList.remove("above"),ge.classList.add("right")):ge.classList.remove("right")},!1),o.addEventListener("mouseout",M,!1))}),e&&e()},EPUBJS.Hooks.register("beforeChapterDisplay").mathml=function(e,t){if(-1!==t.currentChapter.manifestProperties.indexOf("mathml")){t.render.iframe.contentWindow.mathmlCallback=e;var i=document.createElement("script");i.type="text/x-mathjax-config",i.innerHTML='        MathJax.Hub.Register.StartupHook("End",function () {           window.mathmlCallback();         });        MathJax.Hub.Config({jax: ["input/TeX","input/MathML","output/SVG"],extensions: ["tex2jax.js","mml2jax.js","MathEvents.js"],TeX: {extensions: ["noErrors.js","noUndefined.js","autoload-all.js"]},MathMenu: {showRenderer: false},menuSettings: {zoom: "Click"},messageStyle: "none"});                 ',t.doc.body.appendChild(i),EPUBJS.core.addScript("http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML",null,t.doc.head)}else e&&e()},EPUBJS.Hooks.register("beforeChapterDisplay").smartimages=function(e,t){var i=t.contents.querySelectorAll("img"),r=Array.prototype.slice.call(i),n=t.height;"reflowable"==t.layoutSettings.layout?(r.forEach(function(s){var d=function(){var m,o=s.getBoundingClientRect(),h=o.height,u=o.top,_=s.getAttribute("data-height")||h,w=Number(getComputedStyle(s,"").fontSize.match(/(\d*(\.\d*)?)px/)[1]),A=w?w/2:0;n=t.contents.clientHeight,u<0&&(u=0),s.style.maxWidth="100%",_+u>=n?(u<n/2?(s.style.maxHeight=(m=n-u-A)+"px",s.style.width="auto"):(_>n&&(s.style.maxHeight=n+"px",s.style.width="auto",_=(o=s.getBoundingClientRect()).height),s.style.display="block",s.style.WebkitColumnBreakBefore="always",s.style.breakBefore="column"),s.setAttribute("data-height",m)):(s.style.removeProperty("max-height"),s.style.removeProperty("margin-top"))};s.addEventListener("load",d,!1),t.on("renderer:resized",d),t.on("renderer:chapterUnload",function(){t.off("renderer:resized",d),t.off("renderer:chapterUnload",this)}),d()}),e&&e()):e()},EPUBJS.Hooks.register("beforeChapterDisplay").transculsions=function(e,t){var i=t.contents.querySelectorAll("[transclusion]");Array.prototype.slice.call(i).forEach(function(n){var g,l=n.getAttribute("ref"),s=document.createElement("iframe"),d=n.getAttribute("width"),c=n.getAttribute("height"),o=n.parentNode,h=d,u=c;function _(){u=c,(h=d)>chapter.colWidth&&(g=chapter.colWidth/h,h=chapter.colWidth,u*=g),s.width=h,s.height=u}_(),t.listenUntil("renderer:resized","renderer:chapterUnloaded",_),s.src=l,o.replaceChild(s,n)}),e&&e()},function(e){if("object"==typeof exports&&typeof module<"u")module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"&&(t=self),t.JSZip=e()}}(function(){return function e(t,i,r){function n(d,c){if(!i[d]){if(!t[d]){var o="function"==typeof require&&require;if(!c&&o)return o(d,!0);if(l)return l(d,!0);throw new Error("Cannot find module '"+d+"'")}var h=i[d]={exports:{}};t[d][0].call(h.exports,function(u){return n(t[d][1][u]||u)},h,h.exports,e,t,i,r)}return i[d].exports}for(var l="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,i){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(n){for(var l,s,d,c,o,h,u,g="",_=0;_<n.length;)c=(l=n.charCodeAt(_++))>>2,o=(3&l)<<4|(s=n.charCodeAt(_++))>>4,h=(15&s)<<2|(d=n.charCodeAt(_++))>>6,u=63&d,isNaN(s)?h=u=64:isNaN(d)&&(u=64),g=g+r.charAt(c)+r.charAt(o)+r.charAt(h)+r.charAt(u);return g},i.decode=function(n){var s,d,c,o,h,u,g="",_=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");_<n.length;)c=r.indexOf(n.charAt(_++)),s=(15&(o=r.indexOf(n.charAt(_++))))<<4|(h=r.indexOf(n.charAt(_++)))>>2,d=(3&h)<<6|(u=r.indexOf(n.charAt(_++))),g+=String.fromCharCode(c<<2|o>>4),64!=h&&(g+=String.fromCharCode(s)),64!=u&&(g+=String.fromCharCode(d));return g}},{}],2:[function(e,t){function i(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}i.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=i},{}],3:[function(e,t,i){i.STORE={magic:"\0\0",compress:function(r){return r},uncompress:function(r){return r},compressInputType:null,uncompressInputType:null},i.DEFLATE=e("./flate")},{"./flate":8}],4:[function(e,t){var i=e("./utils"),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(n,l){if(typeof n>"u"||!n.length)return 0;var s="string"!==i.getTypeOf(n);typeof l>"u"&&(l=0);var o=0;l=~l;for(var h=0,u=n.length;u>h;h++)o=s?n[h]:n.charCodeAt(h),l=l>>>8^r[255&(l^o)];return~l}},{"./utils":21}],5:[function(e,t){function i(){this.data=null,this.length=0,this.index=0}var r=e("./utils");i.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<n||0>n)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var l,s=0;for(this.checkOffset(n),l=this.index+n-1;l>=this.index;l--)s=(s<<8)+this.byteAt(l);return this.index+=n,s},readString:function(n){return r.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1)}},t.exports=i},{"./utils":21}],6:[function(e,t,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!1,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],7:[function(e,t,i){var r=e("./utils");i.string2binary=function(n){return r.string2binary(n)},i.string2Uint8Array=function(n){return r.transformTo("uint8array",n)},i.uint8Array2String=function(n){return r.transformTo("string",n)},i.string2Blob=function(n){var l=r.transformTo("arraybuffer",n);return r.arrayBuffer2Blob(l)},i.arrayBuffer2Blob=function(n){return r.arrayBuffer2Blob(n)},i.transformTo=function(n,l){return r.transformTo(n,l)},i.getTypeOf=function(n){return r.getTypeOf(n)},i.checkSupport=function(n){return r.checkSupport(n)},i.MAX_VALUE_16BITS=r.MAX_VALUE_16BITS,i.MAX_VALUE_32BITS=r.MAX_VALUE_32BITS,i.pretty=function(n){return r.pretty(n)},i.findCompression=function(n){return r.findCompression(n)},i.isRegExp=function(n){return r.isRegExp(n)}},{"./utils":21}],8:[function(e,t,i){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",n=e("pako");i.uncompressInputType=r?"uint8array":"array",i.compressInputType=r?"uint8array":"array",i.magic="\b\0",i.compress=function(l,s){return n.deflateRaw(l,{level:s.level||-1})},i.uncompress=function(l){return n.inflateRaw(l)}},{pako:24}],9:[function(e,t){function i(n,l){return this instanceof i?(this.files={},this.comment=null,this.root="",n&&this.load(n,l),void(this.clone=function(){var s=new i;for(var d in this)"function"!=typeof this[d]&&(s[d]=this[d]);return s})):new i(n,l)}var r=e("./base64");(i.prototype=e("./object")).load=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.utils=e("./deprecatedPublicUtils"),i.base64={encode:function(n){return r.encode(n)},decode:function(n){return r.decode(n)}},i.compressions=e("./compressions"),t.exports=i},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(e,t){var i=e("./base64"),r=e("./zipEntries");t.exports=function(n,l){var s,d,c,o;for((l=l||{}).base64&&(n=i.decode(n)),s=(d=new r(n,l)).files,c=0;c<s.length;c++)this.file((o=s[c]).fileName,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileComment.length?o.fileComment:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:l.createFolders});return d.zipComment.length&&(this.comment=d.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(e,t){(function(i){t.exports=function(r,n){return new i(r,n)},t.exports.test=function(r){return i.isBuffer(r)}}).call(this,typeof Buffer<"u"?Buffer:void 0)},{}],12:[function(e,t){function i(n){this.data=n,this.length=this.data.length,this.index=0}var r=e("./uint8ArrayReader");(i.prototype=new r).readData=function(n){this.checkOffset(n);var l=this.data.slice(this.index,this.index+n);return this.index+=n,l},t.exports=i},{"./uint8ArrayReader":18}],13:[function(e,t){var i=e("./support"),r=e("./utils"),n=e("./crc32"),l=e("./signature"),s=e("./defaults"),d=e("./base64"),c=e("./compressions"),o=e("./compressedObject"),h=e("./nodeBuffer"),u=e("./utf8"),g=e("./stringWriter"),_=e("./uint8ArrayWriter"),m=function(q){if(q._data instanceof o&&(q._data=q._data.getContent(),q.options.binary=!0,q.options.base64=!1,"uint8array"===r.getTypeOf(q._data))){var J=q._data;q._data=new Uint8Array(J.length),0!==J.length&&q._data.set(J,0)}return q._data},w=function(q){var J=m(q);return"string"===r.getTypeOf(J)?!q.options.binary&&i.nodebuffer?h(J,"utf-8"):q.asBinary():J},A=function(q){var J=m(this);return null===J||typeof J>"u"?"":(this.options.base64&&(J=d.decode(J)),J=q&&this.options.binary?Ae.utf8decode(J):r.transformTo("string",J),q||this.options.binary||(J=r.transformTo("string",Ae.utf8encode(J))),J)},j=function(q,J,ae){this.name=q,this.dir=ae.dir,this.date=ae.date,this.comment=ae.comment,this.unixPermissions=ae.unixPermissions,this.dosPermissions=ae.dosPermissions,this._data=J,this.options=ae,this._initialMetadata={dir:ae.dir,date:ae.date}};j.prototype={asText:function(){return A.call(this,!0)},asBinary:function(){return A.call(this,!1)},asNodeBuffer:function(){var q=w(this);return r.transformTo("nodebuffer",q)},asUint8Array:function(){var q=w(this);return r.transformTo("uint8array",q)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var X=function(q,J){var ae,me="";for(ae=0;J>ae;ae++)me+=String.fromCharCode(255&q),q>>>=8;return me},z=function(){var q,J,ae={};for(q=0;q<arguments.length;q++)for(J in arguments[q])arguments[q].hasOwnProperty(J)&&typeof ae[J]>"u"&&(ae[J]=arguments[q][J]);return ae},D=function(q,J,ae){var me,G=r.getTypeOf(J);if(ae=function(q){return!0!==(q=q||{}).base64||null!=q.binary||(q.binary=!0),(q=z(q,s)).date=q.date||new Date,null!==q.compression&&(q.compression=q.compression.toUpperCase()),q}(ae),"string"==typeof ae.unixPermissions&&(ae.unixPermissions=parseInt(ae.unixPermissions,8)),ae.unixPermissions&&16384&ae.unixPermissions&&(ae.dir=!0),ae.dosPermissions&&16&ae.dosPermissions&&(ae.dir=!0),ae.dir&&(q=B(q)),ae.createFolders&&(me=M(q))&&W.call(this,me,!0),ae.dir||null===J||typeof J>"u")ae.base64=!1,ae.binary=!1,J=null,G=null;else if("string"===G)ae.binary&&!ae.base64&&!0!==ae.optimizedBinaryString&&(J=r.string2binary(J));else{if(ae.base64=!1,ae.binary=!0,!(G||J instanceof o))throw new Error("The data of '"+q+"' is in an unsupported format !");"arraybuffer"===G&&(J=r.transformTo("uint8array",J))}var Be=new j(q,J,ae);return this.files[q]=Be,Be},M=function(q){"/"==q.slice(-1)&&(q=q.substring(0,q.length-1));var J=q.lastIndexOf("/");return J>0?q.substring(0,J):""},B=function(q){return"/"!=q.slice(-1)&&(q+="/"),q},W=function(q,J){return J=typeof J<"u"&&J,q=B(q),this.files[q]||D.call(this,q,null,{dir:!0,createFolders:J}),this.files[q]},Se=function(q,J,ae){var me,G=new o;return q._data instanceof o?(G.uncompressedSize=q._data.uncompressedSize,G.crc32=q._data.crc32,0===G.uncompressedSize||q.dir?(J=c.STORE,G.compressedContent="",G.crc32=0):q._data.compressionMethod===J.magic?G.compressedContent=q._data.getCompressedContent():(me=q._data.getContent(),G.compressedContent=J.compress(r.transformTo(J.compressInputType,me),ae))):((!(me=w(q))||0===me.length||q.dir)&&(J=c.STORE,me=""),G.uncompressedSize=me.length,G.crc32=n(me),G.compressedContent=J.compress(r.transformTo(J.compressInputType,me),ae)),G.compressedSize=G.compressedContent.length,G.compressionMethod=J.magic,G},Ie=function(q,J,ae,me,G){var Be,We,Xe,Fe,Ze=r.transformTo("string",u.utf8encode(J.name)),Ne=J.comment||"",be=r.transformTo("string",u.utf8encode(Ne)),Z=Ze.length!==J.name.length,he=be.length!==Ne.length,ve=J.options,we="",Te="",ke="";Fe=J._initialMetadata.date!==J.date?J.date:ve.date;var Qe=0,_e=0;(Xe=J._initialMetadata.dir!==J.dir?J.dir:ve.dir)&&(Qe|=16),"UNIX"===G?(_e=798,Qe|=function(q,J){var ae=q;return q||(ae=J?16893:33204),(65535&ae)<<16}(J.unixPermissions,Xe)):(_e=20,Qe|=function(q){return 63&(q||0)}(J.dosPermissions)),Be=Fe.getHours(),Be<<=6,Be|=Fe.getMinutes(),Be<<=5,Be|=Fe.getSeconds()/2,We=Fe.getFullYear()-1980,We<<=4,We|=Fe.getMonth()+1,We<<=5,We|=Fe.getDate(),Z&&(Te=X(1,1)+X(n(Ze),4)+Ze,we+="up"+X(Te.length,2)+Te),he&&(ke=X(1,1)+X(this.crc32(be),4)+be,we+="uc"+X(ke.length,2)+ke);var Ee="";return Ee+="\n\0",Ee+=Z||he?"\0\b":"\0\0",Ee+=ae.compressionMethod,Ee+=X(Be,2),Ee+=X(We,2),Ee+=X(ae.crc32,4),Ee+=X(ae.compressedSize,4),Ee+=X(ae.uncompressedSize,4),Ee+=X(Ze.length,2),Ee+=X(we.length,2),{fileRecord:l.LOCAL_FILE_HEADER+Ee+Ze+we,dirRecord:l.CENTRAL_FILE_HEADER+X(_e,2)+Ee+X(be.length,2)+"\0\0\0\0"+X(Qe,4)+X(me,4)+Ze+we+be,compressedObject:ae}},Ae={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(q){var J,ae,me,G,Be=[];for(J in this.files)this.files.hasOwnProperty(J)&&(G=new j((me=this.files[J]).name,me._data,z(me.options)),ae=J.slice(this.root.length,J.length),J.slice(0,this.root.length)===this.root&&q(ae,G)&&Be.push(G));return Be},file:function(q,J,ae){if(1===arguments.length){if(r.isRegExp(q)){var me=q;return this.filter(function(G,Be){return!Be.dir&&me.test(G)})}return this.filter(function(G,Be){return!Be.dir&&G===q})[0]||null}return D.call(this,q=this.root+q,J,ae),this},folder:function(q){if(!q)return this;if(r.isRegExp(q))return this.filter(function(G,Be){return Be.dir&&q.test(G)});var ae=W.call(this,this.root+q),me=this.clone();return me.root=ae.name,me},remove:function(q){var J=this.files[q=this.root+q];if(J||("/"!=q.slice(-1)&&(q+="/"),J=this.files[q]),J&&!J.dir)delete this.files[q];else for(var ae=this.filter(function(G,Be){return Be.name.slice(0,q.length)===q}),me=0;me<ae.length;me++)delete this.files[ae[me].name];return this},generate:function(q){q=z(q||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),r.checkSupport(q.type),("darwin"===q.platform||"freebsd"===q.platform||"linux"===q.platform||"sunos"===q.platform)&&(q.platform="UNIX"),"win32"===q.platform&&(q.platform="DOS");var J,ae,ve,me=[],G=0,Be=0,We=r.transformTo("string",this.utf8encode(q.comment||this.comment||""));for(var Xe in this.files)if(this.files.hasOwnProperty(Xe)){var Fe=this.files[Xe],Ze=Fe.options.compression||q.compression.toUpperCase(),Ne=c[Ze];if(!Ne)throw new Error(Ze+" is not a valid compression method !");var Z=Se.call(this,Fe,Ne,Fe.options.compressionOptions||q.compressionOptions||{}),he=Ie.call(this,Xe,Fe,Z,G,q.platform);G+=he.fileRecord.length+Z.compressedSize,Be+=he.dirRecord.length,me.push(he)}ve=l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+X(me.length,2)+X(me.length,2)+X(Be,4)+X(G,4)+X(We.length,2)+We;var we=q.type.toLowerCase();for(J="uint8array"===we||"arraybuffer"===we||"blob"===we||"nodebuffer"===we?new _(G+Be+ve.length):new g(G+Be+ve.length),ae=0;ae<me.length;ae++)J.append(me[ae].fileRecord),J.append(me[ae].compressedObject.compressedContent);for(ae=0;ae<me.length;ae++)J.append(me[ae].dirRecord);J.append(ve);var Te=J.finalize();switch(q.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return r.transformTo(q.type.toLowerCase(),Te);case"blob":return r.arrayBuffer2Blob(r.transformTo("arraybuffer",Te),q.mimeType);case"base64":return q.base64?d.encode(Te):Te;default:return Te}},crc32:function(q,J){return n(q,J)},utf8encode:function(q){return r.transformTo("string",u.utf8encode(q))},utf8decode:function(q){return u.utf8decode(q)}};t.exports=Ae},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(e,t,i){i.LOCAL_FILE_HEADER="PK\x03\x04",i.CENTRAL_FILE_HEADER="PK\x01\x02",i.CENTRAL_DIRECTORY_END="PK\x05\x06",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",i.DATA_DESCRIPTOR="PK\x07\b"},{}],15:[function(e,t){function i(l,s){this.data=l,s||(this.data=n.string2binary(this.data)),this.length=this.data.length,this.index=0}var r=e("./dataReader"),n=e("./utils");(i.prototype=new r).byteAt=function(l){return this.data.charCodeAt(l)},i.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)},i.prototype.readData=function(l){this.checkOffset(l);var s=this.data.slice(this.index,this.index+l);return this.index+=l,s},t.exports=i},{"./dataReader":5,"./utils":21}],16:[function(e,t){var i=e("./utils"),r=function(){this.data=[]};r.prototype={append:function(n){n=i.transformTo("string",n),this.data.push(n)},finalize:function(){return this.data.join("")}},t.exports=r},{"./utils":21}],17:[function(e,t,i){(function(r){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof r<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch{try{var s=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);s.append(n),i.blob=0===s.getBlob("application/zip").size}catch{i.blob=!1}}}}).call(this,typeof Buffer<"u"?Buffer:void 0)},{}],18:[function(e,t){function i(n){n&&(this.data=n,this.length=this.data.length,this.index=0)}var r=e("./dataReader");(i.prototype=new r).byteAt=function(n){return this.data[n]},i.prototype.lastIndexOfSignature=function(n){for(var l=n.charCodeAt(0),s=n.charCodeAt(1),d=n.charCodeAt(2),c=n.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===l&&this.data[o+1]===s&&this.data[o+2]===d&&this.data[o+3]===c)return o;return-1},i.prototype.readData=function(n){if(this.checkOffset(n),0===n)return new Uint8Array(0);var l=this.data.subarray(this.index,this.index+n);return this.index+=n,l},t.exports=i},{"./dataReader":5}],19:[function(e,t){var i=e("./utils"),r=function(n){this.data=new Uint8Array(n),this.index=0};r.prototype={append:function(n){0!==n.length&&(n=i.transformTo("uint8array",n),this.data.set(n,this.index),this.index+=n.length)},finalize:function(){return this.data}},t.exports=r},{"./utils":21}],20:[function(e,t,i){for(var r=e("./utils"),n=e("./support"),l=e("./nodeBuffer"),s=new Array(256),d=0;256>d;d++)s[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;s[254]=s[254]=1;var o=function(u,g){var _;for((g=g||u.length)>u.length&&(g=u.length),_=g-1;_>=0&&128==(192&u[_]);)_--;return 0>_||0===_?g:_+s[u[_]]>g?_:g},h=function(u){var g,_,m,w,A=u.length,j=new Array(2*A);for(_=0,g=0;A>g;)if(128>(m=u[g++]))j[_++]=m;else if((w=s[m])>4)j[_++]=65533,g+=w-1;else{for(m&=2===w?31:3===w?15:7;w>1&&A>g;)m=m<<6|63&u[g++],w--;w>1?j[_++]=65533:65536>m?j[_++]=m:(j[_++]=55296|(m-=65536)>>10&1023,j[_++]=56320|1023&m)}return j.length!==_&&(j.subarray?j=j.subarray(0,_):j.length=_),r.applyFromCharCode(j)};i.utf8encode=function(u){return n.nodebuffer?l(u,"utf-8"):function(u){var g,_,m,w,A,j=u.length,X=0;for(w=0;j>w;w++)55296==(64512&(_=u.charCodeAt(w)))&&j>w+1&&56320==(64512&(m=u.charCodeAt(w+1)))&&(_=65536+(_-55296<<10)+(m-56320),w++),X+=128>_?1:2048>_?2:65536>_?3:4;for(g=n.uint8array?new Uint8Array(X):new Array(X),A=0,w=0;X>A;w++)55296==(64512&(_=u.charCodeAt(w)))&&j>w+1&&56320==(64512&(m=u.charCodeAt(w+1)))&&(_=65536+(_-55296<<10)+(m-56320),w++),128>_?g[A++]=_:2048>_?(g[A++]=192|_>>>6,g[A++]=128|63&_):65536>_?(g[A++]=224|_>>>12,g[A++]=128|_>>>6&63,g[A++]=128|63&_):(g[A++]=240|_>>>18,g[A++]=128|_>>>12&63,g[A++]=128|_>>>6&63,g[A++]=128|63&_);return g}(u)},i.utf8decode=function(u){if(n.nodebuffer)return r.transformTo("nodebuffer",u).toString("utf-8");for(var g=[],_=0,m=(u=r.transformTo(n.uint8array?"uint8array":"array",u)).length;m>_;){var A=o(u,Math.min(_+65536,m));g.push(h(n.uint8array?u.subarray(_,A):u.slice(_,A))),_=A}return g.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(e,t,i){function r(u){return u}function n(u,g){for(var _=0;_<u.length;++_)g[_]=255&u.charCodeAt(_);return g}function l(u){var g=65536,_=[],m=u.length,w=i.getTypeOf(u),A=0,j=!0;try{switch(w){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,o(0))}}catch{j=!1}if(!j){for(var X="",z=0;z<u.length;z++)X+=String.fromCharCode(u[z]);return X}for(;m>A&&g>1;)try{_.push(String.fromCharCode.apply(null,"array"===w||"nodebuffer"===w?u.slice(A,Math.min(A+g,m)):u.subarray(A,Math.min(A+g,m)))),A+=g}catch{g=Math.floor(g/2)}return _.join("")}function s(u,g){for(var _=0;_<u.length;_++)g[_]=u[_];return g}var d=e("./support"),c=e("./compressions"),o=e("./nodeBuffer");i.string2binary=function(u){for(var g="",_=0;_<u.length;_++)g+=String.fromCharCode(255&u.charCodeAt(_));return g},i.arrayBuffer2Blob=function(u,g){i.checkSupport("blob"),g=g||"application/zip";try{return new Blob([u],{type:g})}catch{try{var m=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return m.append(u),m.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}},i.applyFromCharCode=l;var h={};h.string={string:r,array:function(u){return n(u,new Array(u.length))},arraybuffer:function(u){return h.string.uint8array(u).buffer},uint8array:function(u){return n(u,new Uint8Array(u.length))},nodebuffer:function(u){return n(u,o(u.length))}},h.array={string:l,array:r,arraybuffer:function(u){return new Uint8Array(u).buffer},uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return o(u)}},h.arraybuffer={string:function(u){return l(new Uint8Array(u))},array:function(u){return s(new Uint8Array(u),new Array(u.byteLength))},arraybuffer:r,uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return o(new Uint8Array(u))}},h.uint8array={string:l,array:function(u){return s(u,new Array(u.length))},arraybuffer:function(u){return u.buffer},uint8array:r,nodebuffer:function(u){return o(u)}},h.nodebuffer={string:l,array:function(u){return s(u,new Array(u.length))},arraybuffer:function(u){return h.nodebuffer.uint8array(u).buffer},uint8array:function(u){return s(u,new Uint8Array(u.length))},nodebuffer:r},i.transformTo=function(u,g){if(g||(g=""),!u)return g;i.checkSupport(u);var _=i.getTypeOf(g);return h[_][u](g)},i.getTypeOf=function(u){return"string"==typeof u?"string":"[object Array]"===Object.prototype.toString.call(u)?"array":d.nodebuffer&&o.test(u)?"nodebuffer":d.uint8array&&u instanceof Uint8Array?"uint8array":d.arraybuffer&&u instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(u){if(!d[u.toLowerCase()])throw new Error(u+" is not supported by this browser")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(u){var g,_,m="";for(_=0;_<(u||"").length;_++)m+="\\x"+(16>(g=u.charCodeAt(_))?"0":"")+g.toString(16).toUpperCase();return m},i.findCompression=function(u){for(var g in c)if(c.hasOwnProperty(g)&&c[g].magic===u)return c[g];return null},i.isRegExp=function(u){return"[object RegExp]"===Object.prototype.toString.call(u)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(e,t){function i(u,g){this.files=[],this.loadOptions=g,u&&this.load(u)}var r=e("./stringReader"),n=e("./nodeBufferReader"),l=e("./uint8ArrayReader"),s=e("./utils"),d=e("./signature"),c=e("./zipEntry"),o=e("./support"),h=e("./object");i.prototype={checkSignature:function(u){var g=this.reader.readString(4);if(g!==u)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(g)+", expected "+s.pretty(u)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=h.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,g,_,m=this.zip64EndOfCentralSize-44;m>0;)u=this.reader.readInt(2),g=this.reader.readInt(4),_=this.reader.readString(g),this.zip64ExtensibleData[u]={id:u,length:g,value:_}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,g;for(u=0;u<this.files.length;u++)this.reader.setIndex((g=this.files[u]).localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===d.CENTRAL_FILE_HEADER;)(u=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(-1===u){var g=!0;try{this.reader.setIndex(0),this.checkSignature(d.LOCAL_FILE_HEADER),g=!1}catch{}throw new Error(g?"Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html":"Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(u),this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(u=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(u),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(u){var g=s.getTypeOf(u);this.reader="string"!==g||o.uint8array?"nodebuffer"===g?new n(u):new l(s.transformTo("uint8array",u)):new r(u,this.loadOptions.optimizedBinaryString)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=i},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(e,t){function i(o,h){this.options=o,this.loadOptions=h}var r=e("./stringReader"),n=e("./utils"),l=e("./compressedObject"),s=e("./object");i.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},prepareCompressedContent:function(o,h,u){return function(){var g=o.index;o.setIndex(h);var _=o.readData(u);return o.setIndex(g),_}},prepareContent:function(o,h,u,g,_){return function(){var m=n.transformTo(g.uncompressInputType,this.getCompressedContent()),w=g.uncompress(m);if(w.length!==_)throw new Error("Bug : uncompressed data size mismatch");return w}},readLocalPart:function(o){var h,u;if(o.skip(22),this.fileNameLength=o.readInt(2),u=o.readInt(2),this.fileName=o.readString(this.fileNameLength),o.skip(u),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(h=n.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new l,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(o,o.index,this.compressedSize,h),this.decompressed.getContent=this.prepareContent(o,o.index,this.compressedSize,h,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=n.transformTo("string",this.decompressed.getContent()),s.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(o){if(this.versionMadeBy=o.readInt(2),this.versionNeeded=o.readInt(2),this.bitFlag=o.readInt(2),this.compressionMethod=o.readString(2),this.date=o.readDate(),this.crc32=o.readInt(4),this.compressedSize=o.readInt(4),this.uncompressedSize=o.readInt(4),this.fileNameLength=o.readInt(2),this.extraFieldsLength=o.readInt(2),this.fileCommentLength=o.readInt(2),this.diskNumberStart=o.readInt(2),this.internalFileAttributes=o.readInt(2),this.externalFileAttributes=o.readInt(4),this.localHeaderOffset=o.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=o.readString(this.fileNameLength),this.readExtraFields(o),this.parseZIP64ExtraField(o),this.fileComment=o.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var o=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===o&&(this.dosPermissions=63&this.externalFileAttributes),3===o&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var o=new r(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=o.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=o.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=o.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=o.readInt(4))}},readExtraFields:function(o){var h,u,g,_=o.index;for(this.extraFields=this.extraFields||{};o.index<_+this.extraFieldsLength;)h=o.readInt(2),u=o.readInt(2),g=o.readString(u),this.extraFields[h]={id:h,length:u,value:g}},handleUTF8:function(){if(this.useUTF8())this.fileName=s.utf8decode(this.fileName),this.fileComment=s.utf8decode(this.fileComment);else{var o=this.findExtraFieldUnicodePath();null!==o&&(this.fileName=o);var h=this.findExtraFieldUnicodeComment();null!==h&&(this.fileComment=h)}},findExtraFieldUnicodePath:function(){var o=this.extraFields[28789];if(o){var h=new r(o.value);return 1!==h.readInt(1)||s.crc32(this.fileName)!==h.readInt(4)?null:s.utf8decode(h.readString(o.length-5))}return null},findExtraFieldUnicodeComment:function(){var o=this.extraFields[25461];if(o){var h=new r(o.value);return 1!==h.readInt(1)||s.crc32(this.fileComment)!==h.readInt(4)?null:s.utf8decode(h.readString(o.length-5))}return null}},t.exports=i},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(e,t){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=s},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(e,t,i){function r(z,O){var D=new X(O);if(D.push(z,!0),D.err)throw D.msg;return D.result}var s=e("./zlib/deflate.js"),d=e("./utils/common"),c=e("./utils/strings"),o=e("./zlib/messages"),h=e("./zlib/zstream"),X=function(z){this.options=d.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},z||{});var O=this.options;O.raw&&O.windowBits>0?O.windowBits=-O.windowBits:O.gzip&&O.windowBits>0&&O.windowBits<16&&(O.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var D=s.deflateInit2(this.strm,O.level,O.method,O.windowBits,O.memLevel,O.strategy);if(0!==D)throw new Error(o[D]);O.header&&s.deflateSetHeader(this.strm,O.header)};X.prototype.push=function(z,O){var D,M,B=this.strm,W=this.options.chunkSize;if(this.ended)return!1;M=O===~~O?O:!0===O?4:0,B.input="string"==typeof z?c.string2buf(z):z,B.next_in=0,B.avail_in=B.input.length;do{if(0===B.avail_out&&(B.output=new d.Buf8(W),B.next_out=0,B.avail_out=W),1!==(D=s.deflate(B,M))&&0!==D)return this.onEnd(D),this.ended=!0,!1;(0===B.avail_out||0===B.avail_in&&4===M)&&this.onData("string"===this.options.to?c.buf2binstring(d.shrinkBuf(B.output,B.next_out)):d.shrinkBuf(B.output,B.next_out))}while((B.avail_in>0||0===B.avail_out)&&1!==D);return 4!==M||(D=s.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,0===D)},X.prototype.onData=function(z){this.chunks.push(z)},X.prototype.onEnd=function(z){0===z&&(this.result="string"===this.options.to?this.chunks.join(""):d.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},i.Deflate=X,i.deflate=r,i.deflateRaw=function n(z,O){return(O=O||{}).raw=!0,r(z,O)},i.gzip=function l(z,O){return(O=O||{}).gzip=!0,r(z,O)}},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(e,t,i){function r(_,m){var w=new g(m);if(w.push(_,!0),w.err)throw w.msg;return w.result}var l=e("./zlib/inflate.js"),s=e("./utils/common"),d=e("./utils/strings"),c=e("./zlib/constants"),o=e("./zlib/messages"),h=e("./zlib/zstream"),u=e("./zlib/gzheader"),g=function(_){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},_||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,0===m.windowBits&&(m.windowBits=-15)),!(m.windowBits>=0&&m.windowBits<16)||_&&_.windowBits||(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var w=l.inflateInit2(this.strm,m.windowBits);if(w!==c.Z_OK)throw new Error(o[w]);this.header=new u,l.inflateGetHeader(this.strm,this.header)};g.prototype.push=function(_,m){var w,A,j,X,z,O=this.strm,D=this.options.chunkSize;if(this.ended)return!1;A=m===~~m?m:!0===m?c.Z_FINISH:c.Z_NO_FLUSH,O.input="string"==typeof _?d.binstring2buf(_):_,O.next_in=0,O.avail_in=O.input.length;do{if(0===O.avail_out&&(O.output=new s.Buf8(D),O.next_out=0,O.avail_out=D),(w=l.inflate(O,c.Z_NO_FLUSH))!==c.Z_STREAM_END&&w!==c.Z_OK)return this.onEnd(w),this.ended=!0,!1;O.next_out&&(0===O.avail_out||w===c.Z_STREAM_END||0===O.avail_in&&A===c.Z_FINISH)&&("string"===this.options.to?(j=d.utf8border(O.output,O.next_out),X=O.next_out-j,z=d.buf2string(O.output,j),O.next_out=X,O.avail_out=D-X,X&&s.arraySet(O.output,O.output,j,X,0),this.onData(z)):this.onData(s.shrinkBuf(O.output,O.next_out)))}while(O.avail_in>0&&w!==c.Z_STREAM_END);return w===c.Z_STREAM_END&&(A=c.Z_FINISH),A!==c.Z_FINISH||(w=l.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===c.Z_OK)},g.prototype.onData=function(_){this.chunks.push(_)},g.prototype.onEnd=function(_){_===c.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Inflate=g,i.inflate=r,i.inflateRaw=function n(_,m){return(m=m||{}).raw=!0,r(_,m)},i.ungzip=r},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(e,t,i){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(s){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var c=d.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var o in c)c.hasOwnProperty(o)&&(s[o]=c[o])}}return s},i.shrinkBuf=function(s,d){return s.length===d?s:s.subarray?s.subarray(0,d):(s.length=d,s)};var n={arraySet:function(s,d,c,o,h){if(d.subarray&&s.subarray)s.set(d.subarray(c,c+o),h);else for(var u=0;o>u;u++)s[h+u]=d[c+u]},flattenChunks:function(s){var d,c,o,h,u,g;for(o=0,d=0,c=s.length;c>d;d++)o+=s[d].length;for(g=new Uint8Array(o),h=0,d=0,c=s.length;c>d;d++)g.set(u=s[d],h),h+=u.length;return g}},l={arraySet:function(s,d,c,o,h){for(var u=0;o>u;u++)s[h+u]=d[c+u]},flattenChunks:function(s){return[].concat.apply([],s)}};i.setTyped=function(s){s?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(r)},{}],28:[function(e,t,i){function r(o,h){if(65537>h&&(o.subarray&&s||!o.subarray&&l))return String.fromCharCode.apply(null,n.shrinkBuf(o,h));for(var u="",g=0;h>g;g++)u+=String.fromCharCode(o[g]);return u}var n=e("./common"),l=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var d=new n.Buf8(256),c=0;256>c;c++)d[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;d[254]=d[254]=1,i.string2buf=function(o){var h,u,g,_,m,w=o.length,A=0;for(_=0;w>_;_++)55296==(64512&(u=o.charCodeAt(_)))&&w>_+1&&56320==(64512&(g=o.charCodeAt(_+1)))&&(u=65536+(u-55296<<10)+(g-56320),_++),A+=128>u?1:2048>u?2:65536>u?3:4;for(h=new n.Buf8(A),m=0,_=0;A>m;_++)55296==(64512&(u=o.charCodeAt(_)))&&w>_+1&&56320==(64512&(g=o.charCodeAt(_+1)))&&(u=65536+(u-55296<<10)+(g-56320),_++),128>u?h[m++]=u:2048>u?(h[m++]=192|u>>>6,h[m++]=128|63&u):65536>u?(h[m++]=224|u>>>12,h[m++]=128|u>>>6&63,h[m++]=128|63&u):(h[m++]=240|u>>>18,h[m++]=128|u>>>12&63,h[m++]=128|u>>>6&63,h[m++]=128|63&u);return h},i.buf2binstring=function(o){return r(o,o.length)},i.binstring2buf=function(o){for(var h=new n.Buf8(o.length),u=0,g=h.length;g>u;u++)h[u]=o.charCodeAt(u);return h},i.buf2string=function(o,h){var u,g,_,m,w=h||o.length,A=new Array(2*w);for(g=0,u=0;w>u;)if(128>(_=o[u++]))A[g++]=_;else if((m=d[_])>4)A[g++]=65533,u+=m-1;else{for(_&=2===m?31:3===m?15:7;m>1&&w>u;)_=_<<6|63&o[u++],m--;m>1?A[g++]=65533:65536>_?A[g++]=_:(A[g++]=55296|(_-=65536)>>10&1023,A[g++]=56320|1023&_)}return r(A,g)},i.utf8border=function(o,h){var u;for((h=h||o.length)>o.length&&(h=o.length),u=h-1;u>=0&&128==(192&o[u]);)u--;return 0>u||0===u?h:u+d[o[u]]>h?u:h}},{"./common":27}],29:[function(e,t){t.exports=function i(r,n,l,s){for(var d=65535&r,c=r>>>16&65535,o=0;0!==l;){l-=o=l>2e3?2e3:l;do{c=c+(d=d+n[s++]|0)|0}while(--o);d%=65521,c%=65521}return d|c<<16}},{}],30:[function(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(e,t){var n=function i(){for(var l,s=[],d=0;256>d;d++){l=d;for(var c=0;8>c;c++)l=1&l?3988292384^l>>>1:l>>>1;s[d]=l}return s}();t.exports=function r(l,s,d,c){var o=n,h=c+d;l=~l;for(var u=c;h>u;u++)l=l>>>8^o[255&(l^s[u])];return~l}},{}],32:[function(e,t,i){function r(p,ne){return p.msg=ae[ne],ne}function n(p){return(p<<1)-(p>4?9:0)}function l(p){for(var ne=p.length;--ne>=0;)p[ne]=0}function s(p){var ne=p.state,oe=ne.pending;oe>p.avail_out&&(oe=p.avail_out),0!==oe&&(Ie.arraySet(p.output,ne.pending_buf,ne.pending_out,oe,p.next_out),p.next_out+=oe,ne.pending_out+=oe,p.total_out+=oe,p.avail_out-=oe,ne.pending-=oe,0===ne.pending&&(ne.pending_out=0))}function d(p,ne){Ae._tr_flush_block(p,p.block_start>=0?p.block_start:-1,p.strstart-p.block_start,ne),p.block_start=p.strstart,s(p.strm)}function c(p,ne){p.pending_buf[p.pending++]=ne}function o(p,ne){p.pending_buf[p.pending++]=ne>>>8&255,p.pending_buf[p.pending++]=255&ne}function h(p,ne,oe,F){var V=p.avail_in;return V>F&&(V=F),0===V?0:(p.avail_in-=V,Ie.arraySet(ne,p.input,p.next_in,V,oe),1===p.state.wrap?p.adler=q(p.adler,ne,V,oe):2===p.state.wrap&&(p.adler=J(p.adler,ne,V,oe)),p.next_in+=V,p.total_in+=V,V)}function u(p,ne){var oe,F,V=p.max_chain_length,te=p.strstart,Oe=p.prev_length,ye=p.nice_match,De=p.strstart>p.w_size-Pe?p.strstart-(p.w_size-Pe):0,ot=p.window,Xt=p.w_mask,He=p.prev,at=p.strstart+dt,ct=ot[te+Oe-1],gt=ot[te+Oe];p.prev_length>=p.good_match&&(V>>=2),ye>p.lookahead&&(ye=p.lookahead);do{if(ot[(oe=ne)+Oe]===gt&&ot[oe+Oe-1]===ct&&ot[oe]===ot[te]&&ot[++oe]===ot[te+1]){te+=2,oe++;do{}while(ot[++te]===ot[++oe]&&ot[++te]===ot[++oe]&&ot[++te]===ot[++oe]&&ot[++te]===ot[++oe]&&ot[++te]===ot[++oe]&&ot[++te]===ot[++oe]&&ot[++te]===ot[++oe]&&ot[++te]===ot[++oe]&&at>te);if(F=dt-(at-te),te=at-dt,F>Oe){if(p.match_start=ne,Oe=F,F>=ye)break;ct=ot[te+Oe-1],gt=ot[te+Oe]}}}while((ne=He[ne&Xt])>De&&0!=--V);return Oe<=p.lookahead?Oe:p.lookahead}function g(p){var ne,oe,F,V,te,Oe=p.w_size;do{if(V=p.window_size-p.lookahead-p.strstart,p.strstart>=Oe+(Oe-Pe)){Ie.arraySet(p.window,p.window,Oe,Oe,0),p.match_start-=Oe,p.strstart-=Oe,p.block_start-=Oe,ne=oe=p.hash_size;do{F=p.head[--ne],p.head[ne]=F>=Oe?F-Oe:0}while(--oe);ne=oe=Oe;do{F=p.prev[--ne],p.prev[ne]=F>=Oe?F-Oe:0}while(--oe);V+=Oe}if(0===p.strm.avail_in)break;if(oe=h(p.strm,p.window,p.strstart+p.lookahead,V),p.lookahead+=oe,p.lookahead+p.insert>=qe)for(p.ins_h=p.window[te=p.strstart-p.insert],p.ins_h=(p.ins_h<<p.hash_shift^p.window[te+1])&p.hash_mask;p.insert&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[te+qe-1])&p.hash_mask,p.prev[te&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=te,te++,p.insert--,!(p.lookahead+p.insert<qe)););}while(p.lookahead<Pe&&0!==p.strm.avail_in)}function m(p,ne){for(var oe,F;;){if(p.lookahead<Pe){if(g(p),p.lookahead<Pe&&ne===me)return de;if(0===p.lookahead)break}if(oe=0,p.lookahead>=qe&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+qe-1])&p.hash_mask,oe=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),0!==oe&&p.strstart-oe<=p.w_size-Pe&&(p.match_length=u(p,oe)),p.match_length>=qe)if(F=Ae._tr_tally(p,p.strstart-p.match_start,p.match_length-qe),p.lookahead-=p.match_length,p.match_length<=p.max_lazy_match&&p.lookahead>=qe){p.match_length--;do{p.strstart++,p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+qe-1])&p.hash_mask,oe=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart}while(0!=--p.match_length);p.strstart++}else p.strstart+=p.match_length,p.match_length=0,p.ins_h=p.window[p.strstart],p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+1])&p.hash_mask;else F=Ae._tr_tally(p,0,p.window[p.strstart]),p.lookahead--,p.strstart++;if(F&&(d(p,!1),0===p.strm.avail_out))return de}return p.insert=p.strstart<qe-1?p.strstart:qe-1,ne===We?(d(p,!0),0===p.strm.avail_out?ie:C):p.last_lit&&(d(p,!1),0===p.strm.avail_out)?de:H}function w(p,ne){for(var oe,F,V;;){if(p.lookahead<Pe){if(g(p),p.lookahead<Pe&&ne===me)return de;if(0===p.lookahead)break}if(oe=0,p.lookahead>=qe&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+qe-1])&p.hash_mask,oe=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),p.prev_length=p.match_length,p.prev_match=p.match_start,p.match_length=qe-1,0!==oe&&p.prev_length<p.max_lazy_match&&p.strstart-oe<=p.w_size-Pe&&(p.match_length=u(p,oe),p.match_length<=5&&(p.strategy===ve||p.match_length===qe&&p.strstart-p.match_start>4096)&&(p.match_length=qe-1)),p.prev_length>=qe&&p.match_length<=p.prev_length){V=p.strstart+p.lookahead-qe,F=Ae._tr_tally(p,p.strstart-1-p.prev_match,p.prev_length-qe),p.lookahead-=p.prev_length-1,p.prev_length-=2;do{++p.strstart<=V&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+qe-1])&p.hash_mask,oe=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart)}while(0!=--p.prev_length);if(p.match_available=0,p.match_length=qe-1,p.strstart++,F&&(d(p,!1),0===p.strm.avail_out))return de}else if(p.match_available){if((F=Ae._tr_tally(p,0,p.window[p.strstart-1]))&&d(p,!1),p.strstart++,p.lookahead--,0===p.strm.avail_out)return de}else p.match_available=1,p.strstart++,p.lookahead--}return p.match_available&&(F=Ae._tr_tally(p,0,p.window[p.strstart-1]),p.match_available=0),p.insert=p.strstart<qe-1?p.strstart:qe-1,ne===We?(d(p,!0),0===p.strm.avail_out?ie:C):p.last_lit&&(d(p,!1),0===p.strm.avail_out)?de:H}function z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ee,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ie.Buf16(2*Ye),this.dyn_dtree=new Ie.Buf16(2*(2*Vt+1)),this.bl_tree=new Ie.Buf16(2*(2*$e+1)),l(this.dyn_ltree),l(this.dyn_dtree),l(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ie.Buf16(Nt+1),this.heap=new Ie.Buf16(2*jt+1),l(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ie.Buf16(2*jt+1),l(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function O(p){var ne;return p&&p.state?(p.total_in=p.total_out=0,p.data_type=_e,(ne=p.state).pending=0,ne.pending_out=0,ne.wrap<0&&(ne.wrap=-ne.wrap),ne.status=ne.wrap?Ke:R,p.adler=2===ne.wrap?0:1,ne.last_flush=me,Ae._tr_init(ne),Fe):r(p,Ne)}function D(p){var ne=O(p);return ne===Fe&&function X(p){p.window_size=2*p.w_size,l(p.head),p.max_lazy_match=ge[p.level].max_lazy,p.good_match=ge[p.level].good_length,p.nice_match=ge[p.level].nice_length,p.max_chain_length=ge[p.level].max_chain,p.strstart=0,p.block_start=0,p.lookahead=0,p.insert=0,p.match_length=p.prev_length=qe-1,p.match_available=0,p.ins_h=0}(p.state),ne}function B(p,ne,oe,F,V,te){if(!p)return Ne;var Oe=1;if(ne===he&&(ne=6),0>F?(Oe=0,F=-F):F>15&&(Oe=2,F-=16),1>V||V>It||oe!==Ee||8>F||F>15||0>ne||ne>9||0>te||te>ke)return r(p,Ne);8===F&&(F=9);var ye=new z;return p.state=ye,ye.strm=p,ye.wrap=Oe,ye.gzhead=null,ye.w_bits=F,ye.w_size=1<<ye.w_bits,ye.w_mask=ye.w_size-1,ye.hash_bits=V+7,ye.hash_size=1<<ye.hash_bits,ye.hash_mask=ye.hash_size-1,ye.hash_shift=~~((ye.hash_bits+qe-1)/qe),ye.window=new Ie.Buf8(2*ye.w_size),ye.head=new Ie.Buf16(ye.hash_size),ye.prev=new Ie.Buf16(ye.w_size),ye.lit_bufsize=1<<V+6,ye.pending_buf_size=4*ye.lit_bufsize,ye.pending_buf=new Ie.Buf8(ye.pending_buf_size),ye.d_buf=ye.lit_bufsize>>1,ye.l_buf=3*ye.lit_bufsize,ye.level=ne,ye.strategy=te,ye.method=oe,D(p)}var ge,Ie=e("../utils/common"),Ae=e("./trees"),q=e("./adler32"),J=e("./crc32"),ae=e("./messages"),me=0,We=4,Fe=0,Ne=-2,he=-1,ve=1,ke=4,_e=2,Ee=8,It=9,jt=286,Vt=30,$e=19,Ye=2*jt+1,Nt=15,qe=3,dt=258,Pe=dt+qe+1,Ke=42,R=113,de=1,H=2,ie=3,C=4,Re=function(p,ne,oe,F,V){this.good_length=p,this.max_lazy=ne,this.nice_length=oe,this.max_chain=F,this.func=V};ge=[new Re(0,0,0,0,function _(p,ne){var oe=65535;for(oe>p.pending_buf_size-5&&(oe=p.pending_buf_size-5);;){if(p.lookahead<=1){if(g(p),0===p.lookahead&&ne===me)return de;if(0===p.lookahead)break}p.strstart+=p.lookahead,p.lookahead=0;var F=p.block_start+oe;if((0===p.strstart||p.strstart>=F)&&(p.lookahead=p.strstart-F,p.strstart=F,d(p,!1),0===p.strm.avail_out)||p.strstart-p.block_start>=p.w_size-Pe&&(d(p,!1),0===p.strm.avail_out))return de}return p.insert=0,ne===We?(d(p,!0),0===p.strm.avail_out?ie:C):(p.strstart>p.block_start&&d(p,!1),de)}),new Re(4,4,8,4,m),new Re(4,5,16,8,m),new Re(4,6,32,32,m),new Re(4,4,16,16,w),new Re(8,16,32,32,w),new Re(8,16,128,128,w),new Re(8,32,128,256,w),new Re(32,128,258,1024,w),new Re(32,258,258,4096,w)],i.deflateInit=function W(p,ne){return B(p,ne,Ee,15,8,0)},i.deflateInit2=B,i.deflateReset=D,i.deflateResetKeep=O,i.deflateSetHeader=function M(p,ne){return p&&p.state?2!==p.state.wrap?Ne:(p.state.gzhead=ne,Fe):Ne},i.deflate=function Se(p,ne){var oe,F,V,te;if(!p||!p.state||ne>5||0>ne)return p?r(p,Ne):Ne;if(F=p.state,!p.output||!p.input&&0!==p.avail_in||666===F.status&&ne!==We)return r(p,0===p.avail_out?-5:Ne);if(F.strm=p,oe=F.last_flush,F.last_flush=ne,F.status===Ke)if(2===F.wrap)p.adler=0,c(F,31),c(F,139),c(F,8),F.gzhead?(c(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),c(F,255&F.gzhead.time),c(F,F.gzhead.time>>8&255),c(F,F.gzhead.time>>16&255),c(F,F.gzhead.time>>24&255),c(F,9===F.level?2:F.strategy>=2||F.level<2?4:0),c(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(c(F,255&F.gzhead.extra.length),c(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(p.adler=J(p.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(c(F,0),c(F,0),c(F,0),c(F,0),c(F,0),c(F,9===F.level?2:F.strategy>=2||F.level<2?4:0),c(F,3),F.status=R);else{var Oe=Ee+(F.w_bits-8<<4)<<8;Oe|=(F.strategy>=2||F.level<2?0:F.level<6?1:6===F.level?2:3)<<6,0!==F.strstart&&(Oe|=32),Oe+=31-Oe%31,F.status=R,o(F,Oe),0!==F.strstart&&(o(F,p.adler>>>16),o(F,65535&p.adler)),p.adler=1}if(69===F.status)if(F.gzhead.extra){for(V=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>V&&(p.adler=J(p.adler,F.pending_buf,F.pending-V,V)),s(p),V=F.pending,F.pending!==F.pending_buf_size));)c(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>V&&(p.adler=J(p.adler,F.pending_buf,F.pending-V,V)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(73===F.status)if(F.gzhead.name){V=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>V&&(p.adler=J(p.adler,F.pending_buf,F.pending-V,V)),s(p),V=F.pending,F.pending===F.pending_buf_size)){te=1;break}te=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,c(F,te)}while(0!==te);F.gzhead.hcrc&&F.pending>V&&(p.adler=J(p.adler,F.pending_buf,F.pending-V,V)),0===te&&(F.gzindex=0,F.status=91)}else F.status=91;if(91===F.status)if(F.gzhead.comment){V=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>V&&(p.adler=J(p.adler,F.pending_buf,F.pending-V,V)),s(p),V=F.pending,F.pending===F.pending_buf_size)){te=1;break}te=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,c(F,te)}while(0!==te);F.gzhead.hcrc&&F.pending>V&&(p.adler=J(p.adler,F.pending_buf,F.pending-V,V)),0===te&&(F.status=103)}else F.status=103;if(103===F.status&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&s(p),F.pending+2<=F.pending_buf_size&&(c(F,255&p.adler),c(F,p.adler>>8&255),p.adler=0,F.status=R)):F.status=R),0!==F.pending){if(s(p),0===p.avail_out)return F.last_flush=-1,Fe}else if(0===p.avail_in&&n(ne)<=n(oe)&&ne!==We)return r(p,-5);if(666===F.status&&0!==p.avail_in)return r(p,-5);if(0!==p.avail_in||0!==F.lookahead||ne!==me&&666!==F.status){var De=2===F.strategy?function j(p,ne){for(var oe;;){if(0===p.lookahead&&(g(p),0===p.lookahead)){if(ne===me)return de;break}if(p.match_length=0,oe=Ae._tr_tally(p,0,p.window[p.strstart]),p.lookahead--,p.strstart++,oe&&(d(p,!1),0===p.strm.avail_out))return de}return p.insert=0,ne===We?(d(p,!0),0===p.strm.avail_out?ie:C):p.last_lit&&(d(p,!1),0===p.strm.avail_out)?de:H}(F,ne):3===F.strategy?function A(p,ne){for(var oe,F,V,te,Oe=p.window;;){if(p.lookahead<=dt){if(g(p),p.lookahead<=dt&&ne===me)return de;if(0===p.lookahead)break}if(p.match_length=0,p.lookahead>=qe&&p.strstart>0&&(F=Oe[V=p.strstart-1])===Oe[++V]&&F===Oe[++V]&&F===Oe[++V]){te=p.strstart+dt;do{}while(F===Oe[++V]&&F===Oe[++V]&&F===Oe[++V]&&F===Oe[++V]&&F===Oe[++V]&&F===Oe[++V]&&F===Oe[++V]&&F===Oe[++V]&&te>V);p.match_length=dt-(te-V),p.match_length>p.lookahead&&(p.match_length=p.lookahead)}if(p.match_length>=qe?(oe=Ae._tr_tally(p,1,p.match_length-qe),p.lookahead-=p.match_length,p.strstart+=p.match_length,p.match_length=0):(oe=Ae._tr_tally(p,0,p.window[p.strstart]),p.lookahead--,p.strstart++),oe&&(d(p,!1),0===p.strm.avail_out))return de}return p.insert=0,ne===We?(d(p,!0),0===p.strm.avail_out?ie:C):p.last_lit&&(d(p,!1),0===p.strm.avail_out)?de:H}(F,ne):ge[F.level].func(F,ne);if((De===ie||De===C)&&(F.status=666),De===de||De===ie)return 0===p.avail_out&&(F.last_flush=-1),Fe;if(De===H&&(1===ne?Ae._tr_align(F):5!==ne&&(Ae._tr_stored_block(F,0,0,!1),3===ne&&(l(F.head),0===F.lookahead&&(F.strstart=0,F.block_start=0,F.insert=0))),s(p),0===p.avail_out))return F.last_flush=-1,Fe}return ne!==We?Fe:F.wrap<=0?1:(2===F.wrap?(c(F,255&p.adler),c(F,p.adler>>8&255),c(F,p.adler>>16&255),c(F,p.adler>>24&255),c(F,255&p.total_in),c(F,p.total_in>>8&255),c(F,p.total_in>>16&255),c(F,p.total_in>>24&255)):(o(F,p.adler>>>16),o(F,65535&p.adler)),s(p),F.wrap>0&&(F.wrap=-F.wrap),0!==F.pending?Fe:1)},i.deflateEnd=function Ue(p){var ne;return p&&p.state?(ne=p.state.status)!==Ke&&69!==ne&&73!==ne&&91!==ne&&103!==ne&&ne!==R&&666!==ne?r(p,Ne):(p.state=null,ne===R?r(p,-3):Fe):Ne},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(e,t){t.exports=function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],34:[function(e,t){t.exports=function(n,l){var s,d,c,o,h,u,g,_,m,w,A,j,X,z,O,D,M,B,W,Se,Ue,ge,Ie,Ae,q;Ae=n.input,c=(d=n.next_in)+(n.avail_in-5),q=n.output,h=(o=n.next_out)-(l-n.avail_out),u=o+(n.avail_out-257),g=(s=n.state).dmax,_=s.wsize,m=s.whave,w=s.wnext,A=s.window,j=s.hold,X=s.bits,z=s.lencode,O=s.distcode,D=(1<<s.lenbits)-1,M=(1<<s.distbits)-1;e:do{15>X&&(j+=Ae[d++]<<X,j+=Ae[d++]<<(X+=8),X+=8),B=z[j&D];t:for(;;){if(j>>>=W=B>>>24,X-=W,0==(W=B>>>16&255))q[o++]=65535&B;else{if(!(16&W)){if(!(64&W)){B=z[(65535&B)+(j&(1<<W)-1)];continue t}if(32&W){s.mode=12;break e}n.msg="invalid literal/length code",s.mode=30;break e}Se=65535&B,(W&=15)&&(W>X&&(j+=Ae[d++]<<X,X+=8),Se+=j&(1<<W)-1,j>>>=W,X-=W),15>X&&(j+=Ae[d++]<<X,j+=Ae[d++]<<(X+=8),X+=8),B=O[j&M];i:for(;;){if(j>>>=W=B>>>24,X-=W,!(16&(W=B>>>16&255))){if(!(64&W)){B=O[(65535&B)+(j&(1<<W)-1)];continue i}n.msg="invalid distance code",s.mode=30;break e}if(Ue=65535&B,(W&=15)>X&&(j+=Ae[d++]<<X,W>(X+=8)&&(j+=Ae[d++]<<X,X+=8)),(Ue+=j&(1<<W)-1)>g){n.msg="invalid distance too far back",s.mode=30;break e}if(j>>>=W,X-=W,Ue>(W=o-h)){if((W=Ue-W)>m&&s.sane){n.msg="invalid distance too far back",s.mode=30;break e}if(ge=0,Ie=A,0===w){if(ge+=_-W,Se>W){Se-=W;do{q[o++]=A[ge++]}while(--W);ge=o-Ue,Ie=q}}else if(W>w){if(ge+=_+w-W,Se>(W-=w)){Se-=W;do{q[o++]=A[ge++]}while(--W);if(ge=0,Se>w){Se-=W=w;do{q[o++]=A[ge++]}while(--W);ge=o-Ue,Ie=q}}}else if(ge+=w-W,Se>W){Se-=W;do{q[o++]=A[ge++]}while(--W);ge=o-Ue,Ie=q}for(;Se>2;)q[o++]=Ie[ge++],q[o++]=Ie[ge++],q[o++]=Ie[ge++],Se-=3;Se&&(q[o++]=Ie[ge++],Se>1&&(q[o++]=Ie[ge++]))}else{ge=o-Ue;do{q[o++]=q[ge++],q[o++]=q[ge++],q[o++]=q[ge++],Se-=3}while(Se>2);Se&&(q[o++]=q[ge++],Se>1&&(q[o++]=q[ge++]))}break}}break}}while(c>d&&u>o);j&=(1<<(X-=(Se=X>>3)<<3))-1,n.next_in=d-=Se,n.next_out=o,n.avail_in=c>d?c-d+5:5-(d-c),n.avail_out=u>o?u-o+257:257-(o-u),s.hold=j,s.bits=X}},{}],35:[function(e,t,i){function r(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new j.Buf16(320),this.work=new j.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(H){var ie;return H&&H.state?(H.total_in=H.total_out=(ie=H.state).total=0,H.msg="",ie.wrap&&(H.adler=1&ie.wrap),ie.mode=We,ie.last=0,ie.havedict=0,ie.dmax=32768,ie.head=null,ie.hold=0,ie.bits=0,ie.lencode=ie.lendyn=new j.Buf32(Mt),ie.distcode=ie.distdyn=new j.Buf32(Dt),ie.sane=1,ie.back=-1,Ie):J}function s(H){var ie;return H&&H.state?((ie=H.state).wsize=0,ie.whave=0,ie.wnext=0,l(H)):J}function d(H,ie){var C,fe;return H&&H.state?(fe=H.state,0>ie?(C=0,ie=-ie):(C=1+(ie>>4),48>ie&&(ie&=15)),ie&&(8>ie||ie>15)?J:(null!==fe.window&&fe.wbits!==ie&&(fe.window=null),fe.wrap=C,fe.wbits=ie,s(H))):J}function c(H,ie){var C,fe;return H?(fe=new n,H.state=fe,fe.window=null,(C=d(H,ie))!==Ie&&(H.state=null),C):J}function h(H){if(de){var ie;for(w=new j.Buf32(512),A=new j.Buf32(32),ie=0;144>ie;)H.lens[ie++]=8;for(;256>ie;)H.lens[ie++]=9;for(;280>ie;)H.lens[ie++]=7;for(;288>ie;)H.lens[ie++]=8;for(D(B,H.lens,0,288,w,0,H.work,{bits:9}),ie=0;32>ie;)H.lens[ie++]=5;D(W,H.lens,0,32,A,0,H.work,{bits:5}),de=!1}H.lencode=w,H.lenbits=9,H.distcode=A,H.distbits=5}var w,A,j=e("../utils/common"),X=e("./adler32"),z=e("./crc32"),O=e("./inffast"),D=e("./inftrees"),B=1,W=2,Ie=0,J=-2,We=1,Mt=852,Dt=592,de=!0;i.inflateReset=s,i.inflateReset2=d,i.inflateResetKeep=l,i.inflateInit=function o(H){return c(H,15)},i.inflateInit2=c,i.inflate=function g(H,ie){var C,fe,Re,p,ne,oe,F,V,te,Oe,ye,De,ot,Xt,He,at,ct,gt,Ut,Kt,lt,ut,f,v,y=0,x=new j.Buf8(4),S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&0!==H.avail_in)return J;12===(C=H.state).mode&&(C.mode=13),ne=H.next_out,Re=H.output,p=H.next_in,fe=H.input,V=C.hold,te=C.bits,Oe=oe=H.avail_in,ye=F=H.avail_out,ut=Ie;e:for(;;)switch(C.mode){case We:if(0===C.wrap){C.mode=13;break}for(;16>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if(2&C.wrap&&35615===V){C.check=0,x[0]=255&V,x[1]=V>>>8&255,C.check=z(C.check,x,2,0),V=0,te=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&V)<<8)+(V>>8))%31){H.msg="incorrect header check",C.mode=30;break}if(8!=(15&V)){H.msg="unknown compression method",C.mode=30;break}if(te-=4,lt=8+(15&(V>>>=4)),0===C.wbits)C.wbits=lt;else if(lt>C.wbits){H.msg="invalid window size",C.mode=30;break}C.dmax=1<<lt,H.adler=C.check=1,C.mode=512&V?10:12,V=0,te=0;break;case 2:for(;16>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if(C.flags=V,8!=(255&C.flags)){H.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){H.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=V>>8&1),512&C.flags&&(x[0]=255&V,x[1]=V>>>8&255,C.check=z(C.check,x,2,0)),V=0,te=0,C.mode=3;case 3:for(;32>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}C.head&&(C.head.time=V),512&C.flags&&(x[0]=255&V,x[1]=V>>>8&255,x[2]=V>>>16&255,x[3]=V>>>24&255,C.check=z(C.check,x,4,0)),V=0,te=0,C.mode=4;case 4:for(;16>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}C.head&&(C.head.xflags=255&V,C.head.os=V>>8),512&C.flags&&(x[0]=255&V,x[1]=V>>>8&255,C.check=z(C.check,x,2,0)),V=0,te=0,C.mode=5;case 5:if(1024&C.flags){for(;16>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}C.length=V,C.head&&(C.head.extra_len=V),512&C.flags&&(x[0]=255&V,x[1]=V>>>8&255,C.check=z(C.check,x,2,0)),V=0,te=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&((De=C.length)>oe&&(De=oe),De&&(C.head&&(lt=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),j.arraySet(C.head.extra,fe,p,De,lt)),512&C.flags&&(C.check=z(C.check,fe,De,p)),oe-=De,p+=De,C.length-=De),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(0===oe)break e;De=0;do{lt=fe[p+De++],C.head&&lt&&C.length<65536&&(C.head.name+=String.fromCharCode(lt))}while(lt&&oe>De);if(512&C.flags&&(C.check=z(C.check,fe,De,p)),oe-=De,p+=De,lt)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(0===oe)break e;De=0;do{lt=fe[p+De++],C.head&&lt&&C.length<65536&&(C.head.comment+=String.fromCharCode(lt))}while(lt&&oe>De);if(512&C.flags&&(C.check=z(C.check,fe,De,p)),oe-=De,p+=De,lt)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;16>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if(V!==(65535&C.check)){H.msg="header crc mismatch",C.mode=30;break}V=0,te=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),H.adler=C.check=0,C.mode=12;break;case 10:for(;32>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}H.adler=C.check=r(V),V=0,te=0,C.mode=11;case 11:if(0===C.havedict)return H.next_out=ne,H.avail_out=F,H.next_in=p,H.avail_in=oe,C.hold=V,C.bits=te,2;H.adler=C.check=1,C.mode=12;case 12:if(5===ie||6===ie)break e;case 13:if(C.last){V>>>=7&te,te-=7&te,C.mode=27;break}for(;3>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}switch(C.last=1&V,te-=1,3&(V>>>=1)){case 0:C.mode=14;break;case 1:if(h(C),C.mode=20,6===ie){V>>>=2,te-=2;break e}break;case 2:C.mode=17;break;case 3:H.msg="invalid block type",C.mode=30}V>>>=2,te-=2;break;case 14:for(V>>>=7&te,te-=7&te;32>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if((65535&V)!=(V>>>16^65535)){H.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&V,V=0,te=0,C.mode=15,6===ie)break e;case 15:C.mode=16;case 16:if(De=C.length){if(De>oe&&(De=oe),De>F&&(De=F),0===De)break e;j.arraySet(Re,fe,p,De,ne),oe-=De,p+=De,F-=De,ne+=De,C.length-=De;break}C.mode=12;break;case 17:for(;14>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if(C.nlen=257+(31&V),te-=5,C.ndist=1+(31&(V>>>=5)),te-=5,C.ncode=4+(15&(V>>>=5)),V>>>=4,te-=4,C.nlen>286||C.ndist>30){H.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;3>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}C.lens[S[C.have++]]=7&V,V>>>=3,te-=3}for(;C.have<19;)C.lens[S[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,ut=D(0,C.lens,0,19,C.lencode,0,C.work,f={bits:C.lenbits}),C.lenbits=f.bits,ut){H.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;at=(y=C.lencode[V&(1<<C.lenbits)-1])>>>16&255,ct=65535&y,!(te>=(He=y>>>24));){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if(16>ct)V>>>=He,te-=He,C.lens[C.have++]=ct;else{if(16===ct){for(v=He+2;v>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if(V>>>=He,te-=He,0===C.have){H.msg="invalid bit length repeat",C.mode=30;break}lt=C.lens[C.have-1],De=3+(3&V),V>>>=2,te-=2}else if(17===ct){for(v=He+3;v>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}te-=He,lt=0,De=3+(7&(V>>>=He)),V>>>=3,te-=3}else{for(v=He+7;v>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}te-=He,lt=0,De=11+(127&(V>>>=He)),V>>>=7,te-=7}if(C.have+De>C.nlen+C.ndist){H.msg="invalid bit length repeat",C.mode=30;break}for(;De--;)C.lens[C.have++]=lt}}if(30===C.mode)break;if(0===C.lens[256]){H.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,ut=D(B,C.lens,0,C.nlen,C.lencode,0,C.work,f={bits:C.lenbits}),C.lenbits=f.bits,ut){H.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,ut=D(W,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,f={bits:C.distbits}),C.distbits=f.bits,ut){H.msg="invalid distances set",C.mode=30;break}if(C.mode=20,6===ie)break e;case 20:C.mode=21;case 21:if(oe>=6&&F>=258){H.next_out=ne,H.avail_out=F,H.next_in=p,H.avail_in=oe,C.hold=V,C.bits=te,O(H,ye),ne=H.next_out,Re=H.output,F=H.avail_out,p=H.next_in,fe=H.input,oe=H.avail_in,V=C.hold,te=C.bits,12===C.mode&&(C.back=-1);break}for(C.back=0;at=(y=C.lencode[V&(1<<C.lenbits)-1])>>>16&255,ct=65535&y,!(te>=(He=y>>>24));){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if(at&&!(240&at)){for(gt=He,Ut=at,Kt=ct;at=(y=C.lencode[Kt+((V&(1<<gt+Ut)-1)>>gt)])>>>16&255,ct=65535&y,!(te>=gt+(He=y>>>24));){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}V>>>=gt,te-=gt,C.back+=gt}if(V>>>=He,te-=He,C.back+=He,C.length=ct,0===at){C.mode=26;break}if(32&at){C.back=-1,C.mode=12;break}if(64&at){H.msg="invalid literal/length code",C.mode=30;break}C.extra=15&at,C.mode=22;case 22:if(C.extra){for(v=C.extra;v>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}C.length+=V&(1<<C.extra)-1,V>>>=C.extra,te-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;at=(y=C.distcode[V&(1<<C.distbits)-1])>>>16&255,ct=65535&y,!(te>=(He=y>>>24));){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if(!(240&at)){for(gt=He,Ut=at,Kt=ct;at=(y=C.distcode[Kt+((V&(1<<gt+Ut)-1)>>gt)])>>>16&255,ct=65535&y,!(te>=gt+(He=y>>>24));){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}V>>>=gt,te-=gt,C.back+=gt}if(V>>>=He,te-=He,C.back+=He,64&at){H.msg="invalid distance code",C.mode=30;break}C.offset=ct,C.extra=15&at,C.mode=24;case 24:if(C.extra){for(v=C.extra;v>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}C.offset+=V&(1<<C.extra)-1,V>>>=C.extra,te-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){H.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(0===F)break e;if(C.offset>(De=ye-F)){if((De=C.offset-De)>C.whave&&C.sane){H.msg="invalid distance too far back",C.mode=30;break}ot=De>C.wnext?C.wsize-(De-=C.wnext):C.wnext-De,De>C.length&&(De=C.length),Xt=C.window}else Xt=Re,ot=ne-C.offset,De=C.length;De>F&&(De=F),F-=De,C.length-=De;do{Re[ne++]=Xt[ot++]}while(--De);0===C.length&&(C.mode=21);break;case 26:if(0===F)break e;Re[ne++]=C.length,F--,C.mode=21;break;case 27:if(C.wrap){for(;32>te;){if(0===oe)break e;oe--,V|=fe[p++]<<te,te+=8}if(H.total_out+=ye-=F,C.total+=ye,ye&&(H.adler=C.check=C.flags?z(C.check,Re,ye,ne-ye):X(C.check,Re,ye,ne-ye)),ye=F,(C.flags?V:r(V))!==C.check){H.msg="incorrect data check",C.mode=30;break}V=0,te=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;32>te;){if(0===oe)break e;oe--,V+=fe[p++]<<te,te+=8}if(V!==(4294967295&C.total)){H.msg="incorrect length check",C.mode=30;break}V=0,te=0}C.mode=29;case 29:ut=1;break e;case 30:ut=-3;break e;case 31:return-4;default:return J}return H.next_out=ne,H.avail_out=F,H.next_in=p,H.avail_in=oe,C.hold=V,C.bits=te,(C.wsize||ye!==H.avail_out&&C.mode<30&&(C.mode<27||4!==ie))&&function u(H,ie,C,fe){var Re,p=H.state;return null===p.window&&(p.wsize=1<<p.wbits,p.wnext=0,p.whave=0,p.window=new j.Buf8(p.wsize)),fe>=p.wsize?(j.arraySet(p.window,ie,C-p.wsize,p.wsize,0),p.wnext=0,p.whave=p.wsize):((Re=p.wsize-p.wnext)>fe&&(Re=fe),j.arraySet(p.window,ie,C-fe,Re,p.wnext),(fe-=Re)?(j.arraySet(p.window,ie,C-fe,fe,0),p.wnext=fe,p.whave=p.wsize):(p.wnext+=Re,p.wnext===p.wsize&&(p.wnext=0),p.whave<p.wsize&&(p.whave+=Re))),0}(H,H.output,H.next_out,ye-H.avail_out)?(C.mode=31,-4):(ye-=H.avail_out,H.total_in+=Oe-=H.avail_in,H.total_out+=ye,C.total+=ye,C.wrap&&ye&&(H.adler=C.check=C.flags?z(C.check,Re,ye,H.next_out-ye):X(C.check,Re,ye,H.next_out-ye)),H.data_type=C.bits+(C.last?64:0)+(12===C.mode?128:0)+(20===C.mode||15===C.mode?256:0),(0===Oe&&0===ye||4===ie)&&ut===Ie&&(ut=-5),ut)},i.inflateEnd=function _(H){if(!H||!H.state)return J;var ie=H.state;return ie.window&&(ie.window=null),H.state=null,Ie},i.inflateGetHeader=function m(H,ie){var C;return H&&H.state&&2&(C=H.state).wrap?(C.head=ie,ie.done=!1,Ie):J},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(e,t){var i=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(_,m,w,A,j,X,z,O){var D,M,B,W,Se,Ue,ge,Ie,Ae,q=O.bits,J=0,ae=0,me=0,G=0,Be=0,We=0,Xe=0,Fe=0,Ze=0,Ne=0,be=null,Z=0,he=new i.Buf16(16),ve=new i.Buf16(16),we=null,Te=0;for(J=0;15>=J;J++)he[J]=0;for(ae=0;A>ae;ae++)he[m[w+ae]]++;for(Be=q,G=15;G>=1&&0===he[G];G--);if(Be>G&&(Be=G),0===G)return j[X++]=20971520,j[X++]=20971520,O.bits=1,0;for(me=1;G>me&&0===he[me];me++);for(me>Be&&(Be=me),Fe=1,J=1;15>=J;J++)if(Fe<<=1,0>(Fe-=he[J]))return-1;if(Fe>0&&(0===_||1!==G))return-1;for(ve[1]=0,J=1;15>J;J++)ve[J+1]=ve[J]+he[J];for(ae=0;A>ae;ae++)0!==m[w+ae]&&(z[ve[m[w+ae]]++]=ae);if(0===_?(be=we=z,Ue=19):1===_?(be=o,Z-=257,we=h,Te-=257,Ue=256):(be=u,we=g,Ue=-1),Ne=0,ae=0,J=me,Se=X,We=Be,Xe=0,B=-1,W=(Ze=1<<Be)-1,1===_&&Ze>852||2===_&&Ze>592)return 1;for(;;){ge=J-Xe,z[ae]<Ue?(Ie=0,Ae=z[ae]):z[ae]>Ue?(Ie=we[Te+z[ae]],Ae=be[Z+z[ae]]):(Ie=96,Ae=0),D=1<<J-Xe,me=M=1<<We;do{j[Se+(Ne>>Xe)+(M-=D)]=ge<<24|Ie<<16|Ae}while(0!==M);for(D=1<<J-1;Ne&D;)D>>=1;if(0!==D?(Ne&=D-1,Ne+=D):Ne=0,ae++,0==--he[J]){if(J===G)break;J=m[w+z[ae]]}if(J>Be&&(Ne&W)!==B){for(0===Xe&&(Xe=Be),Se+=me,Fe=1<<(We=J-Xe);G>We+Xe&&!(0>=(Fe-=he[We+Xe]));)We++,Fe<<=1;if(Ze+=1<<We,1===_&&Ze>852||2===_&&Ze>592)return 1;j[B=Ne&W]=Be<<24|We<<16|Se-X}}return 0!==Ne&&(j[Se+Ne]=J-Xe<<24|64<<16),O.bits=Be,0}},{"../utils/common":27}],37:[function(e,t){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(e,t,i){function r(R){for(var ue=R.length;--ue>=0;)R[ue]=0}function n(R){return 256>R?Nt[R]:Nt[256+(R>>>7)]}function l(R,ue){R.pending_buf[R.pending++]=255&ue,R.pending_buf[R.pending++]=ue>>>8&255}function s(R,ue,de){R.bi_valid>ke-de?(R.bi_buf|=ue<<R.bi_valid&65535,l(R,R.bi_buf),R.bi_buf=ue>>ke-R.bi_valid,R.bi_valid+=de-ke):(R.bi_buf|=ue<<R.bi_valid&65535,R.bi_valid+=de)}function d(R,ue,de){s(R,de[2*ue],de[2*ue+1])}function c(R,ue){var de=0;do{de|=1&R,R>>>=1,de<<=1}while(--ue>0);return de>>>1}function u(R,ue,de){var H,ie,C=new Array(Te+1),fe=0;for(H=1;Te>=H;H++)C[H]=fe=fe+de[H-1]<<1;for(ie=0;ue>=ie;ie++){var Re=R[2*ie+1];0!==Re&&(R[2*ie]=c(C[Re]++,Re))}}function _(R){var ue;for(ue=0;Z>ue;ue++)R.dyn_ltree[2*ue]=0;for(ue=0;he>ue;ue++)R.dyn_dtree[2*ue]=0;for(ue=0;ve>ue;ue++)R.bl_tree[2*ue]=0;R.dyn_ltree[2*_e]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function m(R){R.bi_valid>8?l(R,R.bi_buf):R.bi_valid>0&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function A(R,ue,de,H){var ie=2*ue,C=2*de;return R[ie]<R[C]||R[ie]===R[C]&&H[ue]<=H[de]}function j(R,ue,de){for(var H=R.heap[de],ie=de<<1;ie<=R.heap_len&&(ie<R.heap_len&&A(ue,R.heap[ie+1],R.heap[ie],R.depth)&&ie++,!A(ue,H,R.heap[ie],R.depth));)R.heap[de]=R.heap[ie],de=ie,ie<<=1;R.heap[de]=H}function X(R,ue,de){var H,ie,C,fe,Re=0;if(0!==R.last_lit)do{H=R.pending_buf[R.d_buf+2*Re]<<8|R.pending_buf[R.d_buf+2*Re+1],ie=R.pending_buf[R.l_buf+Re],Re++,0===H?d(R,ie,ue):(d(R,(C=qe[ie])+be+1,ue),0!==(fe=Ht[C])&&s(R,ie-=dt[C],fe),d(R,C=n(--H),de),0!==(fe=Bt[C])&&s(R,H-=Pe[C],fe))}while(Re<R.last_lit);d(R,_e,ue)}function z(R,ue){var de,H,ie,C=ue.dyn_tree,fe=ue.stat_desc.static_tree,Re=ue.stat_desc.has_stree,p=ue.stat_desc.elems,ne=-1;for(R.heap_len=0,R.heap_max=we,de=0;p>de;de++)0!==C[2*de]?(R.heap[++R.heap_len]=ne=de,R.depth[de]=0):C[2*de+1]=0;for(;R.heap_len<2;)C[2*(ie=R.heap[++R.heap_len]=2>ne?++ne:0)]=1,R.depth[ie]=0,R.opt_len--,Re&&(R.static_len-=fe[2*ie+1]);for(ue.max_code=ne,de=R.heap_len>>1;de>=1;de--)j(R,C,de);ie=p;do{de=R.heap[1],R.heap[1]=R.heap[R.heap_len--],j(R,C,1),H=R.heap[1],R.heap[--R.heap_max]=de,R.heap[--R.heap_max]=H,C[2*ie]=C[2*de]+C[2*H],R.depth[ie]=(R.depth[de]>=R.depth[H]?R.depth[de]:R.depth[H])+1,C[2*de+1]=C[2*H+1]=ie,R.heap[1]=ie++,j(R,C,1)}while(R.heap_len>=2);R.heap[--R.heap_max]=R.heap[1],function h(R,ue){var de,H,ie,C,fe,Re,p=ue.dyn_tree,ne=ue.max_code,oe=ue.stat_desc.static_tree,F=ue.stat_desc.has_stree,V=ue.stat_desc.extra_bits,te=ue.stat_desc.extra_base,Oe=ue.stat_desc.max_length,ye=0;for(C=0;Te>=C;C++)R.bl_count[C]=0;for(p[2*R.heap[R.heap_max]+1]=0,de=R.heap_max+1;we>de;de++)(C=p[2*p[2*(H=R.heap[de])+1]+1]+1)>Oe&&(C=Oe,ye++),p[2*H+1]=C,H>ne||(R.bl_count[C]++,fe=0,H>=te&&(fe=V[H-te]),R.opt_len+=(Re=p[2*H])*(C+fe),F&&(R.static_len+=Re*(oe[2*H+1]+fe)));if(0!==ye){do{for(C=Oe-1;0===R.bl_count[C];)C--;R.bl_count[C]--,R.bl_count[C+1]+=2,R.bl_count[Oe]--,ye-=2}while(ye>0);for(C=Oe;0!==C;C--)for(H=R.bl_count[C];0!==H;)(ie=R.heap[--de])>ne||(p[2*ie+1]!==C&&(R.opt_len+=(C-p[2*ie+1])*p[2*ie],p[2*ie+1]=C),H--)}}(R,ue),u(C,ne,R.bl_count)}function O(R,ue,de){var H,ie,C=-1,fe=ue[1],Re=0,p=7,ne=4;for(0===fe&&(p=138,ne=3),ue[2*(de+1)+1]=65535,H=0;de>=H;H++)ie=fe,fe=ue[2*(H+1)+1],++Re<p&&ie===fe||(ne>Re?R.bl_tree[2*ie]+=Re:0!==ie?(ie!==C&&R.bl_tree[2*ie]++,R.bl_tree[2*Ee]++):10>=Re?R.bl_tree[2*It]++:R.bl_tree[2*mt]++,Re=0,C=ie,0===fe?(p=138,ne=3):ie===fe?(p=6,ne=3):(p=7,ne=4))}function D(R,ue,de){var H,ie,C=-1,fe=ue[1],Re=0,p=7,ne=4;for(0===fe&&(p=138,ne=3),H=0;de>=H;H++)if(ie=fe,fe=ue[2*(H+1)+1],!(++Re<p&&ie===fe)){if(ne>Re)do{d(R,ie,R.bl_tree)}while(0!=--Re);else 0!==ie?(ie!==C&&(d(R,ie,R.bl_tree),Re--),d(R,Ee,R.bl_tree),s(R,Re-3,2)):10>=Re?(d(R,It,R.bl_tree),s(R,Re-3,3)):(d(R,mt,R.bl_tree),s(R,Re-11,7));Re=0,C=ie,0===fe?(p=138,ne=3):ie===fe?(p=6,ne=3):(p=7,ne=4)}}function Ue(R,ue,de,H){s(R,(Be<<1)+(H?1:0),3),function w(R,ue,de,H){m(R),H&&(l(R,de),l(R,~de)),q.arraySet(R.pending_buf,R.window,ue,de,R.pending),R.pending+=de}(R,ue,de,!0)}var q=e("../utils/common"),Be=0,be=256,Z=be+1+29,he=30,ve=19,we=2*Z+1,Te=15,ke=16,_e=256,Ee=16,It=17,mt=18,Ht=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Bt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],yt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],jt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$e=new Array(2*(Z+2));r($e);var Ye=new Array(2*he);r(Ye);var Nt=new Array(512);r(Nt);var qe=new Array(256);r(qe);var dt=new Array(29);r(dt);var Pe=new Array(he);r(Pe);var rt,Ke,Pt,pt=function(R,ue,de,H,ie){this.static_tree=R,this.extra_bits=ue,this.extra_base=de,this.elems=H,this.max_length=ie,this.has_stree=R&&R.length},Mt=function(R,ue){this.dyn_tree=R,this.max_code=0,this.stat_desc=ue},Dt=!1;i._tr_init=function Se(R){Dt||(function g(){var R,ue,de,H,ie,C=new Array(Te+1);for(de=0,H=0;28>H;H++)for(dt[H]=de,R=0;R<1<<Ht[H];R++)qe[de++]=H;for(qe[de-1]=H,ie=0,H=0;16>H;H++)for(Pe[H]=ie,R=0;R<1<<Bt[H];R++)Nt[ie++]=H;for(ie>>=7;he>H;H++)for(Pe[H]=ie<<7,R=0;R<1<<Bt[H]-7;R++)Nt[256+ie++]=H;for(ue=0;Te>=ue;ue++)C[ue]=0;for(R=0;143>=R;)$e[2*R+1]=8,R++,C[8]++;for(;255>=R;)$e[2*R+1]=9,R++,C[9]++;for(;279>=R;)$e[2*R+1]=7,R++,C[7]++;for(;287>=R;)$e[2*R+1]=8,R++,C[8]++;for(u($e,Z+1,C),R=0;he>R;R++)Ye[2*R+1]=5,Ye[2*R]=c(R,5);rt=new pt($e,Ht,be+1,Z,Te),Ke=new pt(Ye,Bt,0,he,Te),Pt=new pt(new Array(0),yt,0,ve,7)}(),Dt=!0),R.l_desc=new Mt(R.dyn_ltree,rt),R.d_desc=new Mt(R.dyn_dtree,Ke),R.bl_desc=new Mt(R.bl_tree,Pt),R.bi_buf=0,R.bi_valid=0,_(R)},i._tr_stored_block=Ue,i._tr_flush_block=function Ie(R,ue,de,H){var ie,C,fe=0;R.level>0?(2===R.strm.data_type&&(R.strm.data_type=function W(R){var ue,de=4093624447;for(ue=0;31>=ue;ue++,de>>>=1)if(1&de&&0!==R.dyn_ltree[2*ue])return 0;if(0!==R.dyn_ltree[18]||0!==R.dyn_ltree[20]||0!==R.dyn_ltree[26])return 1;for(ue=32;be>ue;ue++)if(0!==R.dyn_ltree[2*ue])return 1;return 0}(R)),z(R,R.l_desc),z(R,R.d_desc),fe=function M(R){var ue;for(O(R,R.dyn_ltree,R.l_desc.max_code),O(R,R.dyn_dtree,R.d_desc.max_code),z(R,R.bl_desc),ue=ve-1;ue>=3&&0===R.bl_tree[2*jt[ue]+1];ue--);return R.opt_len+=3*(ue+1)+5+5+4,ue}(R),(ie=R.opt_len+3+7>>>3)>=(C=R.static_len+3+7>>>3)&&(ie=C)):ie=C=de+5,ie>=de+4&&-1!==ue?Ue(R,ue,de,H):4===R.strategy||C===ie?(s(R,2+(H?1:0),3),X(R,$e,Ye)):(s(R,4+(H?1:0),3),function B(R,ue,de,H){var ie;for(s(R,ue-257,5),s(R,de-1,5),s(R,H-4,4),ie=0;H>ie;ie++)s(R,R.bl_tree[2*jt[ie]+1],3);D(R,R.dyn_ltree,ue-1),D(R,R.dyn_dtree,de-1)}(R,R.l_desc.max_code+1,R.d_desc.max_code+1,fe+1),X(R,R.dyn_ltree,R.dyn_dtree)),_(R),H&&m(R)},i._tr_tally=function Ae(R,ue,de){return R.pending_buf[R.d_buf+2*R.last_lit]=ue>>>8&255,R.pending_buf[R.d_buf+2*R.last_lit+1]=255&ue,R.pending_buf[R.l_buf+R.last_lit]=255&de,R.last_lit++,0===ue?R.dyn_ltree[2*de]++:(R.matches++,ue--,R.dyn_ltree[2*(qe[de]+be+1)]++,R.dyn_dtree[2*n(ue)]++),R.last_lit===R.lit_bufsize-1},i._tr_align=function ge(R){s(R,2,3),d(R,_e,$e),function o(R){16===R.bi_valid?(l(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):R.bi_valid>=8&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}(R)}},{"../utils/common":27}],39:[function(e,t){t.exports=function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[9])(9)}),function(e){"object"==typeof exports&&typeof module<"u"?module.exports=e():"function"==typeof define&&define.amd?define([],e):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).localforage=e()}(function(){return function e(t,i,r){function n(d,c){if(!i[d]){if(!t[d]){var o="function"==typeof require&&require;if(!c&&o)return o(d,!0);if(l)return l(d,!0);var h=new Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[d]={exports:{}};t[d][0].call(u.exports,function(g){return n(t[d][1][g]||g)},u,u.exports,e,t,i,r)}return i[d].exports}for(var l="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,i){(function(r){function n(){g=!0;for(var m,w,A=_.length;A;){for(w=_,_=[],m=-1;++m<A;)w[m]();A=_.length}g=!1}var s,d=r.MutationObserver||r.WebKitMutationObserver;if(d){var c=0,o=new d(n),h=r.document.createTextNode("");o.observe(h,{characterData:!0}),s=function(){h.data=c=++c%2}}else if(r.setImmediate||typeof r.MessageChannel>"u")s="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var m=r.document.createElement("script");m.onreadystatechange=function(){n(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},r.document.documentElement.appendChild(m)}:function(){setTimeout(n,0)};else{var u=new r.MessageChannel;u.port1.onmessage=n,s=function(){u.port2.postMessage(0)}}var g,_=[];t.exports=function l(m){1!==_.push(m)||g||s()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,i){function r(){}function n(z){if("function"!=typeof z)throw new TypeError("resolver must be a function");this.state=X,this.queue=[],this.outcome=void 0,z!==r&&c(this,z)}function l(z,O,D){this.promise=z,"function"==typeof O&&(this.onFulfilled=O,this.callFulfilled=this.otherCallFulfilled),"function"==typeof D&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function s(z,O,D){m(function(){var M;try{M=O(D)}catch(B){return w.reject(z,B)}M===z?w.reject(z,new TypeError("Cannot resolve promise with itself")):w.resolve(z,M)})}function d(z){var O=z&&z.then;if(z&&"object"==typeof z&&"function"==typeof O)return function(){O.apply(z,arguments)}}function c(z,O){function D(Ue){W||(W=!0,w.reject(z,Ue))}function M(Ue){W||(W=!0,w.resolve(z,Ue))}var W=!1,Se=o(function B(){O(M,D)});"error"===Se.status&&D(Se.value)}function o(z,O){var D={};try{D.value=z(O),D.status="success"}catch(M){D.status="error",D.value=M}return D}var m=e(1),w={},A=["REJECTED"],j=["FULFILLED"],X=["PENDING"];t.exports=i=n,n.prototype.catch=function(z){return this.then(null,z)},n.prototype.then=function(z,O){if("function"!=typeof z&&this.state===j||"function"!=typeof O&&this.state===A)return this;var D=new this.constructor(r);return this.state!==X?s(D,this.state===j?z:O,this.outcome):this.queue.push(new l(D,z,O)),D},l.prototype.callFulfilled=function(z){w.resolve(this.promise,z)},l.prototype.otherCallFulfilled=function(z){s(this.promise,this.onFulfilled,z)},l.prototype.callRejected=function(z){w.reject(this.promise,z)},l.prototype.otherCallRejected=function(z){s(this.promise,this.onRejected,z)},w.resolve=function(z,O){var D=o(d,O);if("error"===D.status)return w.reject(z,D.value);var M=D.value;if(M)c(z,M);else{z.state=j,z.outcome=O;for(var B=-1,W=z.queue.length;++B<W;)z.queue[B].callFulfilled(O)}return z},w.reject=function(z,O){z.state=A,z.outcome=O;for(var D=-1,M=z.queue.length;++D<M;)z.queue[D].callRejected(O);return z},i.resolve=function h(z){return z instanceof this?z:w.resolve(new this(r),z)},i.reject=function u(z){var O=new this(r);return w.reject(O,z)},i.all=function g(z){function O(Ie,Ae){D.resolve(Ie).then(function q(J){W[Ae]=J,++Se!==M||B||(B=!0,w.resolve(ge,W))},function(J){B||(B=!0,w.reject(ge,J))})}var D=this;if("[object Array]"!==Object.prototype.toString.call(z))return this.reject(new TypeError("must be an array"));var M=z.length,B=!1;if(!M)return this.resolve([]);for(var W=new Array(M),Se=0,Ue=-1,ge=new this(r);++Ue<M;)O(z[Ue],Ue);return ge},i.race=function _(z){if("[object Array]"!==Object.prototype.toString.call(z))return this.reject(new TypeError("must be an array"));var M=z.length,B=!1;if(!M)return this.resolve([]);for(var W=-1,Se=new this(r);++W<M;)this.resolve(z[W]).then(function(ge){B||(B=!0,w.resolve(Se,ge))},function(ge){B||(B=!0,w.reject(Se,ge))});return Se}},{1:1}],3:[function(e,t,i){(function(r){"function"!=typeof r.Promise&&(r.Promise=e(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,i){function c(f,v){f=f||[],v=v||{};try{return new Blob(f,v)}catch(P){if("TypeError"!==P.name)throw P;for(var x=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),S=0;S<f.length;S+=1)x.append(f[S]);return x.getBlob(v.type)}}function o(f,v){v&&f.then(function(y){v(null,y)},function(y){v(y)})}function h(f,v,y){"function"==typeof v&&f.then(v),"function"==typeof y&&f.catch(y)}function A(f,v){return new Pe(function(y,x){if(f.db){if(!v)return y(f.db);(function m(f){var v=dt[f.name],y={};y.promise=new Pe(function(x){y.resolve=x}),v.deferredOperations.push(y),v.dbReady=v.dbReady?v.dbReady.then(function(){return y.promise}):y.promise})(f),f.db.close()}var S=[f.name];v&&S.push(f.version);var P=Nt.open.apply(Nt,S);v&&(P.onupgradeneeded=function(L){var U=P.result;try{U.createObjectStore(f.storeName),L.oldVersion<=1&&U.createObjectStore(rt)}catch(Y){if("ConstraintError"!==Y.name)throw Y;console.warn('The database "'+f.name+'" has been upgraded from version '+L.oldVersion+" to version "+L.newVersion+', but the storage "'+f.storeName+'" already exists.')}}),P.onerror=function(L){L.preventDefault(),x(P.error)},P.onsuccess=function(){y(P.result),function w(f){var y=dt[f.name].deferredOperations.pop();y&&y.resolve()}(f)}})}function D(f){var v=function u(f){for(var v=f.length,y=new ArrayBuffer(v),x=new Uint8Array(y),S=0;S<v;S++)x[S]=f.charCodeAt(S);return y}(atob(f.data));return c([v],{type:f.type})}function M(f){return f&&f.__local_forage_encoded_blob}function B(f){var v=this,y=v._initReady().then(function(){var x=dt[v._dbInfo.name];if(x&&x.dbReady)return x.dbReady});return h(y,f,f),y}function me(f){var v,y,x,S,P,L=.75*f.length,U=f.length,Y=0;"="===f[f.length-1]&&(L--,"="===f[f.length-2]&&L--);var E=new ArrayBuffer(L),T=new Uint8Array(E);for(v=0;v<U;v+=4)y=pt.indexOf(f[v]),x=pt.indexOf(f[v+1]),S=pt.indexOf(f[v+2]),P=pt.indexOf(f[v+3]),T[Y++]=y<<2|x>>4,T[Y++]=(15&x)<<4|S>>2,T[Y++]=(3&S)<<6|63&P;return E}function G(f){var v,y=new Uint8Array(f),x="";for(v=0;v<y.length;v+=3)x+=pt[y[v]>>2],x+=pt[(3&y[v])<<4|y[v+1]>>4],x+=pt[(15&y[v+1])<<2|y[v+2]>>6],x+=pt[63&y[v+2]];return y.length%3==2?x=x.substring(0,x.length-1)+"=":y.length%3==1&&(x=x.substring(0,x.length-2)+"=="),x}function Ne(f,v,y,x){var S=this;"string"!=typeof f&&(console.warn(f+" used as a key, but it is not a string."),f=String(f));var P=new Pe(function(L,U){S.ready().then(function(){void 0===v&&(v=null);var Y=v,E=S._dbInfo;E.serializer.serialize(v,function(T,N){N?U(N):E.db.transaction(function(Q){Q.executeSql("INSERT OR REPLACE INTO "+E.storeName+" (key, value) VALUES (?, ?)",[f,T],function(){L(Y)},function(se,re){U(re)})},function(Q){if(Q.code===Q.QUOTA_ERR){if(x>0)return void L(Ne.apply(S,[f,Y,y,x-1]));U(Q)}})})}).catch(U)});return o(P,y),P}function jt(f,v){f[v]=function(){var y=arguments;return f.ready().then(function(){return f[v].apply(f,y)})}}function Vt(){for(var f=1;f<arguments.length;f++){var v=arguments[f];if(v)for(var y in v)v.hasOwnProperty(y)&&(arguments[0][y]=Kt(v[y])?v[y].slice():v[y])}return arguments[0]}function $e(f){for(var v in He)if(He.hasOwnProperty(v)&&He[v]===f)return!0;return!1}var Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},Nt=function n(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{}}();typeof Promise>"u"&&e(3);var qe,dt,Pe=Promise,rt="local-forage-detect-blob-support",Ke=Object.prototype.toString,Pt={_driver:"asyncStorage",_initStorage:function W(f){function v(){return Pe.resolve()}var y=this,x={db:null};if(f)for(var S in f)x[S]=f[S];dt||(dt={});var P=dt[x.name];P||(dt[x.name]=P={forages:[],db:null,dbReady:null,deferredOperations:[]}),P.forages.push(y),y._initReady||(y._initReady=y.ready,y.ready=B);for(var L=[],U=0;U<P.forages.length;U++){var Y=P.forages[U];Y!==y&&L.push(Y._initReady().catch(v))}var E=P.forages.slice(0);return Pe.all(L).then(function(){return x.db=P.db,function j(f){return A(f,!1)}(x)}).then(function(T){return x.db=T,function z(f,v){if(!f.db)return!0;var y=!f.db.objectStoreNames.contains(f.storeName),S=f.version>f.db.version;if(f.version<f.db.version&&(f.version!==v&&console.warn('The database "'+f.name+"\" can't be downgraded from version "+f.db.version+" to version "+f.version+"."),f.version=f.db.version),S||y){if(y){var P=f.db.version+1;P>f.version&&(f.version=P)}return!0}return!1}(x,y._defaultConfig.version)?function X(f){return A(f,!0)}(x):T}).then(function(T){x.db=P.db=T,y._dbInfo=x;for(var N=0;N<E.length;N++){var Q=E[N];Q!==y&&(Q._dbInfo.db=x.db,Q._dbInfo.version=x.version)}})},iterate:function Ue(f,v){var y=this,x=new Pe(function(S,P){y.ready().then(function(){var L=y._dbInfo,Y=L.db.transaction(L.storeName,"readonly").objectStore(L.storeName).openCursor(),E=1;Y.onsuccess=function(){var T=Y.result;if(T){var N=T.value;M(N)&&(N=D(N));var Q=f(N,T.key,E++);void 0!==Q?S(Q):T.continue()}else S()},Y.onerror=function(){P(Y.error)}}).catch(P)});return o(x,v),x},getItem:function Se(f,v){var y=this;"string"!=typeof f&&(console.warn(f+" used as a key, but it is not a string."),f=String(f));var x=new Pe(function(S,P){y.ready().then(function(){var L=y._dbInfo,Y=L.db.transaction(L.storeName,"readonly").objectStore(L.storeName).get(f);Y.onsuccess=function(){var E=Y.result;void 0===E&&(E=null),M(E)&&(E=D(E)),S(E)},Y.onerror=function(){P(Y.error)}}).catch(P)});return o(x,v),x},setItem:function ge(f,v,y){var x=this;"string"!=typeof f&&(console.warn(f+" used as a key, but it is not a string."),f=String(f));var S=new Pe(function(P,L){var U;x.ready().then(function(){return U=x._dbInfo,"[object Blob]"===Ke.call(v)?function _(f){return"boolean"==typeof qe?Pe.resolve(qe):function g(f){return new Pe(function(v){var y=f.transaction(rt,"readwrite"),x=c([""]);y.objectStore(rt).put(x,"key"),y.onabort=function(S){S.preventDefault(),S.stopPropagation(),v(!1)},y.oncomplete=function(){var S=navigator.userAgent.match(/Chrome\/(\d+)/),P=navigator.userAgent.match(/Edge\//);v(P||!S||parseInt(S[1],10)>=43)}}).catch(function(){return!1})}(f).then(function(v){return qe=v})}(U.db).then(function(Y){return Y?v:function O(f){return new Pe(function(v,y){var x=new FileReader;x.onerror=y,x.onloadend=function(S){var P=btoa(S.target.result||"");v({__local_forage_encoded_blob:!0,data:P,type:f.type})},x.readAsBinaryString(f)})}(v)}):v}).then(function(Y){var E=U.db.transaction(U.storeName,"readwrite"),N=E.objectStore(U.storeName).put(Y,f);null===Y&&(Y=void 0),E.oncomplete=function(){void 0===Y&&(Y=null),P(Y)},E.onabort=E.onerror=function(){L(N.error?N.error:N.transaction.error)}}).catch(L)});return o(S,y),S},removeItem:function Ie(f,v){var y=this;"string"!=typeof f&&(console.warn(f+" used as a key, but it is not a string."),f=String(f));var x=new Pe(function(S,P){y.ready().then(function(){var L=y._dbInfo,U=L.db.transaction(L.storeName,"readwrite"),E=U.objectStore(L.storeName).delete(f);U.oncomplete=function(){S()},U.onerror=function(){P(E.error)},U.onabort=function(){P(E.error?E.error:E.transaction.error)}}).catch(P)});return o(x,v),x},clear:function Ae(f){var v=this,y=new Pe(function(x,S){v.ready().then(function(){var P=v._dbInfo,L=P.db.transaction(P.storeName,"readwrite"),Y=L.objectStore(P.storeName).clear();L.oncomplete=function(){x()},L.onabort=L.onerror=function(){S(Y.error?Y.error:Y.transaction.error)}}).catch(S)});return o(y,f),y},length:function q(f){var v=this,y=new Pe(function(x,S){v.ready().then(function(){var P=v._dbInfo,U=P.db.transaction(P.storeName,"readonly").objectStore(P.storeName).count();U.onsuccess=function(){x(U.result)},U.onerror=function(){S(U.error)}}).catch(S)});return o(y,f),y},key:function J(f,v){var y=this,x=new Pe(function(S,P){return f<0?void S(null):void y.ready().then(function(){var L=y._dbInfo,U=L.db.transaction(L.storeName,"readonly").objectStore(L.storeName),Y=!1,E=U.openCursor();E.onsuccess=function(){var T=E.result;return T?void(0===f||Y?S(T.key):(Y=!0,T.advance(f))):void S(null)},E.onerror=function(){P(E.error)}}).catch(P)});return o(x,v),x},keys:function ae(f){var v=this,y=new Pe(function(x,S){v.ready().then(function(){var P=v._dbInfo,U=P.db.transaction(P.storeName,"readonly").objectStore(P.storeName).openCursor(),Y=[];U.onsuccess=function(){var E=U.result;return E?(Y.push(E.key),void E.continue()):void x(Y)},U.onerror=function(){S(U.error)}}).catch(S)});return o(y,f),y}},pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dt=/^~~local_forage_type~([^~]+)~/,R="__lfsc__:",de="arbf",H="blob",C="ui08",p="si32",F="fl32",V="fl64",Oe=Object.prototype.toString,ye={serialize:function Be(f,v){var y="";if(f&&(y=Oe.call(f)),f&&("[object ArrayBuffer]"===y||f.buffer&&"[object ArrayBuffer]"===Oe.call(f.buffer))){var x,S=R;f instanceof ArrayBuffer?(x=f,S+=de):(x=f.buffer,"[object Int8Array]"===y?S+="si08":"[object Uint8Array]"===y?S+=C:"[object Uint8ClampedArray]"===y?S+="uic8":"[object Int16Array]"===y?S+="si16":"[object Uint16Array]"===y?S+="ur16":"[object Int32Array]"===y?S+=p:"[object Uint32Array]"===y?S+="ui32":"[object Float32Array]"===y?S+=F:"[object Float64Array]"===y?S+=V:v(new Error("Failed to get type for BinaryArray"))),v(S+G(x))}else if("[object Blob]"===y){var P=new FileReader;P.onload=function(){var L="~~local_forage_type~"+f.type+"~"+G(this.result);v(R+H+L)},P.readAsArrayBuffer(f)}else try{v(JSON.stringify(f))}catch(L){console.error("Couldn't convert value into a JSON string: ",f),v(null,L)}},deserialize:function We(f){if(f.substring(0,9)!==R)return JSON.parse(f);var v,y=f.substring(13),x=f.substring(9,13);if(x===H&&Dt.test(y)){var S=y.match(Dt);v=S[1],y=y.substring(S[0].length)}var P=me(y);switch(x){case de:return P;case H:return c([P],{type:v});case"si08":return new Int8Array(P);case C:return new Uint8Array(P);case"uic8":return new Uint8ClampedArray(P);case"si16":return new Int16Array(P);case"ur16":return new Uint16Array(P);case p:return new Int32Array(P);case"ui32":return new Uint32Array(P);case F:return new Float32Array(P);case V:return new Float64Array(P);default:throw new Error("Unkown type: "+x)}},stringToBuffer:me,bufferToString:G},De={_driver:"webSQLStorage",_initStorage:function Xe(f){var v=this,y={db:null};if(f)for(var x in f)y[x]="string"!=typeof f[x]?f[x].toString():f[x];var S=new Pe(function(P,L){try{y.db=openDatabase(y.name,String(y.version),y.description,y.size)}catch(U){return L(U)}y.db.transaction(function(U){U.executeSql("CREATE TABLE IF NOT EXISTS "+y.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){v._dbInfo=y,P()},function(Y,E){L(E)})})});return y.serializer=ye,S},iterate:function Ze(f,v){var y=this,x=new Pe(function(S,P){y.ready().then(function(){var L=y._dbInfo;L.db.transaction(function(U){U.executeSql("SELECT * FROM "+L.storeName,[],function(Y,E){for(var T=E.rows,N=T.length,Q=0;Q<N;Q++){var se=T.item(Q),re=se.value;if(re&&(re=L.serializer.deserialize(re)),void 0!==(re=f(re,se.key,Q+1)))return void S(re)}S()},function(Y,E){P(E)})})}).catch(P)});return o(x,v),x},getItem:function Fe(f,v){var y=this;"string"!=typeof f&&(console.warn(f+" used as a key, but it is not a string."),f=String(f));var x=new Pe(function(S,P){y.ready().then(function(){var L=y._dbInfo;L.db.transaction(function(U){U.executeSql("SELECT * FROM "+L.storeName+" WHERE key = ? LIMIT 1",[f],function(Y,E){var T=E.rows.length?E.rows.item(0).value:null;T&&(T=L.serializer.deserialize(T)),S(T)},function(Y,E){P(E)})})}).catch(P)});return o(x,v),x},setItem:function be(f,v,y){return Ne.apply(this,[f,v,y,1])},removeItem:function Z(f,v){var y=this;"string"!=typeof f&&(console.warn(f+" used as a key, but it is not a string."),f=String(f));var x=new Pe(function(S,P){y.ready().then(function(){var L=y._dbInfo;L.db.transaction(function(U){U.executeSql("DELETE FROM "+L.storeName+" WHERE key = ?",[f],function(){S()},function(Y,E){P(E)})})}).catch(P)});return o(x,v),x},clear:function he(f){var v=this,y=new Pe(function(x,S){v.ready().then(function(){var P=v._dbInfo;P.db.transaction(function(L){L.executeSql("DELETE FROM "+P.storeName,[],function(){x()},function(U,Y){S(Y)})})}).catch(S)});return o(y,f),y},length:function ve(f){var v=this,y=new Pe(function(x,S){v.ready().then(function(){var P=v._dbInfo;P.db.transaction(function(L){L.executeSql("SELECT COUNT(key) as c FROM "+P.storeName,[],function(U,Y){var E=Y.rows.item(0).c;x(E)},function(U,Y){S(Y)})})}).catch(S)});return o(y,f),y},key:function we(f,v){var y=this,x=new Pe(function(S,P){y.ready().then(function(){var L=y._dbInfo;L.db.transaction(function(U){U.executeSql("SELECT key FROM "+L.storeName+" WHERE id = ? LIMIT 1",[f+1],function(Y,E){var T=E.rows.length?E.rows.item(0).key:null;S(T)},function(Y,E){P(E)})})}).catch(P)});return o(x,v),x},keys:function Te(f){var v=this,y=new Pe(function(x,S){v.ready().then(function(){var P=v._dbInfo;P.db.transaction(function(L){L.executeSql("SELECT key FROM "+P.storeName,[],function(U,Y){for(var E=[],T=0;T<Y.rows.length;T++)E.push(Y.rows.item(T).key);x(E)},function(U,Y){S(Y)})})}).catch(S)});return o(y,f),y}},ot={_driver:"localStorageWrapper",_initStorage:function ke(f){var y={};if(f)for(var x in f)y[x]=f[x];return y.keyPrefix=y.name+"/",y.storeName!==this._defaultConfig.storeName&&(y.keyPrefix+=y.storeName+"/"),this._dbInfo=y,y.serializer=ye,Pe.resolve()},iterate:function Ee(f,v){var y=this,x=y.ready().then(function(){for(var S=y._dbInfo,P=S.keyPrefix,L=P.length,U=localStorage.length,Y=1,E=0;E<U;E++){var T=localStorage.key(E);if(0===T.indexOf(P)){var N=localStorage.getItem(T);if(N&&(N=S.serializer.deserialize(N)),void 0!==(N=f(N,T.substring(L),Y++)))return N}}});return o(x,v),x},getItem:function _e(f,v){var y=this;"string"!=typeof f&&(console.warn(f+" used as a key, but it is not a string."),f=String(f));var x=y.ready().then(function(){var S=y._dbInfo,P=localStorage.getItem(S.keyPrefix+f);return P&&(P=S.serializer.deserialize(P)),P});return o(x,v),x},setItem:function yt(f,v,y){var x=this;"string"!=typeof f&&(console.warn(f+" used as a key, but it is not a string."),f=String(f));var S=x.ready().then(function(){void 0===v&&(v=null);var P=v;return new Pe(function(L,U){var Y=x._dbInfo;Y.serializer.serialize(v,function(E,T){if(T)U(T);else try{localStorage.setItem(Y.keyPrefix+f,E),L(P)}catch(N){"QuotaExceededError"!==N.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==N.name||U(N),U(N)}})})});return o(S,y),S},removeItem:function Bt(f,v){var y=this;"string"!=typeof f&&(console.warn(f+" used as a key, but it is not a string."),f=String(f));var x=y.ready().then(function(){localStorage.removeItem(y._dbInfo.keyPrefix+f)});return o(x,v),x},clear:function Qe(f){var v=this,y=v.ready().then(function(){for(var x=v._dbInfo.keyPrefix,S=localStorage.length-1;S>=0;S--){var P=localStorage.key(S);0===P.indexOf(x)&&localStorage.removeItem(P)}});return o(y,f),y},length:function Ht(f){var y=this.keys().then(function(x){return x.length});return o(y,f),y},key:function It(f,v){var y=this,x=y.ready().then(function(){var S,P=y._dbInfo;try{S=localStorage.key(f)}catch{S=null}return S&&(S=S.substring(P.keyPrefix.length)),S});return o(x,v),x},keys:function mt(f){var v=this,y=v.ready().then(function(){for(var x=v._dbInfo,S=localStorage.length,P=[],L=0;L<S;L++)0===localStorage.key(L).indexOf(x.keyPrefix)&&P.push(localStorage.key(L).substring(x.keyPrefix.length));return P});return o(y,f),y}},Xt={},He={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},ct=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],gt={description:"",driver:[He.INDEXEDDB,He.WEBSQL,He.LOCALSTORAGE].slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Ut={};Ut[He.INDEXEDDB]=function l(){try{if(!Nt)return!1;var f=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),v="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!f||v)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),Ut[He.WEBSQL]=function s(){return"function"==typeof openDatabase}(),Ut[He.LOCALSTORAGE]=function d(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&localStorage.setItem}catch{return!1}}();var Kt=Array.isArray||function(f){return"[object Array]"===Object.prototype.toString.call(f)},ut=new(function(){function f(v){(function r(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")})(this,f),this.INDEXEDDB=He.INDEXEDDB,this.LOCALSTORAGE=He.LOCALSTORAGE,this.WEBSQL=He.WEBSQL,this._defaultConfig=Vt({},gt),this._config=Vt({},this._defaultConfig,v),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return f.prototype.config=function(v){if("object"===(typeof v>"u"?"undefined":Ye(v))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var y in v){if("storeName"===y&&(v[y]=v[y].replace(/\W/g,"_")),"version"===y&&"number"!=typeof v[y])return new Error("Database version must be a number.");this._config[y]=v[y]}return!("driver"in v&&v.driver)||this.setDriver(this._config.driver)}return"string"==typeof v?this._config[v]:this._config},f.prototype.defineDriver=function(v,y,x){var S=new Pe(function(P,L){try{var U=v._driver,Y=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),E=new Error("Custom driver name already in use: "+v._driver);if(!v._driver)return void L(Y);if($e(v._driver))return void L(E);for(var T=ct.concat("_initStorage"),N=0;N<T.length;N++){var Q=T[N];if(!Q||!v[Q]||"function"!=typeof v[Q])return void L(Y)}var se=Pe.resolve(!0);"_support"in v&&(se=v._support&&"function"==typeof v._support?v._support():Pe.resolve(!!v._support)),se.then(function(re){Ut[U]=re,Xt[U]=v,P()},L)}catch(re){L(re)}});return h(S,y,x),S},f.prototype.driver=function(){return this._driver||null},f.prototype.getDriver=function(v,y,x){var S=this,P=Pe.resolve().then(function(){if(!$e(v)){if(Xt[v])return Xt[v];throw new Error("Driver not found.")}switch(v){case S.INDEXEDDB:return Pt;case S.LOCALSTORAGE:return ot;case S.WEBSQL:return De}});return h(P,y,x),P},f.prototype.getSerializer=function(v){var y=Pe.resolve(ye);return h(y,v),y},f.prototype.ready=function(v){var y=this,x=y._driverSet.then(function(){return null===y._ready&&(y._ready=y._initDriver()),y._ready});return h(x,v,v),x},f.prototype.setDriver=function(v,y,x){function S(){U._config.driver=U.driver()}function P(T){return U._extend(T),S(),U._ready=U._initStorage(U._config),U._ready}var U=this;Kt(v)||(v=[v]);var Y=this._getSupportedDrivers(v),E=null!==this._driverSet?this._driverSet.catch(function(){return Pe.resolve()}):Pe.resolve();return this._driverSet=E.then(function(){var T=Y[0];return U._dbInfo=null,U._ready=null,U.getDriver(T).then(function(N){U._driver=N._driver,S(),U._wrapLibraryMethodsWithReady(),U._initDriver=function L(T){return function(){var Q=0;return function N(){for(;Q<T.length;){var se=T[Q];return Q++,U._dbInfo=null,U._ready=null,U.getDriver(se).then(P).catch(N)}S();var re=new Error("No available storage method found.");return U._driverSet=Pe.reject(re),U._driverSet}()}}(Y)})}).catch(function(){S();var T=new Error("No available storage method found.");return U._driverSet=Pe.reject(T),U._driverSet}),h(this._driverSet,y,x),this._driverSet},f.prototype.supports=function(v){return!!Ut[v]},f.prototype._extend=function(v){Vt(this,v)},f.prototype._getSupportedDrivers=function(v){for(var y=[],x=0,S=v.length;x<S;x++){var P=v[x];this.supports(P)&&y.push(P)}return y},f.prototype._wrapLibraryMethodsWithReady=function(){for(var v=0;v<ct.length;v++)jt(this,ct[v])},f.prototype.createInstance=function(v){return new f(v)},f}());t.exports=ut},{3:3}]},{},[4])(4)}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){var i=0,r=Array.prototype.slice,n=e.cleanData;e.cleanData=function(l){for(var d,s=0;null!=(d=l[s]);s++)try{e(d).triggerHandler("remove")}catch{}n(l)},e.widget=function(l,s,d){var c,o,h,u,g={},_=l.split(".")[0];l=l.split(".")[1],d||(d=s,s=e.Widget),e.expr[":"][(c=_+"-"+l).toLowerCase()]=function(m){return!!e.data(m,c)},e[_]=e[_]||{},o=e[_][l],h=e[_][l]=function(m,w){if(!this._createWidget)return new h(m,w);arguments.length&&this._createWidget(m,w)},e.extend(h,o,{version:d.version,_proto:e.extend({},d),_childConstructors:[]}),(u=new s).options=e.widget.extend({},u.options),e.each(d,function(m,w){g[m]=e.isFunction(w)?function(){var A=function(){return s.prototype[m].apply(this,arguments)},j=function(X){return s.prototype[m].apply(this,X)};return function(){var O,X=this._super,z=this._superApply;return this._super=A,this._superApply=j,O=w.apply(this,arguments),this._super=X,this._superApply=z,O}}():w}),h.prototype=e.widget.extend(u,{widgetEventPrefix:o&&u.widgetEventPrefix||l},g,{constructor:h,namespace:_,widgetName:l,widgetFullName:c}),o?(e.each(o._childConstructors,function(m,w){var A=w.prototype;e.widget(A.namespace+"."+A.widgetName,h,w._proto)}),delete o._childConstructors):s._childConstructors.push(h),e.widget.bridge(l,h)},e.widget.extend=function(l){for(var o,h,s=r.call(arguments,1),d=0,c=s.length;d<c;d++)for(o in s[d])h=s[d][o],s[d].hasOwnProperty(o)&&h!==t&&(l[o]=e.isPlainObject(h)?e.isPlainObject(l[o])?e.widget.extend({},l[o],h):e.widget.extend({},h):h);return l},e.widget.bridge=function(l,s){var d=s.prototype.widgetFullName||l;e.fn[l]=function(c){var o="string"==typeof c,h=r.call(arguments,1),u=this;return c=!o&&h.length?e.widget.extend.apply(null,[c].concat(h)):c,this.each(o?function(){var g,_=e.data(this,d);return _?e.isFunction(_[c])&&"_"!==c.charAt(0)?(g=_[c].apply(_,h))!==_&&g!==t?(u=g&&g.jquery?u.pushStack(g.get()):g,!1):void 0:e.error("no such method '"+c+"' for "+l+" widget instance"):e.error("cannot call methods on "+l+" prior to initialization; attempted to call method '"+c+"'")}:function(){var g=e.data(this,d);g?g.option(c||{})._init():e.data(this,d,new s(c,this))}),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(l,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),l),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(d){d.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(l,s){var c,o,h,d=l;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof l)if(d={},c=l.split("."),l=c.shift(),c.length){for(o=d[l]=e.widget.extend({},this.options[l]),h=0;h<c.length-1;h++)o[c[h]]=o[c[h]]||{},o=o[c[h]];if(l=c.pop(),1===arguments.length)return o[l]===t?null:o[l];o[l]=s}else{if(1===arguments.length)return this.options[l]===t?null:this.options[l];d[l]=s}return this._setOptions(d),this},_setOptions:function(l){var s;for(s in l)this._setOption(s,l[s]);return this},_setOption:function(l,s){return this.options[l]=s,"disabled"===l&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!s).attr("aria-disabled",s),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(l,s,d){var c,o=this;"boolean"!=typeof l&&(d=s,s=l,l=!1),d?(s=c=e(s),this.bindings=this.bindings.add(s)):(d=s,s=this.element,c=this.widget()),e.each(d,function(h,u){function g(){if(l||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof u?o[u]:u).apply(o,arguments)}"string"!=typeof u&&(g.guid=u.guid=u.guid||g.guid||e.guid++);var _=h.match(/^(\w+)\s*(.*)$/),m=_[1]+o.eventNamespace,w=_[2];w?c.delegate(w,m,g):s.bind(m,g)})},_off:function(l,s){s=(s||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,l.unbind(s).undelegate(s)},_delay:function(l,s){var c=this;return setTimeout(function d(){return("string"==typeof l?c[l]:l).apply(c,arguments)},s||0)},_hoverable:function(l){this.hoverable=this.hoverable.add(l),this._on(l,{mouseenter:function(s){e(s.currentTarget).addClass("ui-state-hover")},mouseleave:function(s){e(s.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(l){this.focusable=this.focusable.add(l),this._on(l,{focusin:function(s){e(s.currentTarget).addClass("ui-state-focus")},focusout:function(s){e(s.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(l,s,d){var c,o,h=this.options[l];if(d=d||{},(s=e.Event(s)).type=(l===this.widgetEventPrefix?l:this.widgetEventPrefix+l).toLowerCase(),s.target=this.element[0],o=s.originalEvent)for(c in o)c in s||(s[c]=o[c]);return this.element.trigger(s,d),!(e.isFunction(h)&&!1===h.apply(this.element[0],[s].concat(d))||s.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(l,s){e.Widget.prototype["_"+l]=function(d,c,o){"string"==typeof c&&(c={effect:c});var h,u=c?!0===c||"number"==typeof c?s:c.effect||s:l;"number"==typeof(c=c||{})&&(c={duration:c}),h=!e.isEmptyObject(c),c.complete=o,c.delay&&d.delay(c.delay),h&&e.effects&&e.effects.effect[u]?d[l](c):u!==l&&d[u]?d[u](c.duration,c.easing,o):d.queue(function(g){e(this)[l](),o&&o.call(d[0]),g()})}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,l,s,r=i.initialIframeSrc||"javascript:false;";return{send:function(d,c){(n=e('<form style="display:none;"></form>')).attr("accept-charset",i.formAcceptCharset),s=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+s+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+s+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+s+"_method=PATCH",i.type="POST"),l=e('<iframe src="'+r+'" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var o,h=e.isArray(i.paramName)?i.paramName:[i.paramName];l.unbind("load").bind("load",function(){var u;try{if(!(u=l.contents()).length||!u[0].firstChild)throw new Error}catch{u=void 0}c(200,"success",{iframe:u}),e('<iframe src="'+r+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",l.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(u,g){e('<input type="hidden"/>').prop("name",g.name).val(g.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(o=i.fileInput.clone(),i.fileInput.after(function(u){return o[u]}),i.paramName&&i.fileInput.each(function(u){e(this).prop("name",h[u]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),o&&o.length&&i.fileInput.each(function(u,g){var _=e(o[u]);e(g).prop("name",_.prop("name")).attr("form",_.attr("form")),_.replaceWith(g)})}),n.append(l).appendTo(document.body)},abort:function(){l&&l.unbind("load").prop("src",r),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(i){return i&&e(i[0].body).text()},"iframe json":function(i){return i&&e.parseJSON(e(i[0].body).text())},"iframe html":function(i){return i&&e(i[0].body).html()},"iframe xml":function(i){var r=i&&i[0];return r&&e.isXMLDoc(r)?r:e.parseXML(r.XMLDocument&&r.XMLDocument.xml||e(r.body).html())},"iframe script":function(i){return i&&e.globalEval(e(i[0].body).text())}}})});var MD5=function(e){function t(be,Z){return be<<Z|be>>>32-Z}function i(be,Z){var he,ve,we,Te,ke;return we=2147483648&be,Te=2147483648&Z,ke=(1073741823&be)+(1073741823&Z),(he=1073741824&be)&(ve=1073741824&Z)?2147483648^ke^we^Te:he|ve?1073741824&ke?3221225472^ke^we^Te:1073741824^ke^we^Te:ke^we^Te}function d(be,Z,he,ve,we,Te,ke){return be=i(be,i(i(function r(be,Z,he){return be&Z|~be&he}(Z,he,ve),we),ke)),i(t(be,Te),Z)}function c(be,Z,he,ve,we,Te,ke){return be=i(be,i(i(function n(be,Z,he){return be&he|Z&~he}(Z,he,ve),we),ke)),i(t(be,Te),Z)}function o(be,Z,he,ve,we,Te,ke){return be=i(be,i(i(function l(be,Z,he){return be^Z^he}(Z,he,ve),we),ke)),i(t(be,Te),Z)}function h(be,Z,he,ve,we,Te,ke){return be=i(be,i(i(function s(be,Z,he){return Z^(be|~he)}(Z,he,ve),we),ke)),i(t(be,Te),Z)}function g(be){var we,Z="",he="";for(we=0;we<=3;we++)Z+=(he="0"+(be>>>8*we&255).toString(16)).substr(he.length-2,2);return Z}var m,w,A,j,X,z,O,D,M,B;for(m=function u(be){for(var Z,he=be.length,ve=he+8,Te=16*((ve-ve%64)/64+1),ke=Array(Te-1),Qe=0,_e=0;_e<he;)Qe=_e%4*8,ke[Z=(_e-_e%4)/4]=ke[Z]|be.charCodeAt(_e)<<Qe,_e++;return ke[Z=(_e-_e%4)/4]=ke[Z]|128<<(Qe=_e%4*8),ke[Te-2]=he<<3,ke[Te-1]=he>>>29,ke}(e=function _(be){be=be.replace(/\r\n/g,"\n");for(var Z="",he=0;he<be.length;he++){var ve=be.charCodeAt(he);ve<128?Z+=String.fromCharCode(ve):ve>127&&ve<2048?(Z+=String.fromCharCode(ve>>6|192),Z+=String.fromCharCode(63&ve|128)):(Z+=String.fromCharCode(ve>>12|224),Z+=String.fromCharCode(ve>>6&63|128),Z+=String.fromCharCode(63&ve|128))}return Z}(e)),O=1732584193,D=4023233417,M=2562383102,B=271733878,w=0;w<m.length;w+=16)A=O,j=D,X=M,z=B,O=d(O,D,M,B,m[w+0],7,3614090360),B=d(B,O,D,M,m[w+1],12,3905402710),M=d(M,B,O,D,m[w+2],17,606105819),D=d(D,M,B,O,m[w+3],22,3250441966),O=d(O,D,M,B,m[w+4],7,4118548399),B=d(B,O,D,M,m[w+5],12,1200080426),M=d(M,B,O,D,m[w+6],17,2821735955),D=d(D,M,B,O,m[w+7],22,4249261313),O=d(O,D,M,B,m[w+8],7,1770035416),B=d(B,O,D,M,m[w+9],12,2336552879),M=d(M,B,O,D,m[w+10],17,4294925233),D=d(D,M,B,O,m[w+11],22,2304563134),O=d(O,D,M,B,m[w+12],7,1804603682),B=d(B,O,D,M,m[w+13],12,4254626195),M=d(M,B,O,D,m[w+14],17,2792965006),O=c(O,D=d(D,M,B,O,m[w+15],22,1236535329),M,B,m[w+1],5,4129170786),B=c(B,O,D,M,m[w+6],9,3225465664),M=c(M,B,O,D,m[w+11],14,643717713),D=c(D,M,B,O,m[w+0],20,3921069994),O=c(O,D,M,B,m[w+5],5,3593408605),B=c(B,O,D,M,m[w+10],9,38016083),M=c(M,B,O,D,m[w+15],14,3634488961),D=c(D,M,B,O,m[w+4],20,3889429448),O=c(O,D,M,B,m[w+9],5,568446438),B=c(B,O,D,M,m[w+14],9,3275163606),M=c(M,B,O,D,m[w+3],14,4107603335),D=c(D,M,B,O,m[w+8],20,1163531501),O=c(O,D,M,B,m[w+13],5,2850285829),B=c(B,O,D,M,m[w+2],9,4243563512),M=c(M,B,O,D,m[w+7],14,1735328473),O=o(O,D=c(D,M,B,O,m[w+12],20,2368359562),M,B,m[w+5],4,4294588738),B=o(B,O,D,M,m[w+8],11,2272392833),M=o(M,B,O,D,m[w+11],16,1839030562),D=o(D,M,B,O,m[w+14],23,4259657740),O=o(O,D,M,B,m[w+1],4,2763975236),B=o(B,O,D,M,m[w+4],11,1272893353),M=o(M,B,O,D,m[w+7],16,4139469664),D=o(D,M,B,O,m[w+10],23,3200236656),O=o(O,D,M,B,m[w+13],4,681279174),B=o(B,O,D,M,m[w+0],11,3936430074),M=o(M,B,O,D,m[w+3],16,3572445317),D=o(D,M,B,O,m[w+6],23,76029189),O=o(O,D,M,B,m[w+9],4,3654602809),B=o(B,O,D,M,m[w+12],11,3873151461),M=o(M,B,O,D,m[w+15],16,530742520),O=h(O,D=o(D,M,B,O,m[w+2],23,3299628645),M,B,m[w+0],6,4096336452),B=h(B,O,D,M,m[w+7],10,1126891415),M=h(M,B,O,D,m[w+14],15,2878612391),D=h(D,M,B,O,m[w+5],21,4237533241),O=h(O,D,M,B,m[w+12],6,1700485571),B=h(B,O,D,M,m[w+3],10,2399980690),M=h(M,B,O,D,m[w+10],15,4293915773),D=h(D,M,B,O,m[w+1],21,2240044497),O=h(O,D,M,B,m[w+8],6,1873313359),B=h(B,O,D,M,m[w+15],10,4264355552),M=h(M,B,O,D,m[w+6],15,2734768916),D=h(D,M,B,O,m[w+13],21,1309151649),O=h(O,D,M,B,m[w+4],6,4149444226),B=h(B,O,D,M,m[w+11],10,3174756917),M=h(M,B,O,D,m[w+2],15,718787259),D=h(D,M,B,O,m[w+9],21,3951481745),O=i(O,A),D=i(D,j),M=i(M,X),B=i(B,z);return(g(O)+g(D)+g(M)+g(B)).toLowerCase()};function webtoolkit(){}function fileup(){var e;e=function(e){e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,dynamicChunkSizeInitialChunkSize:1e6,currentUploadChunkSizeInitialSize:1e6,lastChunkUploadChunkSize:void 0,startTime:void 0,dynamicChunkSizeThreshold:void 0,dynamixChunkSizeMaxTime:30,dynamixChunkSizeTimeStep:10,getDynamicChunkSize:function(t,i){if(i.dynamicChunkSizeThreshold){var r=Date.now?Date.now():(new Date).getTime(),l=1e3*i.maxUploadTime/(r-i.startTime)*i.currentChunkSize;return l>i.dynamicChunkSizeThreshold&&(l=i.dynamicChunkSizeThreshold),Math.round(l)}return i.maxChunkSize},getDynamicUploadMaxTime:function(t,i){var r=i.maxUploadTime+i.dynamixChunkSizeTimeStep;return r>i.dynamixChunkSizeMaxTime&&(r=i.dynamixChunkSizeMaxTime),r},uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,ignoreChunkHeader:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(r,n){t=t.replace("{"+r+"}",n)}),t},formData:function(t){return t.serializeArray()},add:function(t,i){if(t.isDefaultPrevented())return!1;(i.autoUpload||!1!==i.autoUpload&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_cutDynamicUploadMaxChunkSize:function(t){if(this.options.dynamicChunkSizeThreshold&&(this.options.currentUploadChunkSizeInitialSize=this.options.lastChunkUploadChunkSize,this.options.dynamicChunkSizeThreshold=Math.round(2*t/3),this.options.currentUploadChunkSizeInitialSize>this.options.dynamicChunkSizeThreshold)){var i=this.options.currentUploadChunkSizeInitialSize;this.options.currentUploadChunkSizeInitialSize=this.options.dynamicChunkSizeThreshold,this.options.dynamicChunkSizeThreshold=i}},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,i,r){var n=t-this.timestamp;return(!this.bitrate||!r||n>r)&&(this.bitrate=1e3/n*(i-this.loaded)*8,this.loaded=i,this.timestamp=t),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(r,n){i.push({name:r,value:n})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(r,n){i+=n.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(t){var i;if(t._response)for(i in t._response)t._response.hasOwnProperty(i)&&delete t._response[i];else t._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,r=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&r-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=r,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(r,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(n){var l=n.originalEvent;n.lengthComputable=l.lengthComputable,n.loaded=l.loaded,n.total=l.total,i._onProgress(n,t)}),t.xhr=function(){return r})},_isInstanceOf:function(t,i){return Object.prototype.toString.call(i)==="[object "+t+"]"},_initXHRData:function(t){var r,i=this,n=t.files[0],l=t.multipart||!e.support.xhrFileUpload,s="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&!t.ignoreChunkHeader&&(t.headers["Content-Range"]=t.contentRange),(!l||t.blob||!this._isInstanceOf("File",n))&&!t.ignoreChunkHeader&&(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),l?e.support.xhrFormDataFileUpload&&(t.postMessage?(r=this._getFormData(t),t.blob?r.push({name:s,value:t.blob}):e.each(t.files,function(d,c){r.push({name:"array"===e.type(t.paramName)&&t.paramName[d]||s,value:c})})):(i._isInstanceOf("FormData",t.formData)?r=t.formData:(r=new FormData,e.each(this._getFormData(t),function(d,c){r.append(c.name,c.value)})),t.blob?(t.ignoreChunkHeader||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),r.append(s,t.blob,n.name)):e.each(t.files,function(d,c){(i._isInstanceOf("File",c)||i._isInstanceOf("Blob",c))&&r.append("array"===e.type(t.paramName)&&t.paramName[d]||s,c,c.uploadName||c.name)})),t.data=r):(t.contentType=n.type||"application/octet-stream",t.data=t.blob||n),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(t){var i=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],i.each(function(){for(var n=e(this),l=n.prop("name")||"files[]",s=(n.prop("files")||[1]).length;s;)r.push(l),s-=1}),r.length||(r=[i.prop("name")||"files[]"])),r},_initFormSettings:function(t){(!t.form||!t.form.length)&&(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(t,i,r){var n=e.Deferred(),l=n.promise();return i=i||this.options.context||l,!0===t?n.resolveWith(i,r):!1===t&&n.rejectWith(i,r),l.abort=n.promise,this._enhancePromise(l)},_addConvenienceMethods:function(t,i){var r=this,n=function(l){return e.Deferred().resolveWith(r,l).promise()};i.process=function(l,s){return(l||s)&&(i._processQueue=this._processQueue=(this._processQueue||n([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(r,[i]).promise():n(arguments)}).pipe(l,s)),this._processQueue||n([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==r._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))},i.state=function(){return this.jqXHR?r._getDeferredState(this.jqXHR):this._processQueue?r._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===r._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(t){var i=t.getResponseHeader("Range"),r=i&&i.split("-"),n=r&&r.length>1&&parseInt(r[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var g,_,r=this,n=t.files[0],l=n.size,s=t.uploadedBytes,d=t.maxChunkSize||l,c=t.dynamixChunkSizeTimeStep,o=this._blobSlice,h=e.Deferred(),u=h.promise();return!(!(this._isXHRUpload(t)&&o&&(s||d<l))||t.data)&&(!!i||(s>=l?(n.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",n.error])):(t.dynamicChunkSizeThreshold&&(d=t.currentUploadChunkSizeInitialSize),_=function(){var m=e.extend({},t),w=m._progress.loaded;m.blob=o.call(n,s,s+d,n.type),m.chunkSize=m.blob.size,m.maxChunkSize=d,m.currentChunkSize=d,m.maxUploadTime=c,m.contentRange="bytes "+s+"-"+(s+m.chunkSize-1)+"/"+l,r._trigger("chunkbefore",null,m),r._initXHRData(m),r._initProgressListener(m),m.startTime=Date.now(),g=(!1!==r._trigger("chunksend",null,m)&&e.ajax(m)||r._getXHRPromise(!1,m.context)).done(function(j,X,z){if(r._verifyResult(j))if(s=r._getUploadedBytes(z)||s+m.chunkSize,w+m.chunkSize-m._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s-m.uploadedBytes,total:s-m.uploadedBytes}),m),t.uploadedBytes=m.uploadedBytes=s,m.result=j,m.textStatus=X,m.jqXHR=z,r._trigger("chunkdone",null,m),r._trigger("chunkalways",null,m),s<l){if(t.dynamicChunkSizeThreshold){r.options.lastChunkUploadChunkSize=d;var O=t.getDynamicChunkSize(null,m);d=O||d,c=t.getDynamicUploadMaxTime(null,m)}_()}else h.resolveWith(m.context,[j,X,z]);else A(z,j,j.message)}).fail(function(j,X,z){r._cutDynamicUploadMaxChunkSize(d),m.jqXHR=j,m.textStatus=X,m.errorThrown=z,r._trigger("chunkfail",null,m),r._trigger("chunkalways",null,m),h.rejectWith(m.context,[j,X,z])});var A=function(j,X,z){m.jqXHR=j,m.textStatus=X,m.errorThrown=z,r._trigger("chunkfail",null,m),r._trigger("chunkalways",null,m),h.rejectWith(m.context,[j,X,z])}},this._enhancePromise(u),u.abort=function(){return g.abort()},_(),u)))},_beforeSend:function(t,i){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(i),this._initProgressObject(i),i._progress.loaded=i.loaded=i.uploadedBytes||0,i._progress.total=i.total=this._getTotal(i.files)||1,i._progress.bitrate=i.bitrate=0,this._active+=1,this._progress.loaded+=i.loaded,this._progress.total+=i.total},_verifyResult:function(t){return!0},_onDone:function(t,i,r,n){var l=n._progress.total,s=n._response;n._progress.loaded<l&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l,total:l}),n),s.result=n.result=t,s.textStatus=n.textStatus=i,s.jqXHR=n.jqXHR=r,this._trigger("done",null,n)},_onFail:function(t,i,r,n){var l=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),l.jqXHR=n.jqXHR=t,l.textStatus=n.textStatus=i,l.errorThrown=n.errorThrown=r,this._trigger("fail",null,n)},_onAlways:function(t,i,r,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,l,s,d,r=this,c=r._getAJAXSettings(i),o=function(){return r._sending+=1,c._bitrateTimer=new r._BitrateTimer,n=n||((l||!1===r._trigger("send",e.Event("send",{delegatedEvent:t}),c))&&r._getXHRPromise(!1,c.context,l)||r._chunkedUpload(c)||e.ajax(c)).done(function(h,u,g){r._verifyResult(h)?r._onDone(h,u,g,c):r._onFail(g,u,h.message,c)}).fail(function(h,u,g){r._onFail(h,u,g,c)}).always(function(h,u,g){if(r._onAlways(h,u,g,c),r._sending-=1,r._active-=1,c.limitConcurrentUploads&&c.limitConcurrentUploads>r._sending)for(var _=r._slots.shift();_;){if("pending"===r._getDeferredState(_)){_.resolve();break}_=r._slots.shift()}0===r._active&&r._trigger("stop")})};return this._beforeSend(t,c),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),d=s.pipe(o)):(this._sequence=this._sequence.pipe(o,o),d=this._sequence),d.abort=function(){return l=[void 0,"abort","abort"],n?n.abort():(s&&s.rejectWith(c.context,l),o())},this._enhancePromise(d)):o()},_onAdd:function(t,i){this.options.currentUploadChunkSizeInitialSize=this.options.dynamicChunkSizeInitialChunkSize;var _,m,w,A,r=this,n=!0,l=e.extend({},this.options,i),s=i.files,d=s.length,c=l.limitMultiFileUploads,o=l.limitMultiFileUploadSize,h=l.limitMultiFileUploadSizeOverhead,u=0,g=this._getParamName(l),j=0;if(o&&(!d||void 0===s[0].size)&&(o=void 0),(l.singleFileUploads||c||o)&&this._isXHRUpload(l))if(l.singleFileUploads||o||!c)if(!l.singleFileUploads&&o)for(w=[],_=[],A=0;A<d;A+=1)u+=s[A].size+h,(A+1===d||u+s[A+1].size+h>o||c&&A+1-j>=c)&&(w.push(s.slice(j,A+1)),(m=g.slice(j,A+1)).length||(m=g),_.push(m),j=A+1,u=0);else _=g;else for(w=[],_=[],A=0;A<d;A+=c)w.push(s.slice(A,A+c)),(m=g.slice(A,A+c)).length||(m=g),_.push(m);else w=[s],_=[g];return i.originalFiles=s,e.each(w||s,function(X,z){var O=e.extend({},i);O.files=w?z:[z],O.paramName=_[X],r._initResponseObject(O),r._initProgressObject(O),r._addConvenienceMethods(t,O),e.when(r.beforeAdd(t,O)).then(function(D){return n=r._trigger("add",e.Event("add",{delegatedEvent:t}),D)}).fail(function(D){r._trigger("addfail",t,D)})}),n},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(r,n){return n===t[0]?i[0]:n}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var r=this,n=e.Deferred(),l=function(d){d&&!d.entry&&(d.entry=t),n.resolve([d])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,n.resolve(t._file)):t.file(function(d){d.relativePath=i,n.resolve(d)},l):t.isDirectory?t.createReader().readEntries(function(d){r._handleFileTreeEntries(d,i+t.name+"/").done(function(c){n.resolve(c)}).fail(l)},l):n.resolve([]),n.promise()},_handleFileTreeEntries:function(t,i){var r=this;return e.when.apply(e,e.map(t,function(n){return r._handleFileTreeEntry(n,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){var i=(t=t||{}).items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(r){var n;return r.webkitGetAsEntry?((n=r.webkitGetAsEntry())&&(n._file=r.getAsFile()),n):r.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var r,n,i=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(i&&i.length)return this._handleFileTreeEntries(i);if((r=e.makeArray(t.prop("files"))).length)void 0===r[0].name&&r[0].fileName&&e.each(r,function(l,s){s.name=s.fileName,s.size=s.fileSize});else{if(!(n=t.prop("value")))return e.Deferred().resolve([]).promise();r=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(r).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(n){r.files=n,i.options.replaceFileInput&&i._replaceFileInput(r.fileInput),!1!==i._trigger("change",e.Event("change",{delegatedEvent:t}),r)&&i._onAdd(t,r)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};i&&i.length&&(e.each(i,function(n,l){var s=l.getAsFile&&l.getAsFile();s&&r.files.push(s)}),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),r)&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,r=t.dataTransfer,n={};r&&r.files&&r.files.length&&(t.preventDefault(),this._getDroppedFiles(r).always(function(l){n.files=l,!1!==i._trigger("drop",e.Event("drop",{delegatedEvent:t}),n)&&i._onAdd(t,n)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=t.dataTransfer;i&&-1!==e.inArray("Files",i.types)&&!1!==this._trigger("dragover",e.Event("dragover",{delegatedEvent:t}))&&(t.preventDefault(),i.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var r=-1!==e.inArray(t,this._specialOptions);r&&this._destroyEventHandlers(),this._super(t,i),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(t){var i=t.split("/"),r=i.pop();return i.shift(),new RegExp(i.join("/"),r)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(r,n){t._isRegExpOption(r,n)&&(n=t._getRegExp(n)),i[r]=n})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;!t||this.options.disabled||(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(r){t.files=r,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},beforeAdd:function(t){},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var l,s,i=this,r=e.Deferred(),n=r.promise();return n.abort=function(){return s=!0,l?l.abort():(r.reject(null,"abort","abort"),n)},this._getFileInputFiles(t.fileInput).always(function(d){if(!s){if(!d.length)return void r.reject();t.files=d,l=i._onSend(null,t).then(function(c,o,h){r.resolve(c,o,h)},function(c,o,h){r.reject(c,o,h)})}}),this._enhancePromise(n)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})},"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}function fileuploadProcess(){var e;e=function(e){var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(i,r){var n=e(this);r.process(function(){return n.fileupload("process",r)}),t.call(this,i,r)}},processActions:{},_processFile:function(i,r){var n=this,s=e.Deferred().resolveWith(n,[i]).promise();return this._trigger("process",null,i),e.each(i.processQueue,function(d,c){var o=function(h){return r.errorThrown?e.Deferred().rejectWith(n,[r]).promise():n.processActions[c.action].call(n,h,c)};s=s.pipe(o,c.always&&o)}),s.done(function(){n._trigger("processdone",null,i),n._trigger("processalways",null,i)}).fail(function(){n._trigger("processfail",null,i),n._trigger("processalways",null,i)}),s},_transformProcessQueue:function(i){var r=[];e.each(i.processQueue,function(){var n={},s=!0===this.prefix?this.action:this.prefix;e.each(this,function(d,c){n[d]="string"===e.type(c)&&"@"===c.charAt(0)?i[c.slice(1)||(s?s+d.charAt(0).toUpperCase()+d.slice(1):d)]:c}),r.push(n)}),i.processQueue=r},processing:function(){return this._processing},process:function(i){var r=this,n=e.extend({},this.options,i);return n.processQueue&&n.processQueue.length&&(this._transformProcessQueue(n),0===this._processing&&this._trigger("processstart"),e.each(i.files,function(l){var s=l?e.extend({},n):n,d=function(){return i.errorThrown?e.Deferred().rejectWith(r,[i]).promise():r._processFile(s,i)};s.index=l,r._processing+=1,r._processingQueue=r._processingQueue.pipe(d,d).always(function(){r._processing-=1,0===r._processing&&r._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})},"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}function kalturaValidate(){var e;e=function(e){e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,i){if(i.disabled)return t;var s,r=e.Deferred(),n=this.options,l=t.files[t.index];return(i.minFileSize||i.maxFileSize)&&(s=l.size),"number"===e.type(i.maxNumberOfFiles)&&(n.getNumberOfFiles()||0)+t.files.length>i.maxNumberOfFiles?l.error=n.i18n("maxNumberOfFiles"):!i.acceptFileTypes||i.acceptFileTypes.test(l.type)||i.acceptFileTypes.test(l.name)?s>i.maxFileSize?l.error=n.i18n("maxFileSize"):"number"===e.type(s)&&s<i.minFileSize?l.error=n.i18n("minFileSize"):delete l.error:l.error=n.i18n("acceptFileTypes"),l.error||t.files.error?(t.files.error=!0,r.rejectWith(this,[t])):r.resolveWith(this,[t]),r.promise()}}})},"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):e(window.jQuery)}function fileuploadKaltura(){var e;e=function(e){var t,i=!1,l=e.blueimp.fileupload.prototype._onAdd;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{ks:null,apiURL:"http://www.kaltura.com/api_v3/",url:"http://www.kaltura.com/api_v3/?service=uploadToken&action=upload&format=1",host:"http://www.kaltura.com",chunkbefore:function(s,d){var c=d.maxChunkSize-d.chunkSize>0;0==d.uploadedBytes||(d.formData.resume=1,d.formData.resumeAt=d.uploadedBytes),d.formData.finalChunk=c?1:0},chunkdone:function(s,d){},chunksend:function(s,d){},addfail:function(s,d){window&&window.console&&window.console.log&&console.log("addfail:",d)},getFilesFromResponse:function(s){return[{name:s.result.fileName,size:s.result.fileSize,url:s.apiURL+"?service=uploadToken&action=get&ks="+s.ks+"&uploadTokenId="+s.result.id,thumbnail_url:"http://123.com",delete_url:s.apiURL+"?service=uploadToken&action=delete&ks="+s.ks+"&uploadTokenId="+s.result.id,delete_type:"GET",create_url:s.apiURL+"?service=baseEntry&action=addfromuploadedfile&format=1&entry:objectType=KalturaBaseEntry&entry:type=-1&entry:name="+s.result.fileName+"&ks="+s.ks+"&uploadTokenId="+s.result.id,create_type:"GET"}]},fail:function(s,d){i&&t("cancelUpload",[])}},_getUploadedBytes:function(s){return s&&s.responseText&&s.responseText.indexOf("uploadedFileSize")>0?parseInt(JSON.parse(s.responseText).uploadedFileSize):null},_verifyResult:function(s){return!(s&&s.code)},beforeAdd:function(s,d){var c=new jQuery.Deferred,o=this;if(this.options.ks)return-1!=navigator.userAgent.indexOf("Android")&&-1==navigator.userAgent.indexOf("Chrome")&&!i&&(o.options.maxChunkSize=void 0),e.each(d.files,function(_,m){e.when(function(_,m){var w=new jQuery.Deferred;e.ajax({url:o.options.apiURL+"?service=uploadToken&action=list&format=9",data:{"filter:statusEqual":1,"filter:objectType":"KalturaUploadTokenFilter","filter:fileNameEqual":_,ks:o.options.ks},type:"GET",dataType:"jsonp"}).done(function(j){if(o._verifyResult(j)){if(j&&j.objects&&j.objects.length>0)for(var X=0;X<j.objects.length;X++){var z=j.objects[X];if(_==z.fileName&&m==z.fileSize&&z.uploadedFileSize!=m)return void w.resolve(z)}A()}else w.reject(j)});var A=function(){e.ajax({url:o.options.apiURL+"?service=uploadToken&action=add&format=9",data:{"uploadToken:fileName":_,"uploadToken:fileSize":m,ks:o.options.ks},type:"GET",dataType:"jsonp"}).done(function(j){o._verifyResult(j)?w.resolve(j):w.reject(j)})};return w}(m.name,m.size)).then(function(w){!function(_,m,w,A){if(w.firstChunk=!0,w.uploadTokenId=_.id,_.uploadedFileSize){w.uploadedBytes=parseInt(_.uploadedFileSize);var j=parseInt(_.fileSize)-parseInt(_.uploadedFileSize)<=e.blueimp.fileupload.prototype.option.maxChunkSize;w.formData={ks:o.options.ks,uploadTokenId:_.id,resume:1,finalChunk:j?1:0,resumeAt:_.uploadedFileSize}}else w.formData={ks:o.options.ks,uploadTokenId:_.id,resume:0,finalChunk:1,resumeAt:0};i&&(window.fileUploadProgress=function(X){var z=JSON.parse(X);e.extend(z,w),o._trigger("progressall",e.Event("progressall",{delegatedEvent:s}),z),o._trigger("progress",e.Event("progressall",{delegatedEvent:s}),z)},window.fileUploadFailed=function(X){o._trigger("failed",s,w),o._trigger("finished",s,w),o._trigger("always",s,w)},window.fileUploadDone=function(){var X={files:w.files,textStatus:"success",uploadTokenId:_.id};e.extend(X,w),o._trigger("done",s,X)},w.submit=function(X){window.startUploadCallback=function(z){"true"===z&&o._trigger("send",X,w)},t("startUpload",[o.options.host,w.formData])}),c.resolve(w)}(w,0,d)}).fail(function(w){c.reject(w)})}),c;window&&window.console&&window.console.log&&console.log("Missing KS")},_getSignture:function(s){s=this.ksort(s);var d="";for(var c in s)d+=c+s[c];return MD5(d)},ksort:function(s){var d=[],c=[],o=0;for(h in s)c[o++]=h+" |"+s[h];c=c.sort();for(var h=0;h<c.length;h++){var u=c[h].split(" |");d[u[0]]=u[1]}return d},_create:function(){var s=this;e.ajaxPrefilter(function(d,c,o){var h=e.String.deparam(d.url.split("?")[1]);if(("upload"==h.action&&/msie 7/.test(navigator.userAgent.toLowerCase())||/msie 8/.test(navigator.userAgent.toLowerCase())||/msie 9/.test(navigator.userAgent.toLowerCase()))&&(d.url=d.url.replace(/format=1/,"format=2"),d.format=2),h.action&&delete h.action,"String"==typeof d.data){var u=e.String.deparam(d.data);u.fileData&&delete u.fileData,e.extend(h,u)}d.formData&&e.extend(h,d.formData);var g=s._getSignture(h);d.url=d.url.indexOf("?")>-1?d.url+"&kalsig="+g:d.url+"?kalsig="+g}),this._super(),-1!=navigator.userAgent.indexOf("Android")&&-1!=navigator.userAgent.indexOf("kalturaNativeCordovaPlayer")&&(i=!0,t=function(d,c){cordova.kWidget.exec(d,c,"FileChooserPlugin")},e("body").on("click",".fileinput",function(d){return t("openFileChooser",[s.element.attr("id"),d.target.id]),d.stopPropagation(),!1}))},_onAdd:function(s,d){l.call(this,s,d),this.options.files=d.files}})},"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery),function(e){var t=/^\d+$/,i=/([^\[\]]+)|(\[\])/g,r=/\+/g,n=/([^?#]*)(#.*)?$/;e.String=e.extend(e.String||{},{deparam:function(l){if(!l||!n.test(l))return{};for(var c,s={},d=l.split("&"),o=0;o<d.length;o++){c=s;var h=d[o].split("=");2!=h.length&&(h=[h[0],h.slice(1).join("=")]);for(var u=decodeURIComponent(h[0].replace(r," ")),g=decodeURIComponent(h[1].replace(r," ")),_=u.match(i),m=0;m<_.length-1;m++){var w=_[m];c[w]||(c[w]=t.test(_[m+1])||"[]"==_[m+1]?[]:{}),c=c[w]}lastPart=_[_.length-1],"[]"==lastPart?c.push(g):c[lastPart]=g}return s}})}(jQuery)}function kalturaBase(){var e;e=function(e){var t=e.blueimp.fileupload.prototype.options.add,i=e.blueimp.fileupload.prototype.options.fail;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{ignoreChunkHeader:!0,dataType:"json",uploadBoxId:null,jqXHR:null,context:null,add:function(h,u){var g=e(h.target);if(!g.fileupload("option","addConfirmCallback")||g.fileupload("option","addConfirmCallback")()){var _=g.fileupload("getUploadBoxId",h,u);u.uploadBoxId=_;var m=g.fileupload("getUploadBox",_);m.data("uplsuccessmsghtml")&&(e("#successmsg",m).html(m.data("uplsuccessmsghtml")),e("#successmsg",m).removeClass("alert-danger").addClass("alert-success"));var w=o.getInstance();g.fileupload("option","fileTypes"),g.fileupload("option","acceptFileTypes",n(g.fileupload("option","fileTypes")));var j=u.files[0];e("#fileupload",m).addClass("hidden"),e("#fileupload",m).addClass("hidden"),e("#cancelBtn",m).removeClass("hidden"),e("#progress",m).removeClass("hidden"),e("#upload-file-info",m).html("Now uploading: "+j.name),e(".cancelBtn",m).click(function(X){u.jqXHR?u.jqXHR.abort():(u.textStatus="abort",g.fileupload("option","fail")(h,u)),w.removeWidget(_)}),e.blueimp.fileupload.prototype.autoUpload=!1,t.call(this,h,u),void 0!==j.error?e(this).fileupload("onError",j.error,_):w.hasWidget(_)||w.addWidget(g,h,u)}},progress:function(h,u){var _=e(h.target).fileupload("getUploadBoxId",h,u),m="#uploadbox"+_+" #progress #progressBar",w=u.loaded,A=e(m).data("dataLoaded");A&&A>w&&(w=A),e(m).data("dataLoaded",w);var j=parseInt(w/u.total*100,10),X=l(w)+" of ";X+=l(u.total),d(X,j,_)},done:function(h,u){var g=e(h.target),_=g.fileupload("getUploadBoxId",h,u);if("success"==u.textStatus){var m=g.fileupload("getUploadBox",_);e("#progress",m).addClass("progress-success").removeClass("active"),e("#successmsg",m).removeClass("hidden"),e("#cancelBtn",m).addClass("hidden"),e("#progress .anchor .message",m).css("color","#4AD395"),o.getInstance().removeWidget(_)}else g.fileupload("onError",u.textStatus,_)},addfail:function(h,u){var g=e(h.target),_=g.fileupload("getUploadBoxId",h,u);g.fileupload("onError",u.message,_)},failed:function(h,u){var g=e(h.target),_=g.fileupload("getUploadBoxId",h,u);g.fileupload("onError","could not upload file",_)},fail:function(h,u){var g=e(h.target);i?.call(this,h,u);var _=g.fileupload("getUploadBoxId",h,u),m=o.getInstance(),w="",A=g.fileupload("getUploadBox",_);u.errorThrown&&(w=u.errorThrown),u.textStatus&&!w&&(w=u.textStatus),"timeout"==w?setTimeout(function(){m.resumeUpload(_)},1e3):"abort"==w?(e("#progress",A).addClass("progress-danger").removeClass("active"),e("#cancelBtn",A).addClass("hidden"),A.data("uplsuccessmsghtml")||A.data("uplsuccessmsghtml",e("#successmsg",A).html()),e("#successmsg",A).text("Upload Cancelled!").removeClass("hidden").toggleClass("alert-danger alert-success"),g.fileupload("onCancel",_),m.removeWidget(_)):u.textStatus.code?(g.fileupload("onError",w,_),m.removeWidget(_)):u.uploadTokenId?setTimeout(function(){m.resumeUpload(_)},5e3):(g.fileupload("onError",w,_),m.removeWidget(_))}},getUploadManager:function(){return o.getInstance()},onError:function(h,u){s(h,u),this._trigger("error",null,{error:h,uploadBoxId:u})},onCancel:function(h){this._trigger("cancel",null,{uploadBoxId:h})},getUploadBox:function(h){return e("#uploadbox"+h)},getUploadBoxId:function(h,u){var _=e(h.target).fileupload("option","uploadBoxId");if(_||(_=u.uploadBoxId))return _;var m=u.fileInput;return m||(m=e(u.dataId)),m.data("uploadboxid")},addUploadBox:function(h,u){var g=e(h.target),_=g.fileupload("getUploadBoxId",h,u),m=g.fileupload("option","categoryId");console.log("show next upload box -- boxId:"+(_+1)+", categoryId"+m)}});var n=function(h){var u=null;return h&&(h=h.replace(/;?\*\./g,"|"),u=new RegExp("(\\.|\\/)("+h+")$","i")),u},l=function(h){var u="";return Math.floor(h/1024/1024/1024)>=1?u+=Math.round(h/1024/1024/1024*100)/100+"Gb":Math.floor(h/1024/1024)>=5?u+=Math.round(h/1024/1024*100)/100+"Mb":u+=Math.round(h/1024,2)+"Kb",u},s=function(h,u){var g="#uploadbox"+u;e(g+" #progressBar").html("Oops! "+h).width("100%"),e(g+" #progress").addClass("progress-danger").removeClass("active"),e(g+" #cancelBtn").addClass("hidden"),e("#uploadbox"+u+" #progress .anchor .message").hide()},d=function(h,u,g){var _="#uploadbox"+g+" #progress #progressBar";e("#uploadbox"+g+" #progress .anchor .message").text(h),e(_).css("width",Math.max(u,1)+"%")};function c(){this.widgets={},this.uploads={},this.addWidget=function(h,u,g){var _=g.uploadBoxId;this.widgets[_]||(this.widgets[_]={w:h,e:u,data:g})},this.hasWidget=function(h){return typeof this.widgets[h]<"u"},this.removeWidget=function(h){this.widgets[h]&&delete this.widgets[h]},this.uploadsPending=function(){return e.fn.assocArraySize(this.widgets)>0},this.resumeAllUploads=function(){var h;for(h in this.widgets)if(this.widgets.hasOwnProperty(h)){var u=this.widgets[h];e.blueimp.fileupload.prototype.options.add.call(u.w,u.e,u.data)}},this.resumeUpload=function(h){if(this.widgets[h]){var u=this.widgets[h];e.blueimp.fileupload.prototype.options.add.call(u.w,u.e,u.data)}}}var o=function(){var h;return{getInstance:function(){return h||(h=function u(){return new c}()),h}}}();window.onbeforeunload=function(_){var u=o.getInstance();if(u.uploadsPending()){u.resumeAllUploads();var g="You're still uploading! Are you sure you want to leave this page?";return(_=_||window.event)&&(_.returnValue=g),g}}},"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}function VideoUpload(e){$(function(){console.log("doc ready");var i=$("#uploadHook").fileupload({maxChunkSize:3e6,dynamicChunkSizeInitialChunkSize:1e6,dynamicChunkSizeThreshold:5e7,dynamixChunkSizeMaxTime:30,host:"https://www.kaltura.com",apiURL:"https://www.kaltura.com/api_v3/",url:"https://www.kaltura.com/api_v3/?service=uploadToken&action=upload&format=1",ks:e,fileTypes:"*.mts;*.MTS;*.qt;*.mov;*.mpg;*.avi;*.mp3;*.m4a;*.wav;*.mp4;*.wma;*.vob;*.flv;*.f4v;*.asf;*.qt;*.mov;*.mpeg;*.avi;*.wmv;*.m4v;*.3gp;*.jpg;*.jpeg;*.bmp;*.png;*.gif;*.tif;*.tiff;*.mkv;*.QT;*.MOV;*.MPG;*.AVI;*.MP3;*.M4A;*.WAV;*.MP4;*.WMA;*.VOB;*.FLV;*.F4V;*.ASF;*.QT;*.MOV;*.MPEG;*.AVI;*.WMV;*.M4V;*.3GP;*.JPG;*.JPEG;*.BMP;*.PNG;*.GIF;*.TIF;*.TIFF;*.MKV;*.AIFF;*.arf;*.ARF;*.webm;*.WEBM;*.rm;*.RM;*.ra;*.RA;*.RV;*.rv;*.aiff",context:"",categoryId:-1,messages:{acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"},android:"",singleUpload:""}).bind("fileuploadadd",function(r,n){console.log("fileuploaded");var l=i.fileupload("getUploadBoxId",r,n);n.uploadBoxId=l,!i.fileupload("getUploadManager").hasWidget($(this))&&!i.fileupload("option","android")&&!i.fileupload("option","singleUpload")&&(i.fileupload("addUploadBox",r,n),n&&$("#UploadedName").text(n.files[0].name))}).bind("fileuploadsend",function(r,n){console.log("fileuploadsend"),$("#progcontrol").trigger("click"),$("#videouploading").trigger("click"),$("#getprocesspercent").trigger("click");var l=i.fileupload("getUploadBoxId",r,n),s=n.files[0];if(i.fileupload("getUploadManager"),void 0===s.error){var c=i.fileupload("option","context");console.log("upload context: "+c),console.log("now uploading file name: "+encodeURIComponent(s.name)),$("#uploadbox"+l+" .entry_details").removeClass("hidden")}else console.log("some kind of error when starting to upload "+s.error)}).bind("fileuploaddone",function(r,n){console.log("fileuploaddone");var l=i.fileupload("getUploadBoxId",r,n);$("#getdata").append(n.uploadTokenId),$("#triggerservice").trigger("click"),$("#closeuploadmodal").trigger("click"),console.log("upload complete success: "+encodeURIComponent(n.files[0].name)+"/token/"+n.uploadTokenId+"/boxId/"+l),console.log(n,"uploaddata"),console.log("Next, call the media.add and media.addContent API actions to create your Kaltura Media Entry and associate it with this newly uploaded file. Once media.addContent is called, the transcoding process will begin and your media entry will be prepared for playback and sharing. Use the Kaltura JS client library or call your backend service to execute media.add and media.addContent passing the uploadTokenId.")}).bind("fileuploaderror",function(r,n){console.log("fileuploaderror");var l=i.fileupload("getUploadBoxId",r,n),s=i.fileupload("getUploadBox",l);$("#entry_details",s).addClass("hidden"),i.fileupload("option","singleUpload")&&i.fileupload("addUploadBox",r,n)}).bind("fileuploadcancel",function(r,n){console.log("fileuploadcancel");var l=i.fileupload("getUploadBoxId",r,n),s=i.fileupload("getUploadBox",l);$("#entry_details",s).addClass("hidden")});$("#uploadbox1 #fileinput").bind("change",function(r){$("#uploadHook").fileupload("add",{fileInput:$(this),uploadBoxId:1}),console.log("file chosen")})})}function recorder(e,{partnerId:t,uiConfId:i}){var r;!function n(l,{partnerId:s,uiConfId:d}){const c=Kaltura.ExpressRecorder.create("recorder",{ks:l,serviceUrl:"https://cdnapisec.kaltura.com",app:"kmc",playerUrl:"https://cdnapisec.kaltura.com",partnerId:s,uiConfId:d,showUploadUI:!1,allowVideo:!0,allowAudio:!0});c.instance.addEventListener("mediaUploadStarted",function(o){console.log(o.detail),r=o.detail.entryId,$("#getexpress").text(r),$("#getidinedit").text(r)}),c.instance.addEventListener("mediaUploadEnded",function(o){console.log(o.detail),$("#triggerexpress").trigger("click"),$("#saveexp").trigger("click"),$("#closeupload").trigger("click")}),c.instance.addEventListener("mediaUploadCanceled",function(o){console.log(o.detail)}),c.instance.addEventListener("mediaUploadProgress",KApps.expressRecorderHandler.uploadProgressHandler),c.instance.addEventListener("mediaUploadCancelled",KApps.expressRecorderHandler.uploadCancelHandler),c.instance.addEventListener("mediaUploadEnded",KApps.expressRecorderHandler.uploadDoneHandler),c.instance.addEventListener("mediaUploadStarted",KApps.expressRecorderHandler.uploadStartHandler),c.instance.addEventListener("recordingEnded",function(){KApps,$(".record-again, .use-this-btn").show()}),c.instance.addEventListener("recordingStarted",function(){console.log("started"),$(".record-again, .use-this-btn").hide()}),KApps.expressRecorderHandler.instance=c.instance}(e,{partnerId:t,uiConfId:i})}!function(e){"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,dynamicChunkSizeInitialChunkSize:1e6,currentUploadChunkSizeInitialSize:1e6,lastChunkUploadChunkSize:void 0,startTime:void 0,dynamicChunkSizeThreshold:void 0,dynamixChunkSizeMaxTime:30,dynamixChunkSizeTimeStep:10,getDynamicChunkSize:function(t,i){if(i.dynamicChunkSizeThreshold){var r=Date.now?Date.now():(new Date).getTime(),l=1e3*i.maxUploadTime/(r-i.startTime)*i.currentChunkSize;return l>i.dynamicChunkSizeThreshold&&(l=i.dynamicChunkSizeThreshold),Math.round(l)}return i.maxChunkSize},getDynamicUploadMaxTime:function(t,i){var r=i.maxUploadTime+i.dynamixChunkSizeTimeStep;return r>i.dynamixChunkSizeMaxTime&&(r=i.dynamixChunkSizeMaxTime),r},uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,ignoreChunkHeader:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(r,n){t=t.replace("{"+r+"}",n)}),t},formData:function(t){return t.serializeArray()},add:function(t,i){if(t.isDefaultPrevented())return!1;(i.autoUpload||!1!==i.autoUpload&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_cutDynamicUploadMaxChunkSize:function(t){if(this.options.dynamicChunkSizeThreshold&&(this.options.currentUploadChunkSizeInitialSize=this.options.lastChunkUploadChunkSize,this.options.dynamicChunkSizeThreshold=Math.round(2*t/3),this.options.currentUploadChunkSizeInitialSize>this.options.dynamicChunkSizeThreshold)){var i=this.options.currentUploadChunkSizeInitialSize;this.options.currentUploadChunkSizeInitialSize=this.options.dynamicChunkSizeThreshold,this.options.dynamicChunkSizeThreshold=i}},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,i,r){var n=t-this.timestamp;return(!this.bitrate||!r||n>r)&&(this.bitrate=1e3/n*(i-this.loaded)*8,this.loaded=i,this.timestamp=t),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(r,n){i.push({name:r,value:n})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(r,n){i+=n.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(t){var i;if(t._response)for(i in t._response)t._response.hasOwnProperty(i)&&delete t._response[i];else t._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,r=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&r-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=r,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(r,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(n){var l=n.originalEvent;n.lengthComputable=l.lengthComputable,n.loaded=l.loaded,n.total=l.total,i._onProgress(n,t)}),t.xhr=function(){return r})},_isInstanceOf:function(t,i){return Object.prototype.toString.call(i)==="[object "+t+"]"},_initXHRData:function(t){var r,i=this,n=t.files[0],l=t.multipart||!e.support.xhrFileUpload,s="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&!t.ignoreChunkHeader&&(t.headers["Content-Range"]=t.contentRange),(!l||t.blob||!this._isInstanceOf("File",n))&&!t.ignoreChunkHeader&&(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),l?e.support.xhrFormDataFileUpload&&(t.postMessage?(r=this._getFormData(t),t.blob?r.push({name:s,value:t.blob}):e.each(t.files,function(d,c){r.push({name:"array"===e.type(t.paramName)&&t.paramName[d]||s,value:c})})):(i._isInstanceOf("FormData",t.formData)?r=t.formData:(r=new FormData,e.each(this._getFormData(t),function(d,c){r.append(c.name,c.value)})),t.blob?(t.ignoreChunkHeader||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),r.append(s,t.blob,n.name)):e.each(t.files,function(d,c){(i._isInstanceOf("File",c)||i._isInstanceOf("Blob",c))&&r.append("array"===e.type(t.paramName)&&t.paramName[d]||s,c,c.uploadName||c.name)})),t.data=r):(t.contentType=n.type||"application/octet-stream",t.data=t.blob||n),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(t){var i=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],i.each(function(){for(var n=e(this),l=n.prop("name")||"files[]",s=(n.prop("files")||[1]).length;s;)r.push(l),s-=1}),r.length||(r=[i.prop("name")||"files[]"])),r},_initFormSettings:function(t){(!t.form||!t.form.length)&&(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(t,i,r){var n=e.Deferred(),l=n.promise();return i=i||this.options.context||l,!0===t?n.resolveWith(i,r):!1===t&&n.rejectWith(i,r),l.abort=n.promise,this._enhancePromise(l)},_addConvenienceMethods:function(t,i){var r=this,n=function(l){return e.Deferred().resolveWith(r,l).promise()};i.process=function(l,s){return(l||s)&&(i._processQueue=this._processQueue=(this._processQueue||n([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(r,[i]).promise():n(arguments)}).pipe(l,s)),this._processQueue||n([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==r._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))},i.state=function(){return this.jqXHR?r._getDeferredState(this.jqXHR):this._processQueue?r._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===r._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(t){var i=t.getResponseHeader("Range"),r=i&&i.split("-"),n=r&&r.length>1&&parseInt(r[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var g,_,r=this,n=t.files[0],l=n.size,s=t.uploadedBytes,d=t.maxChunkSize||l,c=t.dynamixChunkSizeTimeStep,o=this._blobSlice,h=e.Deferred(),u=h.promise();return!(!(this._isXHRUpload(t)&&o&&(s||d<l))||t.data)&&(!!i||(s>=l?(n.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",n.error])):(t.dynamicChunkSizeThreshold&&(d=t.currentUploadChunkSizeInitialSize),_=function(){var m=e.extend({},t),w=m._progress.loaded;m.blob=o.call(n,s,s+d,n.type),m.chunkSize=m.blob.size,m.maxChunkSize=d,m.currentChunkSize=d,m.maxUploadTime=c,m.contentRange="bytes "+s+"-"+(s+m.chunkSize-1)+"/"+l,r._trigger("chunkbefore",null,m),r._initXHRData(m),r._initProgressListener(m),m.startTime=Date.now(),g=(!1!==r._trigger("chunksend",null,m)&&e.ajax(m)||r._getXHRPromise(!1,m.context)).done(function(j,X,z){if(r._verifyResult(j))if(s=r._getUploadedBytes(z)||s+m.chunkSize,w+m.chunkSize-m._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s-m.uploadedBytes,total:s-m.uploadedBytes}),m),t.uploadedBytes=m.uploadedBytes=s,m.result=j,m.textStatus=X,m.jqXHR=z,r._trigger("chunkdone",null,m),r._trigger("chunkalways",null,m),s<l){if(t.dynamicChunkSizeThreshold){r.options.lastChunkUploadChunkSize=d;var O=t.getDynamicChunkSize(null,m);d=O||d,c=t.getDynamicUploadMaxTime(null,m)}_()}else h.resolveWith(m.context,[j,X,z]);else A(z,j,j.message)}).fail(function(j,X,z){r._cutDynamicUploadMaxChunkSize(d),m.jqXHR=j,m.textStatus=X,m.errorThrown=z,r._trigger("chunkfail",null,m),r._trigger("chunkalways",null,m),h.rejectWith(m.context,[j,X,z])});var A=function(j,X,z){m.jqXHR=j,m.textStatus=X,m.errorThrown=z,r._trigger("chunkfail",null,m),r._trigger("chunkalways",null,m),h.rejectWith(m.context,[j,X,z])}},this._enhancePromise(u),u.abort=function(){return g.abort()},_(),u)))},_beforeSend:function(t,i){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(i),this._initProgressObject(i),i._progress.loaded=i.loaded=i.uploadedBytes||0,i._progress.total=i.total=this._getTotal(i.files)||1,i._progress.bitrate=i.bitrate=0,this._active+=1,this._progress.loaded+=i.loaded,this._progress.total+=i.total},_verifyResult:function(t){return!0},_onDone:function(t,i,r,n){var l=n._progress.total,s=n._response;n._progress.loaded<l&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l,total:l}),n),s.result=n.result=t,s.textStatus=n.textStatus=i,s.jqXHR=n.jqXHR=r,this._trigger("done",null,n)},_onFail:function(t,i,r,n){var l=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),l.jqXHR=n.jqXHR=t,l.textStatus=n.textStatus=i,l.errorThrown=n.errorThrown=r,this._trigger("fail",null,n)},_onAlways:function(t,i,r,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,l,s,d,r=this,c=r._getAJAXSettings(i),o=function(){return r._sending+=1,c._bitrateTimer=new r._BitrateTimer,n=n||((l||!1===r._trigger("send",e.Event("send",{delegatedEvent:t}),c))&&r._getXHRPromise(!1,c.context,l)||r._chunkedUpload(c)||e.ajax(c)).done(function(h,u,g){r._verifyResult(h)?r._onDone(h,u,g,c):r._onFail(g,u,h.message,c)}).fail(function(h,u,g){r._onFail(h,u,g,c)}).always(function(h,u,g){if(r._onAlways(h,u,g,c),r._sending-=1,r._active-=1,c.limitConcurrentUploads&&c.limitConcurrentUploads>r._sending)for(var _=r._slots.shift();_;){if("pending"===r._getDeferredState(_)){_.resolve();break}_=r._slots.shift()}0===r._active&&r._trigger("stop")})};return this._beforeSend(t,c),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),d=s.pipe(o)):(this._sequence=this._sequence.pipe(o,o),d=this._sequence),d.abort=function(){return l=[void 0,"abort","abort"],n?n.abort():(s&&s.rejectWith(c.context,l),o())},this._enhancePromise(d)):o()},_onAdd:function(t,i){this.options.currentUploadChunkSizeInitialSize=this.options.dynamicChunkSizeInitialChunkSize;var _,m,w,A,r=this,n=!0,l=e.extend({},this.options,i),s=i.files,d=s.length,c=l.limitMultiFileUploads,o=l.limitMultiFileUploadSize,h=l.limitMultiFileUploadSizeOverhead,u=0,g=this._getParamName(l),j=0;if(o&&(!d||void 0===s[0].size)&&(o=void 0),(l.singleFileUploads||c||o)&&this._isXHRUpload(l))if(l.singleFileUploads||o||!c)if(!l.singleFileUploads&&o)for(w=[],_=[],A=0;A<d;A+=1)u+=s[A].size+h,(A+1===d||u+s[A+1].size+h>o||c&&A+1-j>=c)&&(w.push(s.slice(j,A+1)),(m=g.slice(j,A+1)).length||(m=g),_.push(m),j=A+1,u=0);else _=g;else for(w=[],_=[],A=0;A<d;A+=c)w.push(s.slice(A,A+c)),(m=g.slice(A,A+c)).length||(m=g),_.push(m);else w=[s],_=[g];return i.originalFiles=s,e.each(w||s,function(X,z){var O=e.extend({},i);O.files=w?z:[z],O.paramName=_[X],r._initResponseObject(O),r._initProgressObject(O),r._addConvenienceMethods(t,O),e.when(r.beforeAdd(t,O)).then(function(D){return n=r._trigger("add",e.Event("add",{delegatedEvent:t}),D)}).fail(function(D){r._trigger("addfail",t,D)})}),n},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(r,n){return n===t[0]?i[0]:n}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var r=this,n=e.Deferred(),l=function(d){d&&!d.entry&&(d.entry=t),n.resolve([d])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,n.resolve(t._file)):t.file(function(d){d.relativePath=i,n.resolve(d)},l):t.isDirectory?t.createReader().readEntries(function(d){r._handleFileTreeEntries(d,i+t.name+"/").done(function(c){n.resolve(c)}).fail(l)},l):n.resolve([]),n.promise()},_handleFileTreeEntries:function(t,i){var r=this;return e.when.apply(e,e.map(t,function(n){return r._handleFileTreeEntry(n,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){var i=(t=t||{}).items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(r){var n;return r.webkitGetAsEntry?((n=r.webkitGetAsEntry())&&(n._file=r.getAsFile()),n):r.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var r,n,i=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(i&&i.length)return this._handleFileTreeEntries(i);if((r=e.makeArray(t.prop("files"))).length)void 0===r[0].name&&r[0].fileName&&e.each(r,function(l,s){s.name=s.fileName,s.size=s.fileSize});else{if(!(n=t.prop("value")))return e.Deferred().resolve([]).promise();r=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(r).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(n){r.files=n,i.options.replaceFileInput&&i._replaceFileInput(r.fileInput),!1!==i._trigger("change",e.Event("change",{delegatedEvent:t}),r)&&i._onAdd(t,r)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};i&&i.length&&(e.each(i,function(n,l){var s=l.getAsFile&&l.getAsFile();s&&r.files.push(s)}),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),r)&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,r=t.dataTransfer,n={};r&&r.files&&r.files.length&&(t.preventDefault(),this._getDroppedFiles(r).always(function(l){n.files=l,!1!==i._trigger("drop",e.Event("drop",{delegatedEvent:t}),n)&&i._onAdd(t,n)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=t.dataTransfer;i&&-1!==e.inArray("Files",i.types)&&!1!==this._trigger("dragover",e.Event("dragover",{delegatedEvent:t}))&&(t.preventDefault(),i.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var r=-1!==e.inArray(t,this._specialOptions);r&&this._destroyEventHandlers(),this._super(t,i),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(t){var i=t.split("/"),r=i.pop();return i.shift(),new RegExp(i.join("/"),r)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(r,n){t._isRegExpOption(r,n)&&(n=t._getRegExp(n)),i[r]=n})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;!t||this.options.disabled||(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(r){t.files=r,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},beforeAdd:function(t){},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var l,s,i=this,r=e.Deferred(),n=r.promise();return n.abort=function(){return s=!0,l?l.abort():(r.reject(null,"abort","abort"),n)},this._getFileInputFiles(t.fileInput).always(function(d){if(!s){if(!d.length)return void r.reject();t.files=d,l=i._onSend(null,t).then(function(c,o,h){r.resolve(c,o,h)},function(c,o,h){r.reject(c,o,h)})}}),this._enhancePromise(n)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(i,r){var n=e(this);r.process(function(){return n.fileupload("process",r)}),t.call(this,i,r)}},processActions:{},_processFile:function(i,r){var n=this,s=e.Deferred().resolveWith(n,[i]).promise();return this._trigger("process",null,i),e.each(i.processQueue,function(d,c){var o=function(h){return r.errorThrown?e.Deferred().rejectWith(n,[r]).promise():n.processActions[c.action].call(n,h,c)};s=s.pipe(o,c.always&&o)}),s.done(function(){n._trigger("processdone",null,i),n._trigger("processalways",null,i)}).fail(function(){n._trigger("processfail",null,i),n._trigger("processalways",null,i)}),s},_transformProcessQueue:function(i){var r=[];e.each(i.processQueue,function(){var n={},s=!0===this.prefix?this.action:this.prefix;e.each(this,function(d,c){n[d]="string"===e.type(c)&&"@"===c.charAt(0)?i[c.slice(1)||(s?s+d.charAt(0).toUpperCase()+d.slice(1):d)]:c}),r.push(n)}),i.processQueue=r},processing:function(){return this._processing},process:function(i){var r=this,n=e.extend({},this.options,i);return n.processQueue&&n.processQueue.length&&(this._transformProcessQueue(n),0===this._processing&&this._trigger("processstart"),e.each(i.files,function(l){var s=l?e.extend({},n):n,d=function(){return i.errorThrown?e.Deferred().rejectWith(r,[i]).promise():r._processFile(s,i)};s.index=l,r._processing+=1,r._processingQueue=r._processingQueue.pipe(d,d).always(function(){r._processing-=1,0===r._processing&&r._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):e(window.jQuery)}(function(e){e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,i){if(i.disabled)return t;var s,r=e.Deferred(),n=this.options,l=t.files[t.index];return(i.minFileSize||i.maxFileSize)&&(s=l.size),"number"===e.type(i.maxNumberOfFiles)&&(n.getNumberOfFiles()||0)+t.files.length>i.maxNumberOfFiles?l.error=n.i18n("maxNumberOfFiles"):!i.acceptFileTypes||i.acceptFileTypes.test(l.type)||i.acceptFileTypes.test(l.name)?s>i.maxFileSize?l.error=n.i18n("maxFileSize"):"number"===e.type(s)&&s<i.minFileSize?l.error=n.i18n("minFileSize"):delete l.error:l.error=n.i18n("acceptFileTypes"),l.error||t.files.error?(t.files.error=!0,r.rejectWith(this,[t])):r.resolveWith(this,[t]),r.promise()}}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){var t,i=!1,l=e.blueimp.fileupload.prototype._onAdd;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{ks:null,apiURL:"http://www.kaltura.com/api_v3/",url:"http://www.kaltura.com/api_v3/?service=uploadToken&action=upload&format=1",host:"http://www.kaltura.com",chunkbefore:function(s,d){var c=d.maxChunkSize-d.chunkSize>0;0==d.uploadedBytes||(d.formData.resume=1,d.formData.resumeAt=d.uploadedBytes),d.formData.finalChunk=c?1:0},chunkdone:function(s,d){},chunksend:function(s,d){},addfail:function(s,d){window&&window.console&&window.console.log&&console.log("addfail:",d)},getFilesFromResponse:function(s){return[{name:s.result.fileName,size:s.result.fileSize,url:s.apiURL+"?service=uploadToken&action=get&ks="+s.ks+"&uploadTokenId="+s.result.id,thumbnail_url:"http://123.com",delete_url:s.apiURL+"?service=uploadToken&action=delete&ks="+s.ks+"&uploadTokenId="+s.result.id,delete_type:"GET",create_url:s.apiURL+"?service=baseEntry&action=addfromuploadedfile&format=1&entry:objectType=KalturaBaseEntry&entry:type=-1&entry:name="+s.result.fileName+"&ks="+s.ks+"&uploadTokenId="+s.result.id,create_type:"GET"}]},fail:function(s,d){i&&t("cancelUpload",[])}},_getUploadedBytes:function(s){return s&&s.responseText&&s.responseText.indexOf("uploadedFileSize")>0?parseInt(JSON.parse(s.responseText).uploadedFileSize):null},_verifyResult:function(s){return!(s&&s.code)},beforeAdd:function(s,d){var c=new jQuery.Deferred,o=this;if(this.options.ks)return-1!=navigator.userAgent.indexOf("Android")&&-1==navigator.userAgent.indexOf("Chrome")&&!i&&(o.options.maxChunkSize=void 0),e.each(d.files,function(_,m){e.when(function(_,m){var w=new jQuery.Deferred;e.ajax({url:o.options.apiURL+"?service=uploadToken&action=list&format=9",data:{"filter:statusEqual":1,"filter:objectType":"KalturaUploadTokenFilter","filter:fileNameEqual":_,ks:o.options.ks},type:"GET",dataType:"jsonp"}).done(function(j){if(o._verifyResult(j)){if(j&&j.objects&&j.objects.length>0)for(var X=0;X<j.objects.length;X++){var z=j.objects[X];if(_==z.fileName&&m==z.fileSize&&z.uploadedFileSize!=m)return void w.resolve(z)}A()}else w.reject(j)});var A=function(){e.ajax({url:o.options.apiURL+"?service=uploadToken&action=add&format=9",data:{"uploadToken:fileName":_,"uploadToken:fileSize":m,ks:o.options.ks},type:"GET",dataType:"jsonp"}).done(function(j){o._verifyResult(j)?w.resolve(j):w.reject(j)})};return w}(m.name,m.size)).then(function(w){!function(_,m,w,A){if(w.firstChunk=!0,w.uploadTokenId=_.id,_.uploadedFileSize){w.uploadedBytes=parseInt(_.uploadedFileSize);var j=parseInt(_.fileSize)-parseInt(_.uploadedFileSize)<=e.blueimp.fileupload.prototype.option.maxChunkSize;w.formData={ks:o.options.ks,uploadTokenId:_.id,resume:1,finalChunk:j?1:0,resumeAt:_.uploadedFileSize}}else w.formData={ks:o.options.ks,uploadTokenId:_.id,resume:0,finalChunk:1,resumeAt:0};i&&(window.fileUploadProgress=function(X){var z=JSON.parse(X);e.extend(z,w),o._trigger("progressall",e.Event("progressall",{delegatedEvent:s}),z),o._trigger("progress",e.Event("progressall",{delegatedEvent:s}),z)},window.fileUploadFailed=function(X){o._trigger("failed",s,w),o._trigger("finished",s,w),o._trigger("always",s,w)},window.fileUploadDone=function(){var X={files:w.files,textStatus:"success",uploadTokenId:_.id};e.extend(X,w),o._trigger("done",s,X)},w.submit=function(X){window.startUploadCallback=function(z){"true"===z&&o._trigger("send",X,w)},t("startUpload",[o.options.host,w.formData])}),c.resolve(w)}(w,0,d)}).fail(function(w){c.reject(w)})}),c;window&&window.console&&window.console.log&&console.log("Missing KS")},_getSignture:function(s){s=this.ksort(s);var d="";for(var c in s)d+=c+s[c];return MD5(d)},ksort:function(s){var d=[],c=[],o=0;for(h in s)c[o++]=h+" |"+s[h];c=c.sort();for(var h=0;h<c.length;h++){var u=c[h].split(" |");d[u[0]]=u[1]}return d},_create:function(){var s=this;e.ajaxPrefilter(function(d,c,o){var h=e.String.deparam(d.url.split("?")[1]);if(("upload"==h.action&&/msie 7/.test(navigator.userAgent.toLowerCase())||/msie 8/.test(navigator.userAgent.toLowerCase())||/msie 9/.test(navigator.userAgent.toLowerCase()))&&(d.url=d.url.replace(/format=1/,"format=2"),d.format=2),h.action&&delete h.action,"String"==typeof d.data){var u=e.String.deparam(d.data);u.fileData&&delete u.fileData,e.extend(h,u)}d.formData&&e.extend(h,d.formData);var g=s._getSignture(h);d.url=d.url.indexOf("?")>-1?d.url+"&kalsig="+g:d.url+"?kalsig="+g}),this._super(),-1!=navigator.userAgent.indexOf("Android")&&-1!=navigator.userAgent.indexOf("kalturaNativeCordovaPlayer")&&(i=!0,t=function(d,c){cordova.kWidget.exec(d,c,"FileChooserPlugin")},e("body").on("click",".fileinput",function(d){return t("openFileChooser",[s.element.attr("id"),d.target.id]),d.stopPropagation(),!1}))},_onAdd:function(s,d){l.call(this,s,d),this.options.files=d.files}})}),function(e){var t=/^\d+$/,i=/([^\[\]]+)|(\[\])/g,r=/\+/g,n=/([^?#]*)(#.*)?$/;e.String=e.extend(e.String||{},{deparam:function(l){if(!l||!n.test(l))return{};for(var c,s={},d=l.split("&"),o=0;o<d.length;o++){c=s;var h=d[o].split("=");2!=h.length&&(h=[h[0],h.slice(1).join("=")]);for(var u=decodeURIComponent(h[0].replace(r," ")),g=decodeURIComponent(h[1].replace(r," ")),_=u.match(i),m=0;m<_.length-1;m++){var w=_[m];c[w]||(c[w]=t.test(_[m+1])||"[]"==_[m+1]?[]:{}),c=c[w]}lastPart=_[_.length-1],"[]"==lastPart?c.push(g):c[lastPart]=g}return s}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){var t=e.blueimp.fileupload.prototype.options.add,i=e.blueimp.fileupload.prototype.options.fail;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{ignoreChunkHeader:!0,dataType:"json",uploadBoxId:null,jqXHR:null,context:null,add:function(h,u){var g=e(h.target);if(!g.fileupload("option","addConfirmCallback")||g.fileupload("option","addConfirmCallback")()){var _=g.fileupload("getUploadBoxId",h,u);u.uploadBoxId=_;var m=g.fileupload("getUploadBox",_);m.data("uplsuccessmsghtml")&&(e("#successmsg",m).html(m.data("uplsuccessmsghtml")),e("#successmsg",m).removeClass("alert-danger").addClass("alert-success"));var w=o.getInstance();g.fileupload("option","fileTypes"),g.fileupload("option","acceptFileTypes",n(g.fileupload("option","fileTypes")));var j=u.files[0];e("#fileupload",m).addClass("hidden"),e("#fileupload",m).addClass("hidden"),e("#cancelBtn",m).removeClass("hidden"),e("#progress",m).removeClass("hidden"),e("#upload-file-info",m).html("Now uploading: "+j.name),e(".cancelBtn",m).click(function(X){u.jqXHR?u.jqXHR.abort():(u.textStatus="abort",g.fileupload("option","fail")(h,u)),w.removeWidget(_)}),e.blueimp.fileupload.prototype.autoUpload=!1,t.call(this,h,u),void 0!==j.error?e(this).fileupload("onError",j.error,_):w.hasWidget(_)||w.addWidget(g,h,u)}},progress:function(h,u){var _=e(h.target).fileupload("getUploadBoxId",h,u),m="#uploadbox"+_+" #progress #progressBar",w=u.loaded,A=e(m).data("dataLoaded");A&&A>w&&(w=A),e(m).data("dataLoaded",w);var j=parseInt(w/u.total*100,10),X=l(w)+" of ";X+=l(u.total),d(X,j,_)},done:function(h,u){var g=e(h.target),_=g.fileupload("getUploadBoxId",h,u);if("success"==u.textStatus){var m=g.fileupload("getUploadBox",_);e("#progress",m).addClass("progress-success").removeClass("active"),e("#successmsg",m).removeClass("hidden"),e("#cancelBtn",m).addClass("hidden"),e("#progress .anchor .message",m).css("color","#4AD395"),o.getInstance().removeWidget(_)}else g.fileupload("onError",u.textStatus,_)},addfail:function(h,u){var g=e(h.target),_=g.fileupload("getUploadBoxId",h,u);g.fileupload("onError",u.message,_)},failed:function(h,u){var g=e(h.target),_=g.fileupload("getUploadBoxId",h,u);g.fileupload("onError","could not upload file",_)},fail:function(h,u){var g=e(h.target);i?.call(this,h,u);var _=g.fileupload("getUploadBoxId",h,u),m=o.getInstance(),w="",A=g.fileupload("getUploadBox",_);u.errorThrown&&(w=u.errorThrown),u.textStatus&&!w&&(w=u.textStatus),"timeout"==w?setTimeout(function(){m.resumeUpload(_)},1e3):"abort"==w?(e("#progress",A).addClass("progress-danger").removeClass("active"),e("#cancelBtn",A).addClass("hidden"),A.data("uplsuccessmsghtml")||A.data("uplsuccessmsghtml",e("#successmsg",A).html()),e("#successmsg",A).text("Upload Cancelled!").removeClass("hidden").toggleClass("alert-danger alert-success"),g.fileupload("onCancel",_),m.removeWidget(_)):u.textStatus.code?(g.fileupload("onError",w,_),m.removeWidget(_)):u.uploadTokenId?setTimeout(function(){m.resumeUpload(_)},5e3):(g.fileupload("onError",w,_),m.removeWidget(_))}},getUploadManager:function(){return o.getInstance()},onError:function(h,u){s(h,u),this._trigger("error",null,{error:h,uploadBoxId:u})},onCancel:function(h){this._trigger("cancel",null,{uploadBoxId:h})},getUploadBox:function(h){return e("#uploadbox"+h)},getUploadBoxId:function(h,u){var _=e(h.target).fileupload("option","uploadBoxId");if(_||(_=u.uploadBoxId))return _;var m=u.fileInput;return m||(m=e(u.dataId)),m.data("uploadboxid")},addUploadBox:function(h,u){var g=e(h.target),_=g.fileupload("getUploadBoxId",h,u),m=g.fileupload("option","categoryId");console.log("show next upload box -- boxId:"+(_+1)+", categoryId"+m)}});var n=function(h){var u=null;return h&&(h=h.replace(/;?\*\./g,"|"),u=new RegExp("(\\.|\\/)("+h+")$","i")),u},l=function(h){var u="";return Math.floor(h/1024/1024/1024)>=1?u+=Math.round(h/1024/1024/1024*100)/100+"Gb":Math.floor(h/1024/1024)>=5?u+=Math.round(h/1024/1024*100)/100+"Mb":u+=Math.round(h/1024,2)+"Kb",u},s=function(h,u){var g="#uploadbox"+u;e(g+" #progressBar").html("Oops! "+h).width("100%"),e(g+" #progress").addClass("progress-danger").removeClass("active"),e(g+" #cancelBtn").addClass("hidden"),e("#uploadbox"+u+" #progress .anchor .message").hide()},d=function(h,u,g){var _="#uploadbox"+g+" #progress #progressBar";e("#uploadbox"+g+" #progress .anchor .message").text(h),e(_).css("width",Math.max(u,1)+"%")};function c(){this.widgets={},this.uploads={},this.addWidget=function(h,u,g){var _=g.uploadBoxId;this.widgets[_]||(this.widgets[_]={w:h,e:u,data:g})},this.hasWidget=function(h){return typeof this.widgets[h]<"u"},this.removeWidget=function(h){this.widgets[h]&&delete this.widgets[h]},this.uploadsPending=function(){return e.fn.assocArraySize(this.widgets)>0},this.resumeAllUploads=function(){var h;for(h in this.widgets)if(this.widgets.hasOwnProperty(h)){var u=this.widgets[h];e.blueimp.fileupload.prototype.options.add.call(u.w,u.e,u.data)}},this.resumeUpload=function(h){if(this.widgets[h]){var u=this.widgets[h];e.blueimp.fileupload.prototype.options.add.call(u.w,u.e,u.data)}}}var o=function(){var h;return{getInstance:function(){return h||(h=function u(){return new c}()),h}}}();window.onbeforeunload=function(_){var u=o.getInstance();if(u.uploadsPending()){u.resumeAllUploads();var g="You're still uploading! Are you sure you want to leave this page?";return(_=_||window.event)&&(_.returnValue=g),g}}});